"use strict";function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var libphe=createCommonjsModule((function(e,t){var n=function(){"undefined"!=typeof document&&document.currentScript&&document.currentScript.src;return function(e){var t;e=e||{},t||(t=void 0!==e?e:{});var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);var o,s,a,i,c;o=__dirname+"/",s=function(e){return i||(i=require("fs")),c||(c=require("path")),e=c.normalize(e),i.readFileSync(e,null)},a=function(e){return(e=s(e)).buffer||(e=new Uint8Array(e)),e.buffer||D("Assertion failed: undefined"),e},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){throw e})),process.on("unhandledRejection",D),t.inspect=function(){return"[Emscripten Module object]"};var _=t.print||console.log.bind(console),u=t.printErr||console.warn.bind(console);for(n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);r=null;var l,f={"f64-rem":function(e,t){return e%t},debugger:function(){}};t.wasmBinary&&(l=t.wasmBinary),"object"!=typeof WebAssembly&&u("no native wasm support detected");var d,p,h,v,y,m=new WebAssembly.Table({initial:286,maximum:286,element:"anyfunc"}),E=!1,b="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function w(e,t,n){var r=t+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.subarray&&b)return b.decode(e.subarray(t,n));for(r="";t<n;){var o=e[t++];if(128&o){var s=63&e[t++];if(192==(224&o))r+=String.fromCharCode((31&o)<<6|s);else{var a=63&e[t++];65536>(o=224==(240&o)?(15&o)<<12|s<<6|a:(7&o)<<18|s<<12|a<<6|63&e[t++])?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|1023&o))}}else r+=String.fromCharCode(o)}return r}function P(e){return 0<e%65536&&(e+=65536-e%65536),e}function A(e){p=e,t.HEAP8=h=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAP32=y=new Int32Array(e),t.HEAPU8=v=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var x=t.TOTAL_MEMORY||16777216;function N(e){for(;0<e.length;){var n=e.shift();if("function"==typeof n)n();else{var r=n.dc;"number"==typeof r?void 0===n.Ib?t.dynCall_v(r):t.dynCall_vi(r,n.Ib):r(void 0===n.Ib?null:n.Ib)}}}(d=t.wasmMemory?t.wasmMemory:new WebAssembly.Memory({initial:x/65536}))&&(p=d.buffer),x=p.byteLength,A(p),y[7828]=5274384;var g=[],T=[],C=[],I=[];function R(){var e=t.preRun.shift();g.unshift(e)}var S=Math.abs,H=Math.ceil,k=Math.floor,L=Math.min,F=0,B=null,$=null;function D(e){throw t.onAbort&&t.onAbort(e),_(e),u(e),E=!0,new WebAssembly.RuntimeError("abort("+e+"). Build with -s ASSERTIONS=1 for more info.")}function K(){var e=U;return String.prototype.startsWith?e.startsWith("data:application/octet-stream;base64,"):0===e.indexOf("data:application/octet-stream;base64,")}t.preloadedImages={},t.preloadedAudios={};var M,Y,U="libphe.wasm";if(!K()){var O=U;U=t.locateFile?t.locateFile(O,o):o+O}function G(e,t){for(var n=0,r=e.length-1;0<=r;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e}function z(e){var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=G(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function V(e){var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],e||t?(t&&(t=t.substr(0,t.length-1)),e+t):"."}function W(e){if("/"===e)return"/";var t=e.lastIndexOf("/");return-1===t?e:e.substr(t+1)}function Z(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){if("string"!=typeof(t=0<=n?arguments[n]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t="/"===t.charAt(0)}return(t?"/":"")+(e=G(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."}t.asm=function(){function e(e){t.asm=e.exports,F--,t.monitorRunDependencies&&t.monitorRunDependencies(F),0==F&&(null!==B&&(clearInterval(B),B=null),$&&(e=$,$=null,e()))}function n(t){e(t.instance)}function r(e){return new Promise((function(e){e:{try{if(l){var t=new Uint8Array(l);break e}if(a){t=a(U);break e}throw"both async and sync fetching of the wasm failed"}catch(e){D(e)}t=void 0}e(t)})).then((function(e){return WebAssembly.instantiate(e,o)})).then(e,(function(e){u("failed to asynchronously prepare wasm: "+e),D(e)}))}var o={env:Ve,wasi_unstable:Ve,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:f};if(F++,t.monitorRunDependencies&&t.monitorRunDependencies(F),t.instantiateWasm)try{return t.instantiateWasm(o,e)}catch(e){return u("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(l||"function"!=typeof WebAssembly.instantiateStreaming||K()||"function"!=typeof fetch)return r(n);fetch(U,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,o).then(n,(function(e){u("wasm streaming compile failed: "+e),u("falling back to ArrayBuffer instantiation"),r(n)}))}))}(),{}};var j=[];function q(e,t){j[e]={input:[],output:[],Fb:t},Pe(e,X)}var X={open:function(e){var t=j[e.node.rdev];if(!t)throw new ce(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.Fb.flush(e.tty)},flush:function(e){e.tty.Fb.flush(e.tty)},read:function(e,t,n,r){if(!e.tty||!e.tty.Fb.Rb)throw new ce(60);for(var o=0,s=0;s<r;s++){try{var a=e.tty.Fb.Rb(e.tty)}catch(e){throw new ce(29)}if(void 0===a&&0===o)throw new ce(6);if(null==a)break;o++,t[n+s]=a}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,n,r){if(!e.tty||!e.tty.Fb.Kb)throw new ce(60);try{for(var o=0;o<r;o++)e.tty.Fb.Kb(e.tty,t[n+o])}catch(e){throw new ce(29)}return r&&(e.node.timestamp=Date.now()),o}},J={Rb:function(e){if(!e.input.length){var t=null,n=Buffer.bc?Buffer.bc(256):new Buffer(256),r=0;try{r=i.readSync(process.stdin.fd,n,0,256,null)}catch(e){if(-1==e.toString().indexOf("EOF"))throw e;r=0}if(!(t=0<r?n.slice(0,r).toString("utf-8"):null))return null;for(r=n=0;r<t.length;++r){var o=t.charCodeAt(r);55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++r)),127>=o?++n:n=2047>=o?n+2:65535>=o?n+3:n+4}var s=(n=Array(n+1)).length;if(r=0,0<s){o=r,s=r+s-1;for(var a=0;a<t.length;++a){var c=t.charCodeAt(a);if(55296<=c&&57343>=c)c=65536+((1023&c)<<10)|1023&t.charCodeAt(++a);if(127>=c){if(r>=s)break;n[r++]=c}else{if(2047>=c){if(r+1>=s)break;n[r++]=192|c>>6}else{if(65535>=c){if(r+2>=s)break;n[r++]=224|c>>12}else{if(r+3>=s)break;n[r++]=240|c>>18,n[r++]=128|c>>12&63}n[r++]=128|c>>6&63}n[r++]=128|63&c}}n[r]=0,t=r-o}else t=0;n.length=t,e.input=n}return e.input.shift()},Kb:function(e,t){null===t||10===t?(_(w(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&0<e.output.length&&(_(w(e.output,0)),e.output=[])}},Q={Kb:function(e,t){null===t||10===t?(u(w(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&0<e.output.length&&(u(w(e.output,0)),e.output=[])}},ee={zb:null,Bb:function(){return ee.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(24576==(61440&n)||4096==(61440&n))throw new ce(63);return ee.zb||(ee.zb={dir:{node:{Cb:ee.wb.Cb,Ab:ee.wb.Ab,lookup:ee.wb.lookup,Gb:ee.wb.Gb,rename:ee.wb.rename,unlink:ee.wb.unlink,rmdir:ee.wb.rmdir,readdir:ee.wb.readdir,symlink:ee.wb.symlink},stream:{Db:ee.xb.Db}},file:{node:{Cb:ee.wb.Cb,Ab:ee.wb.Ab},stream:{Db:ee.xb.Db,read:ee.xb.read,write:ee.xb.write,Mb:ee.xb.Mb,Sb:ee.xb.Sb,Ub:ee.xb.Ub}},link:{node:{Cb:ee.wb.Cb,Ab:ee.wb.Ab,readlink:ee.wb.readlink},stream:{}},Nb:{node:{Cb:ee.wb.Cb,Ab:ee.wb.Ab},stream:we}}),16384==(61440&(n=pe(e,t,n,r)).mode)?(n.wb=ee.zb.dir.node,n.xb=ee.zb.dir.stream,n.vb={}):32768==(61440&n.mode)?(n.wb=ee.zb.file.node,n.xb=ee.zb.file.stream,n.yb=0,n.vb=null):40960==(61440&n.mode)?(n.wb=ee.zb.link.node,n.xb=ee.zb.link.stream):8192==(61440&n.mode)&&(n.wb=ee.zb.Nb.node,n.xb=ee.zb.Nb.stream),n.timestamp=Date.now(),e&&(e.vb[t]=n),n},ec:function(e){if(e.vb&&e.vb.subarray){for(var t=[],n=0;n<e.yb;++n)t.push(e.vb[n]);return t}return e.vb},fc:function(e){return e.vb?e.vb.subarray?e.vb.subarray(0,e.yb):new Uint8Array(e.vb):new Uint8Array},Ob:function(e,t){var n=e.vb?e.vb.length:0;n>=t||(t=Math.max(t,n*(1048576>n?2:1.125)|0),0!=n&&(t=Math.max(t,256)),n=e.vb,e.vb=new Uint8Array(t),0<e.yb&&e.vb.set(n.subarray(0,e.yb),0))},Zb:function(e,t){if(e.yb!=t)if(0==t)e.vb=null,e.yb=0;else{if(!e.vb||e.vb.subarray){var n=e.vb;e.vb=new Uint8Array(new ArrayBuffer(t)),n&&e.vb.set(n.subarray(0,Math.min(t,e.yb)))}else if(e.vb||(e.vb=[]),e.vb.length>t)e.vb.length=t;else for(;e.vb.length<t;)e.vb.push(0);e.yb=t}},wb:{Cb:function(e){var t={};return t.dev=8192==(61440&e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,16384==(61440&e.mode)?t.size=4096:32768==(61440&e.mode)?t.size=e.yb:40960==(61440&e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.Vb=4096,t.blocks=Math.ceil(t.size/t.Vb),t},Ab:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&ee.Zb(e,t.size)},lookup:function(){throw _e[44]},Gb:function(e,t,n,r){return ee.createNode(e,t,n,r)},rename:function(e,t,n){if(16384==(61440&e.mode)){try{var r=de(t,n)}catch(e){}if(r)for(var o in r.vb)throw new ce(55)}delete e.parent.vb[e.name],e.name=n,t.vb[n]=e,e.parent=t},unlink:function(e,t){delete e.vb[t]},rmdir:function(e,t){var n,r=de(e,t);for(n in r.vb)throw new ce(55);delete e.vb[t]},readdir:function(e){var t,n=[".",".."];for(t in e.vb)e.vb.hasOwnProperty(t)&&n.push(t);return n},symlink:function(e,t,n){return(e=ee.createNode(e,t,41471,0)).link=n,e},readlink:function(e){if(40960!=(61440&e.mode))throw new ce(28);return e.link}},xb:{read:function(e,t,n,r,o){var s=e.node.vb;if(o>=e.node.yb)return 0;if(8<(e=Math.min(e.node.yb-o,r))&&s.subarray)t.set(s.subarray(o,o+e),n);else for(r=0;r<e;r++)t[n+r]=s[o+r];return e},write:function(e,t,n,r,o,s){if(t.buffer===h.buffer&&(s=!1),!r)return 0;if((e=e.node).timestamp=Date.now(),t.subarray&&(!e.vb||e.vb.subarray)){if(s)return e.vb=t.subarray(n,n+r),e.yb=r;if(0===e.yb&&0===o)return e.vb=new Uint8Array(t.subarray(n,n+r)),e.yb=r;if(o+r<=e.yb)return e.vb.set(t.subarray(n,n+r),o),r}if(ee.Ob(e,o+r),e.vb.subarray&&t.subarray)e.vb.set(t.subarray(n,n+r),o);else for(s=0;s<r;s++)e.vb[o+s]=t[n+s];return e.yb=Math.max(e.yb,o+r),r},Db:function(e,t,n){if(1===n?t+=e.position:2===n&&32768==(61440&e.node.mode)&&(t+=e.node.yb),0>t)throw new ce(28);return t},Mb:function(e,t,n){ee.Ob(e.node,t+n),e.node.yb=Math.max(e.node.yb,t+n)},Sb:function(e,t,n,r,o,s,a){if(32768!=(61440&e.node.mode))throw new ce(43);if(n=e.node.vb,2&a||n.buffer!==t.buffer){if((0<o||o+r<e.node.yb)&&(n=n.subarray?n.subarray(o,o+r):Array.prototype.slice.call(n,o,o+r)),e=!0,o=t.buffer==h.buffer,!(r=je(r)))throw new ce(48);(o?h:t).set(n,r)}else e=!1,r=n.byteOffset;return{hc:r,cc:e}},Ub:function(e,t,n,r,o){if(32768!=(61440&e.node.mode))throw new ce(43);return 2&o?0:(ee.xb.write(e,t,0,r,n,!1),0)}}},te=null,ne={},re=[],oe=1,se=null,ae=!0,ie={},ce=null,_e={};function ue(e,t){if(t=t||{},!(e=Z("/",e)))return{path:"",node:null};var n,r={Qb:!0,Lb:0};for(n in r)void 0===t[n]&&(t[n]=r[n]);if(8<t.Lb)throw new ce(32);e=G(e.split("/").filter((function(e){return!!e})),!1);var o=te;for(r="/",n=0;n<e.length;n++){var s=n===e.length-1;if(s&&t.parent)break;if(o=de(o,e[n]),r=z(r+"/"+e[n]),o.Hb&&(!s||s&&t.Qb)&&(o=o.Hb.root),!s||t.Pb)for(s=0;40960==(61440&o.mode);)if(o=Ce(r),o=ue(r=Z(V(r),o),{Lb:t.Lb}).node,40<s++)throw new ce(32)}return{path:r,node:o}}function le(e){for(var t;;){if(e===e.parent)return e=e.Bb.Tb,t?"/"!==e[e.length-1]?e+"/"+t:e+t:e;t=t?e.name+"/"+t:e.name,e=e.parent}}function fe(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%se.length}function de(e,t){var n;if(n=(n=ye(e,"x"))?n:e.wb.lookup?0:2)throw new ce(n,e);for(n=se[fe(e.id,t)];n;n=n.Yb){var r=n.name;if(n.parent.id===e.id&&r===t)return n}return e.wb.lookup(e,t)}function pe(e,t,n,r){return Le||((Le=function(e,t,n,r){e||(e=this),this.parent=e,this.Bb=e.Bb,this.Hb=null,this.id=oe++,this.name=t,this.mode=n,this.wb={},this.xb={},this.rdev=r}).prototype={},Object.defineProperties(Le.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}}})),function(e){var t=fe(e.parent.id,e.name);e.Yb=se[t],se[t]=e}(e=new Le(e,t,n,r)),e}var he={r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218};function ve(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t}function ye(e,t){return ae?0:(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:2}function me(e,t){try{return de(e,t),20}catch(e){}return ye(e,"wx")}function Ee(e){Fe||((Fe=function(){}).prototype={},Object.defineProperties(Fe.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}}}));var t,n=new Fe;for(t in e)n[t]=e[t];return e=n,n=function(){for(var e=0;e<=4096;e++)if(!re[e])return e;throw new ce(33)}(),e.fd=n,re[n]=e}var be,we={open:function(e){e.xb=ne[e.node.rdev].xb,e.xb.open&&e.xb.open(e)},Db:function(){throw new ce(70)}};function Pe(e,t){ne[e]={xb:t}}function Ae(e,t){var n="/"===t,r=!t;if(n&&te)throw new ce(10);if(!n&&!r){var o=ue(t,{Qb:!1});if(t=o.path,(o=o.node).Hb)throw new ce(10);if(16384!=(61440&o.mode))throw new ce(54)}t={type:e,gc:{},Tb:t,Xb:[]},(e=e.Bb(t)).Bb=t,t.root=e,n?te=e:o&&(o.Hb=t,o.Bb&&o.Bb.Xb.push(t))}function xe(e,t,n){var r=ue(e,{parent:!0}).node;if(!(e=W(e))||"."===e||".."===e)throw new ce(28);var o=me(r,e);if(o)throw new ce(o);if(!r.wb.Gb)throw new ce(63);return r.wb.Gb(r,e,t,n)}function Ne(e){xe(e,16895,0)}function ge(e,t,n){void 0===n&&(n=t,t=438),xe(e,8192|t,n)}function Te(e,t){if(!Z(e))throw new ce(44);var n=ue(t,{parent:!0}).node;if(!n)throw new ce(44);var r=me(n,t=W(t));if(r)throw new ce(r);if(!n.wb.symlink)throw new ce(63);n.wb.symlink(n,t,e)}function Ce(e){if(!(e=ue(e).node))throw new ce(44);if(!e.wb.readlink)throw new ce(28);return Z(le(e.parent),e.wb.readlink(e))}function Ie(e,n,r){if(""===e)throw new ce(44);if("string"==typeof n){var o=he[n];if(void 0===o)throw Error("Unknown file open mode: "+n);n=o}if(r=64&n?4095&(void 0===r?438:r)|32768:0,"object"==typeof e)var s=e;else{e=z(e);try{s=ue(e,{Pb:!(131072&n)}).node}catch(e){}}if(o=!1,64&n)if(s){if(128&n)throw new ce(20)}else s=xe(e,r,0),o=!0;if(!s)throw new ce(44);if(8192==(61440&s.mode)&&(n&=-513),65536&n&&16384!=(61440&s.mode))throw new ce(54);if(!o&&(r=s?40960==(61440&s.mode)?32:16384==(61440&s.mode)&&("r"!==ve(n)||512&n)?31:ye(s,ve(n)):44))throw new ce(r);if(512&n){var a;if(!(a="string"==typeof(r=s)?ue(r,{Pb:!0}).node:r).wb.Ab)throw new ce(63);if(16384==(61440&a.mode))throw new ce(31);if(32768!=(61440&a.mode))throw new ce(28);if(r=ye(a,"w"))throw new ce(r);a.wb.Ab(a,{size:0,timestamp:Date.now()})}n&=-641,(s=Ee({node:s,path:le(s),flags:n,seekable:!0,position:0,xb:s.xb,ac:[],error:!1})).xb.open&&s.xb.open(s),!t.logReadFiles||1&n||(Be||(Be={}),e in Be||(Be[e]=1,console.log("FS.trackingDelegate error on read file: "+e)));try{ie.onOpenFile&&(a=0,1!=(2097155&n)&&(a|=1),0!=(2097155&n)&&(a|=2),ie.onOpenFile(e,a))}catch(t){console.log("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+t.message)}return s}function Re(e,t,n){if(null===e.fd)throw new ce(8);if(!e.seekable||!e.xb.Db)throw new ce(70);if(0!=n&&1!=n&&2!=n)throw new ce(28);e.position=e.xb.Db(e,t,n),e.ac=[]}function Se(){ce||((ce=function(e,t){this.node=t,this.$b=function(e){this.Eb=e},this.$b(e),this.message="FS error"}).prototype=Error(),ce.prototype.constructor=ce,[44].forEach((function(e){_e[e]=new ce(e),_e[e].stack="<generic error, no stack>"})))}function He(e,t,n){e=z("/dev/"+e);var r=function(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n}(!!t,!!n);ke||(ke=64);var o=ke++<<8|0;Pe(o,{open:function(e){e.seekable=!1},close:function(){n&&n.buffer&&n.buffer.length&&n(10)},read:function(e,n,r,o){for(var s=0,a=0;a<o;a++){try{var i=t()}catch(e){throw new ce(29)}if(void 0===i&&0===s)throw new ce(6);if(null==i)break;s++,n[r+a]=i}return s&&(e.node.timestamp=Date.now()),s},write:function(e,t,r,o){for(var s=0;s<o;s++)try{n(t[r+s])}catch(e){throw new ce(29)}return o&&(e.node.timestamp=Date.now()),s}}),ge(e,r,o)}var ke,Le,Fe,Be,$e={},De=0;function Ke(){return y[(De+=4)-4>>2]}function Me(e){if(void 0===e&&(e=Ke()),!(e=re[e]))throw new ce(8);return e}function Ye(e){try{var t=Me(e);if(null===t.fd)throw new ce(8);t.Jb&&(t.Jb=null);try{t.xb.close&&t.xb.close(t)}catch(e){throw e}finally{re[t.fd]=null}return t.fd=null,0}catch(e){return void 0!==$e&&e instanceof ce||D(e),e.Eb}}function Ue(e,t,n,r){try{e:{for(var o=Me(e),s=e=0;s<n;s++){var a=y[t+(8*s+4)>>2],i=o,c=y[t+8*s>>2],_=a,u=void 0,l=h;if(0>_||0>u)throw new ce(28);if(null===i.fd)throw new ce(8);if(1==(2097155&i.flags))throw new ce(8);if(16384==(61440&i.node.mode))throw new ce(31);if(!i.xb.read)throw new ce(28);var f=void 0!==u;if(f){if(!i.seekable)throw new ce(70)}else u=i.position;var d=i.xb.read(i,l,c,_,u);f||(i.position+=d);var p=d;if(0>p){var v=-1;break e}if(e+=p,p<a)break}v=e}return y[r>>2]=v,0}catch(e){return void 0!==$e&&e instanceof ce||D(e),e.Eb}}function Oe(e,t,n,r,o){try{var s=Me(e);return-9007199254740992>=(e=4294967296*n+(t>>>0))||9007199254740992<=e?-61:(Re(s,e,r),Y=[s.position>>>0,(M=s.position,1<=+S(M)?0<M?(0|L(+k(M/4294967296),4294967295))>>>0:~~+H((M-+(~~M>>>0))/4294967296)>>>0:0)],y[o>>2]=Y[0],y[o+4>>2]=Y[1],s.Jb&&0===e&&0===r&&(s.Jb=null),0)}catch(e){return void 0!==$e&&e instanceof ce||D(e),e.Eb}}function Ge(e,t,n,r){try{e:{for(var o=Me(e),s=e=0;s<n;s++){var a=o,i=y[t+8*s>>2],c=y[t+(8*s+4)>>2],_=void 0,u=h;if(0>c||0>_)throw new ce(28);if(null===a.fd)throw new ce(8);if(0==(2097155&a.flags))throw new ce(8);if(16384==(61440&a.node.mode))throw new ce(31);if(!a.xb.write)throw new ce(28);1024&a.flags&&Re(a,0,2);var l=void 0!==_;if(l){if(!a.seekable)throw new ce(70)}else _=a.position;var f=a.xb.write(a,u,i,c,_,void 0);l||(a.position+=f);try{a.path&&ie.onWriteToFile&&ie.onWriteToFile(a.path)}catch(e){console.log("FS.trackingDelegate['onWriteToFile']('"+a.path+"') threw an exception: "+e.message)}var d=f;if(0>d){var p=-1;break e}e+=d}p=e}return y[r>>2]=p,0}catch(e){return void 0!==$e&&e instanceof ce||D(e),e.Eb}}function ze(){return h.length}Se(),se=Array(4096),Ae(ee,"/"),Ne("/tmp"),Ne("/home"),Ne("/home/web_user"),function(){if(Ne("/dev"),Pe(259,{read:function(){return 0},write:function(e,t,n,r){return r}}),ge("/dev/null",259),q(1280,J),q(1536,Q),ge("/dev/tty",1280),ge("/dev/tty1",1536),"object"==typeof crypto&&"function"==typeof crypto.getRandomValues)var e=new Uint8Array(1),t=function(){return crypto.getRandomValues(e),e[0]};else try{var n=require("crypto");t=function(){return n.randomBytes(1)[0]}}catch(e){}t||(t=function(){D("random_device")}),He("random",t),He("urandom",t),Ne("/dev/shm"),Ne("/dev/shm/tmp")}(),Ne("/proc"),Ne("/proc/self"),Ne("/proc/self/fd"),Ae({Bb:function(){var e=pe("/proc/self","fd",16895,73);return e.wb={lookup:function(e,t){var n=re[+t];if(!n)throw new ce(8);return(e={parent:null,Bb:{Tb:"fake"},wb:{readlink:function(){return n.path}}}).parent=e}},e}},"/proc/self/fd");var Ve={c:function(){},k:function(e,t){De=t;try{var n=Ke();return Ie(n?w(v,n,void 0):"",Ke(),Ke()).fd}catch(e){return void 0!==$e&&e instanceof ce||D(e),-e.Eb}},j:function(e,t){De=t;try{var n=Me(),r=Ke();switch(r){case 21509:case 21505:return n.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return n.tty?0:-59;case 21519:if(!n.tty)return-59;var o=Ke();return y[o>>2]=0;case 21520:return n.tty?-28:-59;case 21531:if(e=o=Ke(),!n.xb.Wb)throw new ce(59);return n.xb.Wb(n,r,e);case 21523:case 21524:return n.tty?0:-59;default:D("bad ioctl syscall "+r)}}catch(e){return void 0!==$e&&e instanceof ce||D(e),-e.Eb}},b:function(){},d:function(){return Ye.apply(null,arguments)},i:function(){return Ue.apply(null,arguments)},l:function(){return Oe.apply(null,arguments)},h:function(){return Ge.apply(null,arguments)},__memory_base:1024,__table_base:0,g:function(){D()},f:ze,n:function(e,t,n){v.set(v.subarray(t,t+n),e)},m:function(e){if(2147418112<e)return!1;for(var t=Math.max(ze(),16777216);t<e;)t=536870912>=t?P(2*t):Math.min(P((3*t+2147483648)/4),2147418112);e:{try{d.grow(t-p.byteLength+65535>>16),A(d.buffer);var n=1;break e}catch(e){}n=void 0}return!!n},e:function(e){var t=Date.now();return y[e>>2]=t/1e3|0,y[e+4>>2]=t%1e3*1e3|0,0},a:D,memory:d,table:m},We=t.asm({},Ve,p);t.asm=We,t.___errno_location=function(){return t.asm.o.apply(null,arguments)},t._free=function(){return t.asm.p.apply(null,arguments)};var Ze,je=t._malloc=function(){return t.asm.q.apply(null,arguments)};function qe(){function e(){if(!Ze&&(Ze=!0,!E)){if(t.noFSInit||be||(be=!0,Se(),t.stdin=t.stdin,t.stdout=t.stdout,t.stderr=t.stderr,t.stdin?He("stdin",t.stdin):Te("/dev/tty","/dev/stdin"),t.stdout?He("stdout",null,t.stdout):Te("/dev/tty","/dev/stdout"),t.stderr?He("stderr",null,t.stderr):Te("/dev/tty1","/dev/stderr"),Ie("/dev/stdin","r"),Ie("/dev/stdout","w"),Ie("/dev/stderr","w")),N(T),ae=!1,N(C),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();I.unshift(e)}N(I)}}if(!(0<F)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)R();N(g),0<F||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),e()}),1)):e())}}if(t._vsc_buffer_bytes=function(){return t.asm.r.apply(null,arguments)},t._vsc_buffer_data=function(){return t.asm.s.apply(null,arguments)},t._vsc_buffer_delete=function(){return t.asm.t.apply(null,arguments)},t._vsc_buffer_len=function(){return t.asm.u.apply(null,arguments)},t._vsc_buffer_make_secure=function(){return t.asm.v.apply(null,arguments)},t._vsc_buffer_new=function(){return t.asm.w.apply(null,arguments)},t._vsc_buffer_new_with_capacity=function(){return t.asm.x.apply(null,arguments)},t._vsc_data=function(){return t.asm.y.apply(null,arguments)},t._vsc_data_bytes=function(){return t.asm.z.apply(null,arguments)},t._vsc_data_ctx_size=function(){return t.asm.A.apply(null,arguments)},t._vsc_data_len=function(){return t.asm.B.apply(null,arguments)},t._vsce_error_ctx_size=function(){return t.asm.C.apply(null,arguments)},t._vsce_error_reset=function(){return t.asm.D.apply(null,arguments)},t._vsce_error_status=function(){return t.asm.E.apply(null,arguments)},t._vsce_phe_cipher_auth_decrypt=function(){return t.asm.F.apply(null,arguments)},t._vsce_phe_cipher_auth_encrypt=function(){return t.asm.G.apply(null,arguments)},t._vsce_phe_cipher_decrypt=function(){return t.asm.H.apply(null,arguments)},t._vsce_phe_cipher_decrypt_len=function(){return t.asm.I.apply(null,arguments)},t._vsce_phe_cipher_delete=function(){return t.asm.J.apply(null,arguments)},t._vsce_phe_cipher_encrypt=function(){return t.asm.K.apply(null,arguments)},t._vsce_phe_cipher_encrypt_len=function(){return t.asm.L.apply(null,arguments)},t._vsce_phe_cipher_new=function(){return t.asm.M.apply(null,arguments)},t._vsce_phe_cipher_release_random=function(){return t.asm.N.apply(null,arguments)},t._vsce_phe_cipher_setup_defaults=function(){return t.asm.O.apply(null,arguments)},t._vsce_phe_cipher_shallow_copy=function(){return t.asm.P.apply(null,arguments)},t._vsce_phe_cipher_use_random=function(){return t.asm.Q.apply(null,arguments)},t._vsce_phe_client_check_response_and_decrypt=function(){return t.asm.R.apply(null,arguments)},t._vsce_phe_client_create_verify_password_request=function(){return t.asm.S.apply(null,arguments)},t._vsce_phe_client_delete=function(){return t.asm.T.apply(null,arguments)},t._vsce_phe_client_enroll_account=function(){return t.asm.U.apply(null,arguments)},t._vsce_phe_client_enrollment_record_len=function(){return t.asm.V.apply(null,arguments)},t._vsce_phe_client_generate_client_private_key=function(){return t.asm.W.apply(null,arguments)},t._vsce_phe_client_new=function(){return t.asm.X.apply(null,arguments)},t._vsce_phe_client_release_operation_random=function(){return t.asm.Y.apply(null,arguments)},t._vsce_phe_client_release_random=function(){return t.asm.Z.apply(null,arguments)},t._vsce_phe_client_rotate_keys=function(){return t.asm._.apply(null,arguments)},t._vsce_phe_client_set_keys=function(){return t.asm.$.apply(null,arguments)},t._vsce_phe_client_setup_defaults=function(){return t.asm.aa.apply(null,arguments)},t._vsce_phe_client_shallow_copy=function(){return t.asm.ba.apply(null,arguments)},t._vsce_phe_client_update_enrollment_record=function(){return t.asm.ca.apply(null,arguments)},t._vsce_phe_client_use_operation_random=function(){return t.asm.da.apply(null,arguments)},t._vsce_phe_client_use_random=function(){return t.asm.ea.apply(null,arguments)},t._vsce_phe_client_verify_password_request_len=function(){return t.asm.fa.apply(null,arguments)},t._vsce_phe_server_delete=function(){return t.asm.ga.apply(null,arguments)},t._vsce_phe_server_enrollment_response_len=function(){return t.asm.ha.apply(null,arguments)},t._vsce_phe_server_generate_server_key_pair=function(){return t.asm.ia.apply(null,arguments)},t._vsce_phe_server_get_enrollment=function(){return t.asm.ja.apply(null,arguments)},t._vsce_phe_server_new=function(){return t.asm.ka.apply(null,arguments)},t._vsce_phe_server_release_operation_random=function(){return t.asm.la.apply(null,arguments)},t._vsce_phe_server_release_random=function(){return t.asm.ma.apply(null,arguments)},t._vsce_phe_server_rotate_keys=function(){return t.asm.na.apply(null,arguments)},t._vsce_phe_server_setup_defaults=function(){return t.asm.oa.apply(null,arguments)},t._vsce_phe_server_shallow_copy=function(){return t.asm.pa.apply(null,arguments)},t._vsce_phe_server_update_token_len=function(){return t.asm.qa.apply(null,arguments)},t._vsce_phe_server_use_operation_random=function(){return t.asm.ra.apply(null,arguments)},t._vsce_phe_server_use_random=function(){return t.asm.sa.apply(null,arguments)},t._vsce_phe_server_verify_password=function(){return t.asm.ta.apply(null,arguments)},t._vsce_phe_server_verify_password_response_len=function(){return t.asm.ua.apply(null,arguments)},t._vscf_ctr_drbg_delete=function(){return t.asm.va.apply(null,arguments)},t._vscf_ctr_drbg_enable_prediction_resistance=function(){return t.asm.wa.apply(null,arguments)},t._vscf_ctr_drbg_new=function(){return t.asm.xa.apply(null,arguments)},t._vscf_ctr_drbg_random=function(){return t.asm.ya.apply(null,arguments)},t._vscf_ctr_drbg_release_entropy_source=function(){return t.asm.za.apply(null,arguments)},t._vscf_ctr_drbg_reseed=function(){return t.asm.Aa.apply(null,arguments)},t._vscf_ctr_drbg_set_entropy_len=function(){return t.asm.Ba.apply(null,arguments)},t._vscf_ctr_drbg_set_reseed_interval=function(){return t.asm.Ca.apply(null,arguments)},t._vscf_ctr_drbg_setup_defaults=function(){return t.asm.Da.apply(null,arguments)},t._vscf_ctr_drbg_shallow_copy=function(){return t.asm.Ea.apply(null,arguments)},t._vscf_ctr_drbg_use_entropy_source=function(){return t.asm.Fa.apply(null,arguments)},t._vscf_error_ctx_size=function(){return t.asm.Ga.apply(null,arguments)},t._vscf_error_reset=function(){return t.asm.Ha.apply(null,arguments)},t._vscf_error_status=function(){return t.asm.Ia.apply(null,arguments)},t._vscf_hkdf_alg_id=function(){return t.asm.Ja.apply(null,arguments)},t._vscf_hkdf_delete=function(){return t.asm.Ka.apply(null,arguments)},t._vscf_hkdf_derive=function(){return t.asm.La.apply(null,arguments)},t._vscf_hkdf_new=function(){return t.asm.Ma.apply(null,arguments)},t._vscf_hkdf_produce_alg_info=function(){return t.asm.Na.apply(null,arguments)},t._vscf_hkdf_release_hash=function(){return t.asm.Oa.apply(null,arguments)},t._vscf_hkdf_reset=function(){return t.asm.Pa.apply(null,arguments)},t._vscf_hkdf_restore_alg_info=function(){return t.asm.Qa.apply(null,arguments)},t._vscf_hkdf_set_info=function(){return t.asm.Ra.apply(null,arguments)},t._vscf_hkdf_shallow_copy=function(){return t.asm.Sa.apply(null,arguments)},t._vscf_hkdf_use_hash=function(){return t.asm.Ta.apply(null,arguments)},t._vscf_hmac_alg_id=function(){return t.asm.Ua.apply(null,arguments)},t._vscf_hmac_delete=function(){return t.asm.Va.apply(null,arguments)},t._vscf_hmac_digest_len=function(){return t.asm.Wa.apply(null,arguments)},t._vscf_hmac_finish=function(){return t.asm.Xa.apply(null,arguments)},t._vscf_hmac_mac=function(){return t.asm.Ya.apply(null,arguments)},t._vscf_hmac_new=function(){return t.asm.Za.apply(null,arguments)},t._vscf_hmac_produce_alg_info=function(){return t.asm._a.apply(null,arguments)},t._vscf_hmac_release_hash=function(){return t.asm.$a.apply(null,arguments)},t._vscf_hmac_reset=function(){return t.asm.ab.apply(null,arguments)},t._vscf_hmac_restore_alg_info=function(){return t.asm.bb.apply(null,arguments)},t._vscf_hmac_shallow_copy=function(){return t.asm.cb.apply(null,arguments)},t._vscf_hmac_start=function(){return t.asm.db.apply(null,arguments)},t._vscf_hmac_update=function(){return t.asm.eb.apply(null,arguments)},t._vscf_hmac_use_hash=function(){return t.asm.fb.apply(null,arguments)},t._vscf_impl_api=function(){return t.asm.gb.apply(null,arguments)},t._vscf_impl_shallow_copy=function(){return t.asm.hb.apply(null,arguments)},t._vscf_impl_tag=function(){return t.asm.ib.apply(null,arguments)},t._vscf_sha512_alg_id=function(){return t.asm.jb.apply(null,arguments)},t._vscf_sha512_delete=function(){return t.asm.kb.apply(null,arguments)},t._vscf_sha512_finish=function(){return t.asm.lb.apply(null,arguments)},t._vscf_sha512_hash=function(){return t.asm.mb.apply(null,arguments)},t._vscf_sha512_new=function(){return t.asm.nb.apply(null,arguments)},t._vscf_sha512_produce_alg_info=function(){return t.asm.ob.apply(null,arguments)},t._vscf_sha512_restore_alg_info=function(){return t.asm.pb.apply(null,arguments)},t._vscf_sha512_shallow_copy=function(){return t.asm.qb.apply(null,arguments)},t._vscf_sha512_start=function(){return t.asm.rb.apply(null,arguments)},t._vscf_sha512_update=function(){return t.asm.sb.apply(null,arguments)},t.stackAlloc=function(){return t.asm.ub.apply(null,arguments)},t.dynCall_vi=function(){return t.asm.tb.apply(null,arguments)},t.asm=We,t.then=function(e){if(Ze)e(t);else{var n=t.onRuntimeInitialized;t.onRuntimeInitialized=function(){n&&n(),e(t)}}return t},$=function e(){Ze||qe(),Ze||($=e)},t.run=qe,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return qe(),e}}();e.exports=n}));const initFoundationError=(e,t)=>{class n extends Error{constructor(e){super(e),this.name="FoundationError",this.message=e}static handleStatusCode(e){if(0!=e){if(-1==e)throw new n("This error should not be returned if assertions is enabled.");if(-2==e)throw new n("Can be used to define that not all context prerequisites are satisfied. Note, this error should not be returned if assertions is enabled.");if(-3==e)throw new n("Define that error code from one of third-party module was not handled. Note, this error should not be returned if assertions is enabled.");if(-101==e)throw new n("Buffer capacity is not enough to hold result.");if(-200==e)throw new n("Unsupported algorithm.");if(-201==e)throw new n("Authentication failed during decryption.");if(-202==e)throw new n("Attempt to read data out of buffer bounds.");if(-203==e)throw new n("ASN.1 encoded data is corrupted.");if(-204==e)throw new n("Attempt to read ASN.1 type that is bigger then requested C type.");if(-205==e)throw new n("ASN.1 representation of PKCS#1 public key is corrupted.");if(-206==e)throw new n("ASN.1 representation of PKCS#1 private key is corrupted.");if(-207==e)throw new n("ASN.1 representation of PKCS#8 public key is corrupted.");if(-208==e)throw new n("ASN.1 representation of PKCS#8 private key is corrupted.");if(-209==e)throw new n("Encrypted data is corrupted.");if(-210==e)throw new n("Underlying random operation returns error.");if(-211==e)throw new n("Generation of the private or secret key failed.");if(-212==e)throw new n("One of the entropy sources failed.");if(-213==e)throw new n("Requested data to be generated is too big.");if(-214==e)throw new n("Base64 encoded string contains invalid characters.");if(-215==e)throw new n("PEM data is corrupted.");if(-216==e)throw new n("Exchange key return zero.");if(-217==e)throw new n("Ed25519 public key is corrupted.");if(-218==e)throw new n("Ed25519 private key is corrupted.");if(-219==e)throw new n("CURVE25519 public key is corrupted.");if(-220==e)throw new n("CURVE25519 private key is corrupted.");if(-221==e)throw new n("Elliptic curve public key format is corrupted see RFC 5480.");if(-222==e)throw new n("Elliptic curve public key format is corrupted see RFC 5915.");if(-223==e)throw new n("ASN.1 representation of a public key is corrupted.");if(-224==e)throw new n("ASN.1 representation of a private key is corrupted.");if(-225==e)throw new n("Key algorithm does not accept given type of public key.");if(-226==e)throw new n("Key algorithm does not accept given type of private key.");if(-301==e)throw new n("Decryption failed, because message info was not given explicitly, and was not part of an encrypted message.");if(-302==e)throw new n("Message Info is corrupted.");if(-303==e)throw new n("Recipient defined with id is not found within message info during data decryption.");if(-304==e)throw new n("Content encryption key can not be decrypted with a given private key.");if(-305==e)throw new n("Content encryption key can not be decrypted with a given password.");if(-306==e)throw new n("Custom parameter with a given key is not found within message info.");if(-307==e)throw new n("A custom parameter with a given key is found, but the requested value type does not correspond to the actual type.");if(-308==e)throw new n("Signature format is corrupted.");if(-309==e)throw new n("Message Info footer is corrupted.");if(-401==e)throw new n("Brainkey password length is out of range.");if(-402==e)throw new n("Brainkey number length should be 32 byte.");if(-403==e)throw new n("Brainkey point length should be 65 bytes.");if(-404==e)throw new n("Brainkey name is out of range.");if(-405==e)throw new n("Brainkey internal error.");if(-406==e)throw new n("Brainkey point is invalid.");if(-407==e)throw new n("Brainkey number buffer length capacity should be >= 32 byte.");if(-408==e)throw new n("Brainkey point buffer length capacity should be >= 32 byte.");if(-409==e)throw new n("Brainkey seed buffer length capacity should be >= 32 byte.");if(-410==e)throw new n("Brainkey identity secret is invalid.");if(-501==e)throw new n("Invalid padding.");if(-601==e)throw new n("Protobuf error.");if(-701==e)throw new n("Session id doesnt match.");if(-702==e)throw new n("Epoch not found.");if(-703==e)throw new n("Wrong key type.");if(-704==e)throw new n("Invalid signature.");if(-705==e)throw new n("Ed25519 error.");if(-706==e)throw new n("Duplicate epoch.");if(-707==e)throw new n("Plain text too long.");throw new n("Unexpected status code:"+e)}}}return n};var FoundationError=initFoundationError;const initFoundationInterface=(e,t)=>{return class{static newAndTakeCContext(n){const r=e._vscf_impl_tag(n);switch(r){case t.FoundationImplTag.SHA224:return t.Sha224.newAndTakeCContext(n);case t.FoundationImplTag.SHA256:return t.Sha256.newAndTakeCContext(n);case t.FoundationImplTag.SHA384:return t.Sha384.newAndTakeCContext(n);case t.FoundationImplTag.SHA512:return t.Sha512.newAndTakeCContext(n);case t.FoundationImplTag.AES256_GCM:return t.Aes256Gcm.newAndTakeCContext(n);case t.FoundationImplTag.AES256_CBC:return t.Aes256Cbc.newAndTakeCContext(n);case t.FoundationImplTag.ASN1RD:return t.Asn1rd.newAndTakeCContext(n);case t.FoundationImplTag.ASN1WR:return t.Asn1wr.newAndTakeCContext(n);case t.FoundationImplTag.RSA_PUBLIC_KEY:return t.RsaPublicKey.newAndTakeCContext(n);case t.FoundationImplTag.RSA_PRIVATE_KEY:return t.RsaPrivateKey.newAndTakeCContext(n);case t.FoundationImplTag.RSA:return t.Rsa.newAndTakeCContext(n);case t.FoundationImplTag.ECC_PUBLIC_KEY:return t.EccPublicKey.newAndTakeCContext(n);case t.FoundationImplTag.ECC_PRIVATE_KEY:return t.EccPrivateKey.newAndTakeCContext(n);case t.FoundationImplTag.ECC:return t.Ecc.newAndTakeCContext(n);case t.FoundationImplTag.ENTROPY_ACCUMULATOR:return t.EntropyAccumulator.newAndTakeCContext(n);case t.FoundationImplTag.CTR_DRBG:return t.CtrDrbg.newAndTakeCContext(n);case t.FoundationImplTag.HMAC:return t.Hmac.newAndTakeCContext(n);case t.FoundationImplTag.HKDF:return t.Hkdf.newAndTakeCContext(n);case t.FoundationImplTag.KDF1:return t.Kdf1.newAndTakeCContext(n);case t.FoundationImplTag.KDF2:return t.Kdf2.newAndTakeCContext(n);case t.FoundationImplTag.FAKE_RANDOM:return t.FakeRandom.newAndTakeCContext(n);case t.FoundationImplTag.PKCS5_PBKDF2:return t.Pkcs5Pbkdf2.newAndTakeCContext(n);case t.FoundationImplTag.PKCS5_PBES2:return t.Pkcs5Pbes2.newAndTakeCContext(n);case t.FoundationImplTag.SEED_ENTROPY_SOURCE:return t.SeedEntropySource.newAndTakeCContext(n);case t.FoundationImplTag.KEY_MATERIAL_RNG:return t.KeyMaterialRng.newAndTakeCContext(n);case t.FoundationImplTag.RAW_PUBLIC_KEY:return t.RawPublicKey.newAndTakeCContext(n);case t.FoundationImplTag.RAW_PRIVATE_KEY:return t.RawPrivateKey.newAndTakeCContext(n);case t.FoundationImplTag.PKCS8_SERIALIZER:return t.Pkcs8Serializer.newAndTakeCContext(n);case t.FoundationImplTag.SEC1_SERIALIZER:return t.Sec1Serializer.newAndTakeCContext(n);case t.FoundationImplTag.KEY_ASN1_SERIALIZER:return t.KeyAsn1Serializer.newAndTakeCContext(n);case t.FoundationImplTag.KEY_ASN1_DESERIALIZER:return t.KeyAsn1Deserializer.newAndTakeCContext(n);case t.FoundationImplTag.ED25519:return t.Ed25519.newAndTakeCContext(n);case t.FoundationImplTag.CURVE25519:return t.Curve25519.newAndTakeCContext(n);case t.FoundationImplTag.SIMPLE_ALG_INFO:return t.SimpleAlgInfo.newAndTakeCContext(n);case t.FoundationImplTag.HASH_BASED_ALG_INFO:return t.HashBasedAlgInfo.newAndTakeCContext(n);case t.FoundationImplTag.CIPHER_ALG_INFO:return t.CipherAlgInfo.newAndTakeCContext(n);case t.FoundationImplTag.SALTED_KDF_ALG_INFO:return t.SaltedKdfAlgInfo.newAndTakeCContext(n);case t.FoundationImplTag.PBE_ALG_INFO:return t.PbeAlgInfo.newAndTakeCContext(n);case t.FoundationImplTag.ECC_ALG_INFO:return t.EccAlgInfo.newAndTakeCContext(n);case t.FoundationImplTag.ALG_INFO_DER_SERIALIZER:return t.AlgInfoDerSerializer.newAndTakeCContext(n);case t.FoundationImplTag.ALG_INFO_DER_DESERIALIZER:return t.AlgInfoDerDeserializer.newAndTakeCContext(n);case t.FoundationImplTag.MESSAGE_INFO_DER_SERIALIZER:return t.MessageInfoDerSerializer.newAndTakeCContext(n);default:throw new Error("Unexpected implementation tag found: "+r)}}static newAndUseCContext(n){return new t.FoundationInterface.newAndTakeCContext(e._vscf_impl_shallow_copy(n))}static isImplemented(t,n){return 0!=e._vscf_impl_api(t,n)}}};var FoundationInterface=initFoundationInterface;const initFoundationInterfaceTag=(e,t)=>{return Object.freeze({ALG:1,ALG_INFO:2,ALG_INFO_DESERIALIZER:3,ALG_INFO_SERIALIZER:4,ASN1_READER:5,ASN1_WRITER:6,AUTH_DECRYPT:7,AUTH_ENCRYPT:8,CIPHER:9,CIPHER_AUTH:10,CIPHER_AUTH_INFO:11,CIPHER_INFO:12,COMPUTE_SHARED_KEY:13,DECRYPT:14,ENCRYPT:15,ENTROPY_SOURCE:16,HASH:17,KDF:18,KEY:19,KEY_ALG:20,KEY_CIPHER:21,KEY_DESERIALIZER:22,KEY_SERIALIZER:23,KEY_SIGNER:24,MAC:25,MESSAGE_INFO_FOOTER_SERIALIZER:26,MESSAGE_INFO_SERIALIZER:27,PRIVATE_KEY:28,PUBLIC_KEY:29,RANDOM:30,SALTED_KDF:31})};var FoundationInterfaceTag=initFoundationInterfaceTag;const initFoundationImplTag=(e,t)=>{return Object.freeze({AES256_CBC:1,AES256_GCM:2,ALG_INFO_DER_DESERIALIZER:3,ALG_INFO_DER_SERIALIZER:4,ASN1RD:5,ASN1WR:6,CIPHER_ALG_INFO:7,CTR_DRBG:8,CURVE25519:9,ECC:10,ECC_ALG_INFO:11,ECC_PRIVATE_KEY:12,ECC_PUBLIC_KEY:13,ED25519:14,ENTROPY_ACCUMULATOR:15,FAKE_RANDOM:16,HASH_BASED_ALG_INFO:17,HKDF:18,HMAC:19,KDF1:20,KDF2:21,KEY_ASN1_DESERIALIZER:22,KEY_ASN1_SERIALIZER:23,KEY_MATERIAL_RNG:24,MESSAGE_INFO_DER_SERIALIZER:25,PBE_ALG_INFO:26,PKCS5_PBES2:27,PKCS5_PBKDF2:28,PKCS8_SERIALIZER:29,RAW_PRIVATE_KEY:30,RAW_PUBLIC_KEY:31,RSA:32,RSA_PRIVATE_KEY:33,RSA_PUBLIC_KEY:34,SALTED_KDF_ALG_INFO:35,SEC1_SERIALIZER:36,SEED_ENTROPY_SOURCE:37,SHA224:38,SHA256:39,SHA384:40,SHA512:41,SIMPLE_ALG_INFO:42})};var FoundationImplTag=initFoundationImplTag;function ensureNumber(e,t){if(!("number"==typeof t||t instanceof Number))throw new TypeError(`'${e}' is not a number`);if(Number.isNaN(t))throw new TypeError(`'${e}' is NaN`);if(t===1/0)throw new TypeError(`'${e}' is Infinity`);if(t===-1/0)throw new TypeError(`'${e}' is -Infinity`)}function ensureNotNull(e,t){if(ensureNumber(e,t),0==t)throw new TypeError(`'${e}' is NULL`)}function ensureString(e,t){if(!("string"==typeof t||t instanceof String))throw new TypeError(`'${e}' is not a string`)}function ensureBoolean(e,t){if("boolean"!=typeof t)throw new TypeError(`'${e}' is not a boolean`)}function ensureByteArray(e,t){if(!(t instanceof Uint8Array))throw new TypeError(`'${e}' is not an Uint8Array`)}function ensureClass(e,t,n){if(!(t instanceof n))throw new TypeError(`'${e}' is not an instance of the class ${n.name}`);ensureNotNull(e,t.ctxPtr)}function ensureImplementInterface(e,t,n,r,o){if(ensureNotNull(e,t.ctxPtr),!o.isImplemented(t.ctxPtr,r))throw new TypeError(`'${e}' does not implement interface '${n}'`)}var ensureNumber_1=ensureNumber,ensureString_1=ensureString,ensureBoolean_1=ensureBoolean,ensureByteArray_1=ensureByteArray,ensureClass_1=ensureClass,ensureNotNull_1=ensureNotNull,ensureImplementInterface_1=ensureImplementInterface,precondition={ensureNumber:ensureNumber_1,ensureString:ensureString_1,ensureBoolean:ensureBoolean_1,ensureByteArray:ensureByteArray_1,ensureClass:ensureClass_1,ensureNotNull:ensureNotNull_1,ensureImplementInterface:ensureImplementInterface_1};const initCtrDrbg=(e,t)=>{class n{static get RESEED_INTERVAL(){return 1e4}get RESEED_INTERVAL(){return n.RESEED_INTERVAL}static get ENTROPY_LEN(){return 48}get ENTROPY_LEN(){return n.ENTROPY_LEN}constructor(t){this.name="CtrDrbg",this.ctxPtr=void 0===t?e._vscf_ctr_drbg_new():t}static newAndUseCContext(t){return new n(e._vscf_ctr_drbg_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vscf_ctr_drbg_delete(this.ctxPtr),this.ctxPtr=null)}set entropySource(n){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureImplementInterface("entropySource",n,"Foundation.EntropySource",t.FoundationInterfaceTag.ENTROPY_SOURCE,t.FoundationInterface),e._vscf_ctr_drbg_release_entropy_source(this.ctxPtr);const r=e._vscf_ctr_drbg_use_entropy_source(this.ctxPtr,n.ctxPtr);t.FoundationError.handleStatusCode(r)}random(n){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureNumber("dataLen",n);const r=n,o=e._vsc_buffer_new_with_capacity(r);try{const r=e._vscf_ctr_drbg_random(this.ctxPtr,n,o);t.FoundationError.handleStatusCode(r);const s=e._vsc_buffer_bytes(o),a=e._vsc_buffer_len(o);return e.HEAPU8.slice(s,s+a)}finally{e._vsc_buffer_delete(o)}}reseed(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=e._vscf_ctr_drbg_reseed(this.ctxPtr);t.FoundationError.handleStatusCode(n)}setupDefaults(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=e._vscf_ctr_drbg_setup_defaults(this.ctxPtr);t.FoundationError.handleStatusCode(n)}enablePredictionResistance(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_ctr_drbg_enable_prediction_resistance(this.ctxPtr)}setReseedInterval(t){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureNumber("interval",t),e._vscf_ctr_drbg_set_reseed_interval(this.ctxPtr,t)}setEntropyLen(t){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureNumber("len",t),e._vscf_ctr_drbg_set_entropy_len(this.ctxPtr,t)}}return n};var CtrDrbg=initCtrDrbg;const initHmac=(e,t)=>{class n{constructor(t){this.name="Hmac",this.ctxPtr=void 0===t?e._vscf_hmac_new():t}static newAndUseCContext(t){return new n(e._vscf_hmac_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vscf_hmac_delete(this.ctxPtr),this.ctxPtr=null)}set hash(n){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureImplementInterface("hash",n,"Foundation.Hash",t.FoundationInterfaceTag.HASH,t.FoundationInterface),e._vscf_hmac_release_hash(this.ctxPtr),e._vscf_hmac_use_hash(this.ctxPtr,n.ctxPtr)}algId(){let t;return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),t=e._vscf_hmac_alg_id(this.ctxPtr)}produceAlgInfo(){let n;return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),n=e._vscf_hmac_produce_alg_info(this.ctxPtr),t.FoundationInterface.newAndTakeCContext(n)}restoreAlgInfo(n){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureImplementInterface("algInfo",n,"Foundation.AlgInfo",t.FoundationInterfaceTag.ALG_INFO,t.FoundationInterface);const r=e._vscf_hmac_restore_alg_info(this.ctxPtr,n.ctxPtr);t.FoundationError.handleStatusCode(r)}digestLen(){let t;return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),t=e._vscf_hmac_digest_len(this.ctxPtr)}mac(t,n){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("key",t),precondition.ensureByteArray("data",n);const r=t.length*t.BYTES_PER_ELEMENT,o=e._malloc(r);e.HEAP8.set(t,o);const s=e._vsc_data_ctx_size(),a=e._malloc(s);e._vsc_data(a,o,r);const i=n.length*n.BYTES_PER_ELEMENT,c=e._malloc(i);e.HEAP8.set(n,c);const _=e._vsc_data_ctx_size(),u=e._malloc(_);e._vsc_data(u,c,i);const l=this.digestLen(),f=e._vsc_buffer_new_with_capacity(l);try{e._vscf_hmac_mac(this.ctxPtr,a,u,f);const t=e._vsc_buffer_bytes(f),n=e._vsc_buffer_len(f);return e.HEAPU8.slice(t,t+n)}finally{e._free(o),e._free(a),e._free(c),e._free(u),e._vsc_buffer_delete(f)}}start(t){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("key",t);const n=t.length*t.BYTES_PER_ELEMENT,r=e._malloc(n);e.HEAP8.set(t,r);const o=e._vsc_data_ctx_size(),s=e._malloc(o);e._vsc_data(s,r,n);try{e._vscf_hmac_start(this.ctxPtr,s)}finally{e._free(r),e._free(s)}}update(t){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("data",t);const n=t.length*t.BYTES_PER_ELEMENT,r=e._malloc(n);e.HEAP8.set(t,r);const o=e._vsc_data_ctx_size(),s=e._malloc(o);e._vsc_data(s,r,n);try{e._vscf_hmac_update(this.ctxPtr,s)}finally{e._free(r),e._free(s)}}finish(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr);const t=this.digestLen(),n=e._vsc_buffer_new_with_capacity(t);try{e._vscf_hmac_finish(this.ctxPtr,n);const t=e._vsc_buffer_bytes(n),r=e._vsc_buffer_len(n);return e.HEAPU8.slice(t,t+r)}finally{e._vsc_buffer_delete(n)}}reset(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_hmac_reset(this.ctxPtr)}}return n};var Hmac=initHmac;const initHkdf=(e,t)=>{class n{constructor(t){this.name="Hkdf",this.ctxPtr=void 0===t?e._vscf_hkdf_new():t}static newAndUseCContext(t){return new n(e._vscf_hkdf_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vscf_hkdf_delete(this.ctxPtr),this.ctxPtr=null)}set hash(n){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureImplementInterface("hash",n,"Foundation.Hash",t.FoundationInterfaceTag.HASH,t.FoundationInterface),e._vscf_hkdf_release_hash(this.ctxPtr),e._vscf_hkdf_use_hash(this.ctxPtr,n.ctxPtr)}algId(){let t;return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),t=e._vscf_hkdf_alg_id(this.ctxPtr)}produceAlgInfo(){let n;return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),n=e._vscf_hkdf_produce_alg_info(this.ctxPtr),t.FoundationInterface.newAndTakeCContext(n)}restoreAlgInfo(n){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureImplementInterface("algInfo",n,"Foundation.AlgInfo",t.FoundationInterfaceTag.ALG_INFO,t.FoundationInterface);const r=e._vscf_hkdf_restore_alg_info(this.ctxPtr,n.ctxPtr);t.FoundationError.handleStatusCode(r)}derive(t,n){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("data",t),precondition.ensureNumber("keyLen",n);const r=t.length*t.BYTES_PER_ELEMENT,o=e._malloc(r);e.HEAP8.set(t,o);const s=e._vsc_data_ctx_size(),a=e._malloc(s);e._vsc_data(a,o,r);const i=n,c=e._vsc_buffer_new_with_capacity(i);try{e._vscf_hkdf_derive(this.ctxPtr,a,n,c);const t=e._vsc_buffer_bytes(c),r=e._vsc_buffer_len(c);return e.HEAPU8.slice(t,t+r)}finally{e._free(o),e._free(a),e._vsc_buffer_delete(c)}}reset(t,n){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("salt",t),precondition.ensureNumber("iterationCount",n);const r=t.length*t.BYTES_PER_ELEMENT,o=e._malloc(r);e.HEAP8.set(t,o);const s=e._vsc_data_ctx_size(),a=e._malloc(s);e._vsc_data(a,o,r);try{e._vscf_hkdf_reset(this.ctxPtr,a,n)}finally{e._free(o),e._free(a)}}setInfo(t){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("info",t);const n=t.length*t.BYTES_PER_ELEMENT,r=e._malloc(n);e.HEAP8.set(t,r);const o=e._vsc_data_ctx_size(),s=e._malloc(o);e._vsc_data(s,r,n);try{e._vscf_hkdf_set_info(this.ctxPtr,s)}finally{e._free(r),e._free(s)}}}return n};var Hkdf=initHkdf;const initSha512=(e,t)=>{class n{static get DIGEST_LEN(){return 64}get DIGEST_LEN(){return n.DIGEST_LEN}static get BLOCK_LEN(){return 128}get BLOCK_LEN(){return n.BLOCK_LEN}constructor(t){this.name="Sha512",this.ctxPtr=void 0===t?e._vscf_sha512_new():t}static newAndUseCContext(t){return new n(e._vscf_sha512_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vscf_sha512_delete(this.ctxPtr),this.ctxPtr=null)}algId(){let t;return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),t=e._vscf_sha512_alg_id(this.ctxPtr)}produceAlgInfo(){let n;return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),n=e._vscf_sha512_produce_alg_info(this.ctxPtr),t.FoundationInterface.newAndTakeCContext(n)}restoreAlgInfo(n){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureImplementInterface("algInfo",n,"Foundation.AlgInfo",t.FoundationInterfaceTag.ALG_INFO,t.FoundationInterface);const r=e._vscf_sha512_restore_alg_info(this.ctxPtr,n.ctxPtr);t.FoundationError.handleStatusCode(r)}hash(t){precondition.ensureByteArray("data",t);const n=t.length*t.BYTES_PER_ELEMENT,r=e._malloc(n);e.HEAP8.set(t,r);const o=e._vsc_data_ctx_size(),s=e._malloc(o);e._vsc_data(s,r,n);const a=this.DIGEST_LEN,i=e._vsc_buffer_new_with_capacity(a);try{e._vscf_sha512_hash(s,i);const t=e._vsc_buffer_bytes(i),n=e._vsc_buffer_len(i);return e.HEAPU8.slice(t,t+n)}finally{e._free(r),e._free(s),e._vsc_buffer_delete(i)}}start(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_sha512_start(this.ctxPtr)}update(t){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("data",t);const n=t.length*t.BYTES_PER_ELEMENT,r=e._malloc(n);e.HEAP8.set(t,r);const o=e._vsc_data_ctx_size(),s=e._malloc(o);e._vsc_data(s,r,n);try{e._vscf_sha512_update(this.ctxPtr,s)}finally{e._free(r),e._free(s)}}finish(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr);const t=this.DIGEST_LEN,n=e._vsc_buffer_new_with_capacity(t);try{e._vscf_sha512_finish(this.ctxPtr,n);const t=e._vsc_buffer_bytes(n),r=e._vsc_buffer_len(n);return e.HEAPU8.slice(t,t+r)}finally{e._vsc_buffer_delete(n)}}}return n};var Sha512=initSha512;const initPheError=(e,t)=>{class n extends Error{constructor(e){super(e),this.name="PheError",this.message=e}static handleStatusCode(e){if(0!=e){if(-1==e)throw new n("Success proof check failed.");if(-2==e)throw new n("Failure proof check failed.");if(-3==e)throw new n("RNG returned error.");if(-4==e)throw new n("Protobuf decode failed.");if(-5==e)throw new n("Invalid public key.");if(-6==e)throw new n("Invalid private key.");if(-7==e)throw new n("AES error occurred.");throw new n("Unexpected status code:"+e)}}}return n};var PheError=initPheError;function ensureNumber$1(e,t){if(!("number"==typeof t||t instanceof Number))throw new TypeError(`'${e}' is not a number`);if(Number.isNaN(t))throw new TypeError(`'${e}' is NaN`);if(t===1/0)throw new TypeError(`'${e}' is Infinity`);if(t===-1/0)throw new TypeError(`'${e}' is -Infinity`)}function ensureNotNull$1(e,t){if(ensureNumber$1(e,t),0==t)throw new TypeError(`'${e}' is NULL`)}function ensureString$1(e,t){if(!("string"==typeof t||t instanceof String))throw new TypeError(`'${e}' is not a string`)}function ensureBoolean$1(e,t){if("boolean"!=typeof t)throw new TypeError(`'${e}' is not a boolean`)}function ensureByteArray$1(e,t){if(!(t instanceof Uint8Array))throw new TypeError(`'${e}' is not an Uint8Array`)}function ensureClass$1(e,t,n){if(!(t instanceof n))throw new TypeError(`'${e}' is not an instance of the class ${n.name}`);ensureNotNull$1(e,t.ctxPtr)}function ensureImplementInterface$1(e,t,n,r,o){if(ensureNotNull$1(e,t.ctxPtr),!o.isImplemented(t.ctxPtr,r))throw new TypeError(`'${e}' does not implement interface '${n}'`)}var ensureNumber_1$1=ensureNumber$1,ensureString_1$1=ensureString$1,ensureBoolean_1$1=ensureBoolean$1,ensureByteArray_1$1=ensureByteArray$1,ensureClass_1$1=ensureClass$1,ensureNotNull_1$1=ensureNotNull$1,ensureImplementInterface_1$1=ensureImplementInterface$1,precondition$1={ensureNumber:ensureNumber_1$1,ensureString:ensureString_1$1,ensureBoolean:ensureBoolean_1$1,ensureByteArray:ensureByteArray_1$1,ensureClass:ensureClass_1$1,ensureNotNull:ensureNotNull_1$1,ensureImplementInterface:ensureImplementInterface_1$1};const initPheCommon=(e,t)=>{class n{static get PHE_POINT_LENGTH(){return 65}get PHE_POINT_LENGTH(){return n.PHE_POINT_LENGTH}static get PHE_MAX_PASSWORD_LENGTH(){return 128}get PHE_MAX_PASSWORD_LENGTH(){return n.PHE_MAX_PASSWORD_LENGTH}static get PHE_SERVER_IDENTIFIER_LENGTH(){return 32}get PHE_SERVER_IDENTIFIER_LENGTH(){return n.PHE_SERVER_IDENTIFIER_LENGTH}static get PHE_CLIENT_IDENTIFIER_LENGTH(){return 32}get PHE_CLIENT_IDENTIFIER_LENGTH(){return n.PHE_CLIENT_IDENTIFIER_LENGTH}static get PHE_ACCOUNT_KEY_LENGTH(){return 32}get PHE_ACCOUNT_KEY_LENGTH(){return n.PHE_ACCOUNT_KEY_LENGTH}static get PHE_PRIVATE_KEY_LENGTH(){return 32}get PHE_PRIVATE_KEY_LENGTH(){return n.PHE_PRIVATE_KEY_LENGTH}static get PHE_PUBLIC_KEY_LENGTH(){return 65}get PHE_PUBLIC_KEY_LENGTH(){return n.PHE_PUBLIC_KEY_LENGTH}static get PHE_HASH_LEN(){return 32}get PHE_HASH_LEN(){return n.PHE_HASH_LEN}static get PHE_MAX_ENCRYPT_LEN(){return 1048512}get PHE_MAX_ENCRYPT_LEN(){return n.PHE_MAX_ENCRYPT_LEN}static get PHE_MAX_DECRYPT_LEN(){return 1048576}get PHE_MAX_DECRYPT_LEN(){return n.PHE_MAX_DECRYPT_LEN}static get PHE_MAX_AUTH_LEN(){return 1024}get PHE_MAX_AUTH_LEN(){return n.PHE_MAX_AUTH_LEN}}return n};var PheCommon=initPheCommon;const initPheServer=(e,t)=>{class n{constructor(t){this.name="PheServer",this.ctxPtr=void 0===t?e._vsce_phe_server_new():t}static newAndUseCContext(t){return new n(e._vsce_phe_server_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vsce_phe_server_delete(this.ctxPtr),this.ctxPtr=null)}set random(n){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureImplementInterface("random",n,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_server_release_random(this.ctxPtr),e._vsce_phe_server_use_random(this.ctxPtr,n.ctxPtr)}set operationRandom(n){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureImplementInterface("operationRandom",n,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_server_release_operation_random(this.ctxPtr),e._vsce_phe_server_use_operation_random(this.ctxPtr,n.ctxPtr)}setupDefaults(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=e._vsce_phe_server_setup_defaults(this.ctxPtr);t.PheError.handleStatusCode(n)}generateServerKeyPair(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=t.PheCommon.PHE_PRIVATE_KEY_LENGTH,r=e._vsc_buffer_new_with_capacity(n),o=t.PheCommon.PHE_PUBLIC_KEY_LENGTH,s=e._vsc_buffer_new_with_capacity(o);try{const n=e._vsce_phe_server_generate_server_key_pair(this.ctxPtr,r,s);t.PheError.handleStatusCode(n);const o=e._vsc_buffer_bytes(r),a=e._vsc_buffer_len(r),i=e.HEAPU8.slice(o,o+a),c=e._vsc_buffer_bytes(s),_=e._vsc_buffer_len(s);return{serverPrivateKey:i,serverPublicKey:e.HEAPU8.slice(c,c+_)}}finally{e._vsc_buffer_delete(r),e._vsc_buffer_delete(s)}}enrollmentResponseLen(){let t;return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),t=e._vsce_phe_server_enrollment_response_len(this.ctxPtr)}getEnrollment(n,r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("serverPrivateKey",n),precondition$1.ensureByteArray("serverPublicKey",r);const o=n.length*n.BYTES_PER_ELEMENT,s=e._malloc(o);e.HEAP8.set(n,s);const a=e._vsc_data_ctx_size(),i=e._malloc(a);e._vsc_data(i,s,o);const c=r.length*r.BYTES_PER_ELEMENT,_=e._malloc(c);e.HEAP8.set(r,_);const u=e._vsc_data_ctx_size(),l=e._malloc(u);e._vsc_data(l,_,c);const f=this.enrollmentResponseLen(),d=e._vsc_buffer_new_with_capacity(f);try{const n=e._vsce_phe_server_get_enrollment(this.ctxPtr,i,l,d);t.PheError.handleStatusCode(n);const r=e._vsc_buffer_bytes(d),o=e._vsc_buffer_len(d);return e.HEAPU8.slice(r,r+o)}finally{e._free(s),e._free(i),e._free(_),e._free(l),e._vsc_buffer_delete(d)}}verifyPasswordResponseLen(){let t;return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),t=e._vsce_phe_server_verify_password_response_len(this.ctxPtr)}verifyPassword(n,r,o){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("serverPrivateKey",n),precondition$1.ensureByteArray("serverPublicKey",r),precondition$1.ensureByteArray("verifyPasswordRequest",o);const s=n.length*n.BYTES_PER_ELEMENT,a=e._malloc(s);e.HEAP8.set(n,a);const i=e._vsc_data_ctx_size(),c=e._malloc(i);e._vsc_data(c,a,s);const _=r.length*r.BYTES_PER_ELEMENT,u=e._malloc(_);e.HEAP8.set(r,u);const l=e._vsc_data_ctx_size(),f=e._malloc(l);e._vsc_data(f,u,_);const d=o.length*o.BYTES_PER_ELEMENT,p=e._malloc(d);e.HEAP8.set(o,p);const h=e._vsc_data_ctx_size(),v=e._malloc(h);e._vsc_data(v,p,d);const y=this.verifyPasswordResponseLen(),m=e._vsc_buffer_new_with_capacity(y);try{const n=e._vsce_phe_server_verify_password(this.ctxPtr,c,f,v,m);t.PheError.handleStatusCode(n);const r=e._vsc_buffer_bytes(m),o=e._vsc_buffer_len(m);return e.HEAPU8.slice(r,r+o)}finally{e._free(a),e._free(c),e._free(u),e._free(f),e._free(p),e._free(v),e._vsc_buffer_delete(m)}}updateTokenLen(){let t;return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),t=e._vsce_phe_server_update_token_len(this.ctxPtr)}rotateKeys(n){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("serverPrivateKey",n);const r=n.length*n.BYTES_PER_ELEMENT,o=e._malloc(r);e.HEAP8.set(n,o);const s=e._vsc_data_ctx_size(),a=e._malloc(s);e._vsc_data(a,o,r);const i=t.PheCommon.PHE_PRIVATE_KEY_LENGTH,c=e._vsc_buffer_new_with_capacity(i),_=t.PheCommon.PHE_PUBLIC_KEY_LENGTH,u=e._vsc_buffer_new_with_capacity(_),l=this.updateTokenLen(),f=e._vsc_buffer_new_with_capacity(l);try{const n=e._vsce_phe_server_rotate_keys(this.ctxPtr,a,c,u,f);t.PheError.handleStatusCode(n);const r=e._vsc_buffer_bytes(c),s=e._vsc_buffer_len(c),i=e.HEAPU8.slice(r,r+s),_=e._vsc_buffer_bytes(u),l=e._vsc_buffer_len(u),d=e.HEAPU8.slice(_,_+l),p=e._vsc_buffer_bytes(f),h=e._vsc_buffer_len(f);return{newServerPrivateKey:i,newServerPublicKey:d,updateToken:e.HEAPU8.slice(p,p+h)}}finally{e._free(o),e._free(a),e._vsc_buffer_delete(c),e._vsc_buffer_delete(u),e._vsc_buffer_delete(f)}}}return n};var PheServer=initPheServer;const initPheClient=(e,t)=>{class n{constructor(t){this.name="PheClient",this.ctxPtr=void 0===t?e._vsce_phe_client_new():t}static newAndUseCContext(t){return new n(e._vsce_phe_client_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vsce_phe_client_delete(this.ctxPtr),this.ctxPtr=null)}set random(n){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureImplementInterface("random",n,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_client_release_random(this.ctxPtr),e._vsce_phe_client_use_random(this.ctxPtr,n.ctxPtr)}set operationRandom(n){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureImplementInterface("operationRandom",n,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_client_release_operation_random(this.ctxPtr),e._vsce_phe_client_use_operation_random(this.ctxPtr,n.ctxPtr)}setupDefaults(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=e._vsce_phe_client_setup_defaults(this.ctxPtr);t.PheError.handleStatusCode(n)}setKeys(n,r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("clientPrivateKey",n),precondition$1.ensureByteArray("serverPublicKey",r);const o=n.length*n.BYTES_PER_ELEMENT,s=e._malloc(o);e.HEAP8.set(n,s);const a=e._vsc_data_ctx_size(),i=e._malloc(a);e._vsc_data(i,s,o);const c=r.length*r.BYTES_PER_ELEMENT,_=e._malloc(c);e.HEAP8.set(r,_);const u=e._vsc_data_ctx_size(),l=e._malloc(u);e._vsc_data(l,_,c);try{const n=e._vsce_phe_client_set_keys(this.ctxPtr,i,l);t.PheError.handleStatusCode(n)}finally{e._free(s),e._free(i),e._free(_),e._free(l)}}generateClientPrivateKey(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=t.PheCommon.PHE_PRIVATE_KEY_LENGTH,r=e._vsc_buffer_new_with_capacity(n);try{const n=e._vsce_phe_client_generate_client_private_key(this.ctxPtr,r);t.PheError.handleStatusCode(n);const o=e._vsc_buffer_bytes(r),s=e._vsc_buffer_len(r);return e.HEAPU8.slice(o,o+s)}finally{e._vsc_buffer_delete(r)}}enrollmentRecordLen(){let t;return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),t=e._vsce_phe_client_enrollment_record_len(this.ctxPtr)}enrollAccount(n,r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("enrollmentResponse",n),precondition$1.ensureByteArray("password",r);const o=n.length*n.BYTES_PER_ELEMENT,s=e._malloc(o);e.HEAP8.set(n,s);const a=e._vsc_data_ctx_size(),i=e._malloc(a);e._vsc_data(i,s,o);const c=r.length*r.BYTES_PER_ELEMENT,_=e._malloc(c);e.HEAP8.set(r,_);const u=e._vsc_data_ctx_size(),l=e._malloc(u);e._vsc_data(l,_,c);const f=this.enrollmentRecordLen(),d=e._vsc_buffer_new_with_capacity(f),p=t.PheCommon.PHE_ACCOUNT_KEY_LENGTH,h=e._vsc_buffer_new_with_capacity(p);try{const n=e._vsce_phe_client_enroll_account(this.ctxPtr,i,l,d,h);t.PheError.handleStatusCode(n);const r=e._vsc_buffer_bytes(d),o=e._vsc_buffer_len(d),a=e.HEAPU8.slice(r,r+o),c=e._vsc_buffer_bytes(h),u=e._vsc_buffer_len(h);return{enrollmentRecord:a,accountKey:e.HEAPU8.slice(c,c+u)}}finally{e._free(s),e._free(i),e._free(_),e._free(l),e._vsc_buffer_delete(d),e._vsc_buffer_delete(h)}}verifyPasswordRequestLen(){let t;return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),t=e._vsce_phe_client_verify_password_request_len(this.ctxPtr)}createVerifyPasswordRequest(n,r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("password",n),precondition$1.ensureByteArray("enrollmentRecord",r);const o=n.length*n.BYTES_PER_ELEMENT,s=e._malloc(o);e.HEAP8.set(n,s);const a=e._vsc_data_ctx_size(),i=e._malloc(a);e._vsc_data(i,s,o);const c=r.length*r.BYTES_PER_ELEMENT,_=e._malloc(c);e.HEAP8.set(r,_);const u=e._vsc_data_ctx_size(),l=e._malloc(u);e._vsc_data(l,_,c);const f=this.verifyPasswordRequestLen(),d=e._vsc_buffer_new_with_capacity(f);try{const n=e._vsce_phe_client_create_verify_password_request(this.ctxPtr,i,l,d);t.PheError.handleStatusCode(n);const r=e._vsc_buffer_bytes(d),o=e._vsc_buffer_len(d);return e.HEAPU8.slice(r,r+o)}finally{e._free(s),e._free(i),e._free(_),e._free(l),e._vsc_buffer_delete(d)}}checkResponseAndDecrypt(n,r,o){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("password",n),precondition$1.ensureByteArray("enrollmentRecord",r),precondition$1.ensureByteArray("verifyPasswordResponse",o);const s=n.length*n.BYTES_PER_ELEMENT,a=e._malloc(s);e.HEAP8.set(n,a);const i=e._vsc_data_ctx_size(),c=e._malloc(i);e._vsc_data(c,a,s);const _=r.length*r.BYTES_PER_ELEMENT,u=e._malloc(_);e.HEAP8.set(r,u);const l=e._vsc_data_ctx_size(),f=e._malloc(l);e._vsc_data(f,u,_);const d=o.length*o.BYTES_PER_ELEMENT,p=e._malloc(d);e.HEAP8.set(o,p);const h=e._vsc_data_ctx_size(),v=e._malloc(h);e._vsc_data(v,p,d);const y=t.PheCommon.PHE_ACCOUNT_KEY_LENGTH,m=e._vsc_buffer_new_with_capacity(y);try{const n=e._vsce_phe_client_check_response_and_decrypt(this.ctxPtr,c,f,v,m);t.PheError.handleStatusCode(n);const r=e._vsc_buffer_bytes(m),o=e._vsc_buffer_len(m);return e.HEAPU8.slice(r,r+o)}finally{e._free(a),e._free(c),e._free(u),e._free(f),e._free(p),e._free(v),e._vsc_buffer_delete(m)}}rotateKeys(n){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("updateToken",n);const r=n.length*n.BYTES_PER_ELEMENT,o=e._malloc(r);e.HEAP8.set(n,o);const s=e._vsc_data_ctx_size(),a=e._malloc(s);e._vsc_data(a,o,r);const i=t.PheCommon.PHE_PRIVATE_KEY_LENGTH,c=e._vsc_buffer_new_with_capacity(i),_=t.PheCommon.PHE_PUBLIC_KEY_LENGTH,u=e._vsc_buffer_new_with_capacity(_);try{const n=e._vsce_phe_client_rotate_keys(this.ctxPtr,a,c,u);t.PheError.handleStatusCode(n);const r=e._vsc_buffer_bytes(c),s=e._vsc_buffer_len(c),i=e.HEAPU8.slice(r,r+s),_=e._vsc_buffer_bytes(u),l=e._vsc_buffer_len(u);return{newClientPrivateKey:i,newServerPublicKey:e.HEAPU8.slice(_,_+l)}}finally{e._free(o),e._free(a),e._vsc_buffer_delete(c),e._vsc_buffer_delete(u)}}updateEnrollmentRecord(n,r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("enrollmentRecord",n),precondition$1.ensureByteArray("updateToken",r);const o=n.length*n.BYTES_PER_ELEMENT,s=e._malloc(o);e.HEAP8.set(n,s);const a=e._vsc_data_ctx_size(),i=e._malloc(a);e._vsc_data(i,s,o);const c=r.length*r.BYTES_PER_ELEMENT,_=e._malloc(c);e.HEAP8.set(r,_);const u=e._vsc_data_ctx_size(),l=e._malloc(u);e._vsc_data(l,_,c);const f=this.enrollmentRecordLen(),d=e._vsc_buffer_new_with_capacity(f);try{const n=e._vsce_phe_client_update_enrollment_record(this.ctxPtr,i,l,d);t.PheError.handleStatusCode(n);const r=e._vsc_buffer_bytes(d),o=e._vsc_buffer_len(d);return e.HEAPU8.slice(r,r+o)}finally{e._free(s),e._free(i),e._free(_),e._free(l),e._vsc_buffer_delete(d)}}}return n};var PheClient=initPheClient;const initPheCipher=(e,t)=>{class n{constructor(t){this.name="PheCipher",this.ctxPtr=void 0===t?e._vsce_phe_cipher_new():t}static newAndUseCContext(t){return new n(e._vsce_phe_cipher_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vsce_phe_cipher_delete(this.ctxPtr),this.ctxPtr=null)}set random(n){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureImplementInterface("random",n,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_cipher_release_random(this.ctxPtr),e._vsce_phe_cipher_use_random(this.ctxPtr,n.ctxPtr)}setupDefaults(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=e._vsce_phe_cipher_setup_defaults(this.ctxPtr);t.PheError.handleStatusCode(n)}encryptLen(t){let n;return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureNumber("plainTextLen",t),n=e._vsce_phe_cipher_encrypt_len(this.ctxPtr,t)}decryptLen(t){let n;return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureNumber("cipherTextLen",t),n=e._vsce_phe_cipher_decrypt_len(this.ctxPtr,t)}encrypt(n,r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("plainText",n),precondition$1.ensureByteArray("accountKey",r);const o=n.length*n.BYTES_PER_ELEMENT,s=e._malloc(o);e.HEAP8.set(n,s);const a=e._vsc_data_ctx_size(),i=e._malloc(a);e._vsc_data(i,s,o);const c=r.length*r.BYTES_PER_ELEMENT,_=e._malloc(c);e.HEAP8.set(r,_);const u=e._vsc_data_ctx_size(),l=e._malloc(u);e._vsc_data(l,_,c);const f=this.encryptLen(n.length),d=e._vsc_buffer_new_with_capacity(f);try{const n=e._vsce_phe_cipher_encrypt(this.ctxPtr,i,l,d);t.PheError.handleStatusCode(n);const r=e._vsc_buffer_bytes(d),o=e._vsc_buffer_len(d);return e.HEAPU8.slice(r,r+o)}finally{e._free(s),e._free(i),e._free(_),e._free(l),e._vsc_buffer_delete(d)}}decrypt(n,r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("cipherText",n),precondition$1.ensureByteArray("accountKey",r);const o=n.length*n.BYTES_PER_ELEMENT,s=e._malloc(o);e.HEAP8.set(n,s);const a=e._vsc_data_ctx_size(),i=e._malloc(a);e._vsc_data(i,s,o);const c=r.length*r.BYTES_PER_ELEMENT,_=e._malloc(c);e.HEAP8.set(r,_);const u=e._vsc_data_ctx_size(),l=e._malloc(u);e._vsc_data(l,_,c);const f=this.decryptLen(n.length),d=e._vsc_buffer_new_with_capacity(f);try{const n=e._vsce_phe_cipher_decrypt(this.ctxPtr,i,l,d);t.PheError.handleStatusCode(n);const r=e._vsc_buffer_bytes(d),o=e._vsc_buffer_len(d);return e.HEAPU8.slice(r,r+o)}finally{e._free(s),e._free(i),e._free(_),e._free(l),e._vsc_buffer_delete(d)}}authEncrypt(n,r,o){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("plainText",n),precondition$1.ensureByteArray("additionalData",r),precondition$1.ensureByteArray("accountKey",o);const s=n.length*n.BYTES_PER_ELEMENT,a=e._malloc(s);e.HEAP8.set(n,a);const i=e._vsc_data_ctx_size(),c=e._malloc(i);e._vsc_data(c,a,s);const _=r.length*r.BYTES_PER_ELEMENT,u=e._malloc(_);e.HEAP8.set(r,u);const l=e._vsc_data_ctx_size(),f=e._malloc(l);e._vsc_data(f,u,_);const d=o.length*o.BYTES_PER_ELEMENT,p=e._malloc(d);e.HEAP8.set(o,p);const h=e._vsc_data_ctx_size(),v=e._malloc(h);e._vsc_data(v,p,d);const y=this.encryptLen(n.length),m=e._vsc_buffer_new_with_capacity(y);try{const n=e._vsce_phe_cipher_auth_encrypt(this.ctxPtr,c,f,v,m);t.PheError.handleStatusCode(n);const r=e._vsc_buffer_bytes(m),o=e._vsc_buffer_len(m);return e.HEAPU8.slice(r,r+o)}finally{e._free(a),e._free(c),e._free(u),e._free(f),e._free(p),e._free(v),e._vsc_buffer_delete(m)}}authDecrypt(n,r,o){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("cipherText",n),precondition$1.ensureByteArray("additionalData",r),precondition$1.ensureByteArray("accountKey",o);const s=n.length*n.BYTES_PER_ELEMENT,a=e._malloc(s);e.HEAP8.set(n,a);const i=e._vsc_data_ctx_size(),c=e._malloc(i);e._vsc_data(c,a,s);const _=r.length*r.BYTES_PER_ELEMENT,u=e._malloc(_);e.HEAP8.set(r,u);const l=e._vsc_data_ctx_size(),f=e._malloc(l);e._vsc_data(f,u,_);const d=o.length*o.BYTES_PER_ELEMENT,p=e._malloc(d);e.HEAP8.set(o,p);const h=e._vsc_data_ctx_size(),v=e._malloc(h);e._vsc_data(v,p,d);const y=this.decryptLen(n.length),m=e._vsc_buffer_new_with_capacity(y);try{const n=e._vsce_phe_cipher_auth_decrypt(this.ctxPtr,c,f,v,m);t.PheError.handleStatusCode(n);const r=e._vsc_buffer_bytes(m),o=e._vsc_buffer_len(m);return e.HEAPU8.slice(r,r+o)}finally{e._free(a),e._free(c),e._free(u),e._free(f),e._free(p),e._free(v),e._vsc_buffer_delete(m)}}}return n};var PheCipher=initPheCipher;const initProject=()=>{const e=new libphe;return new Promise((t,n)=>{e.onRuntimeInitialized=()=>{const n={};n.FoundationError=FoundationError(),n.FoundationInterface=FoundationInterface(e,n),n.FoundationInterfaceTag=FoundationInterfaceTag(),n.FoundationImplTag=FoundationImplTag(),n.CtrDrbg=CtrDrbg(e,n),n.Hmac=Hmac(e,n),n.Hkdf=Hkdf(e,n),n.Sha512=Sha512(e,n),n.PheError=PheError(),n.PheCommon=PheCommon(),n.PheServer=PheServer(e,n),n.PheClient=PheClient(e,n),n.PheCipher=PheCipher(e,n),t(n)},e.onAbort=e=>{n(new Error(e))}})};var phe=initProject;module.exports=phe;
