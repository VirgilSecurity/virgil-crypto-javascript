"use strict";var e=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){var r,n=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(r=r||__filename),function(e){var t;e=e||{},t||(t=void 0!==e?e:{});var r,n,_,s,c,a,o={};for(r in t)t.hasOwnProperty(r)&&(o[r]=t[r]);n=__dirname+"/",_=function(e){return c||(c=require("fs")),a||(a=require("path")),e=a.normalize(e),c.readFileSync(e,null)},s=function(e){return(e=_(e)).buffer||(e=new Uint8Array(e)),e.buffer||B("Assertion failed: undefined"),e},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){throw e})),process.on("unhandledRejection",B),t.inspect=function(){return"[Emscripten Module object]"};var i,u=t.print||console.log.bind(console),l=t.printErr||console.warn.bind(console);for(r in o)o.hasOwnProperty(r)&&(t[r]=o[r]);o=null,t.wasmBinary&&(i=t.wasmBinary),t.noExitRuntime&&t.noExitRuntime,"object"!=typeof WebAssembly&&l("no native wasm support detected");var f,d,h,p,v,m,y=new WebAssembly.Table({initial:177,maximum:177,element:"anyfunc"}),E=!1,P="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function w(e,t,r){var n=t+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.subarray&&P)return P.decode(e.subarray(t,r));for(n="";t<r;){var _=e[t++];if(128&_){var s=63&e[t++];if(192==(224&_))n+=String.fromCharCode((31&_)<<6|s);else{var c=63&e[t++];65536>(_=224==(240&_)?(15&_)<<12|s<<6|c:(7&_)<<18|s<<12|c<<6|63&e[t++])?n+=String.fromCharCode(_):(_-=65536,n+=String.fromCharCode(55296|_>>10,56320|1023&_))}}else n+=String.fromCharCode(_)}return n}function x(e){d=e,t.HEAP8=h=new Int8Array(e),t.HEAP16=v=new Int16Array(e),t.HEAP32=m=new Int32Array(e),t.HEAPU8=p=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var A=t.INITIAL_MEMORY||16777216;function b(e){for(;0<e.length;){var r=e.shift();if("function"==typeof r)r();else{var n=r.Fc;"number"==typeof n?void 0===r.qc?t.dynCall_v(n):t.dynCall_vi(n,r.qc):n(void 0===r.qc?null:r.qc)}}}(f=t.wasmMemory?t.wasmMemory:new WebAssembly.Memory({initial:A/65536}))&&(d=f.buffer),A=d.byteLength,x(d),m[10320]=5284320;var N=[],g=[],T=[],k=[];function C(){var e=t.preRun.shift();N.unshift(e)}var I=Math.abs,R=Math.ceil,S=Math.floor,H=Math.min,L=0,F=null;function B(e){throw t.onAbort&&t.onAbort(e),u(e),l(e),E=!0,new WebAssembly.RuntimeError("abort("+e+"). Build with -s ASSERTIONS=1 for more info.")}function K(){var e=U;return String.prototype.startsWith?e.startsWith("data:application/octet-stream;base64,"):0===e.indexOf("data:application/octet-stream;base64,")}t.preloadedImages={},t.preloadedAudios={};var Y,D,U="libphe.wasm";if(!K()){var M=U;U=t.locateFile?t.locateFile(M,n):n+M}function O(e,t){for(var r=0,n=e.length-1;0<=n;n--){var _=e[n];"."===_?e.splice(n,1):".."===_?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e}function G(e){var t="/"===e.charAt(0),r="/"===e.substr(-1);return(e=O(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e}function z(e){var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],e||t?(t&&(t=t.substr(0,t.length-1)),e+t):"."}function V(e){if("/"===e)return"/";var t=e.lastIndexOf("/");return-1===t?e:e.substr(t+1)}function q(){for(var e="",t=!1,r=arguments.length-1;-1<=r&&!t;r--){if("string"!=typeof(t=0<=r?arguments[r]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t="/"===t.charAt(0)}return(t?"/":"")+(e=O(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."}g.push({Fc:function(){Me()}});var W=[];function $(e,t){W[e]={input:[],output:[],nc:t},Pe(e,j)}var j={open:function(e){var t=W[e.node.rdev];if(!t)throw new ce(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.nc.flush(e.tty)},flush:function(e){e.tty.nc.flush(e.tty)},read:function(e,t,r,n){if(!e.tty||!e.tty.nc.zc)throw new ce(60);for(var _=0,s=0;s<n;s++){try{var c=e.tty.nc.zc(e.tty)}catch(e){throw new ce(29)}if(void 0===c&&0===_)throw new ce(6);if(null==c)break;_++,t[r+s]=c}return _&&(e.node.timestamp=Date.now()),_},write:function(e,t,r,n){if(!e.tty||!e.tty.nc.sc)throw new ce(60);try{for(var _=0;_<n;_++)e.tty.nc.sc(e.tty,t[r+_])}catch(e){throw new ce(29)}return n&&(e.node.timestamp=Date.now()),_}},Z={zc:function(e){if(!e.input.length){var t=null,r=Buffer.Ec?Buffer.Ec(256):new Buffer(256),n=0;try{n=c.readSync(process.stdin.fd,r,0,256,null)}catch(e){if(-1==e.toString().indexOf("EOF"))throw e;n=0}if(!(t=0<n?r.slice(0,n).toString("utf-8"):null))return null;for(n=r=0;n<t.length;++n){var _=t.charCodeAt(n);55296<=_&&57343>=_&&(_=65536+((1023&_)<<10)|1023&t.charCodeAt(++n)),127>=_?++r:r=2047>=_?r+2:65535>=_?r+3:r+4}var s=(r=Array(r+1)).length;if(n=0,0<s){_=n,s=n+s-1;for(var a=0;a<t.length;++a){var o=t.charCodeAt(a);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++a)),127>=o){if(n>=s)break;r[n++]=o}else{if(2047>=o){if(n+1>=s)break;r[n++]=192|o>>6}else{if(65535>=o){if(n+2>=s)break;r[n++]=224|o>>12}else{if(n+3>=s)break;r[n++]=240|o>>18,r[n++]=128|o>>12&63}r[n++]=128|o>>6&63}r[n++]=128|63&o}}r[n]=0,t=n-_}else t=0;r.length=t,e.input=r}return e.input.shift()},sc:function(e,t){null===t||10===t?(u(w(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&0<e.output.length&&(u(w(e.output,0)),e.output=[])}},X={sc:function(e,t){null===t||10===t?(l(w(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&0<e.output.length&&(l(w(e.output,0)),e.output=[])}},J={hc:null,jc:function(){return J.createNode(null,"/",16895,0)},createNode:function(e,t,r,n){if(24576==(61440&r)||4096==(61440&r))throw new ce(63);return J.hc||(J.hc={dir:{node:{kc:J.ec.kc,ic:J.ec.ic,lookup:J.ec.lookup,oc:J.ec.oc,rename:J.ec.rename,unlink:J.ec.unlink,rmdir:J.ec.rmdir,readdir:J.ec.readdir,symlink:J.ec.symlink},stream:{mc:J.fc.mc}},file:{node:{kc:J.ec.kc,ic:J.ec.ic},stream:{mc:J.fc.mc,read:J.fc.read,write:J.fc.write,uc:J.fc.uc,Ac:J.fc.Ac,Cc:J.fc.Cc}},link:{node:{kc:J.ec.kc,ic:J.ec.ic,readlink:J.ec.readlink},stream:{}},vc:{node:{kc:J.ec.kc,ic:J.ec.ic},stream:Ee}}),16384==(61440&(r=fe(e,t,r,n)).mode)?(r.ec=J.hc.dir.node,r.fc=J.hc.dir.stream,r.dc={}):32768==(61440&r.mode)?(r.ec=J.hc.file.node,r.fc=J.hc.file.stream,r.gc=0,r.dc=null):40960==(61440&r.mode)?(r.ec=J.hc.link.node,r.fc=J.hc.link.stream):8192==(61440&r.mode)&&(r.ec=J.hc.vc.node,r.fc=J.hc.vc.stream),r.timestamp=Date.now(),e&&(e.dc[t]=r),r},Nc:function(e){if(e.dc&&e.dc.subarray){for(var t=[],r=0;r<e.gc;++r)t.push(e.dc[r]);return t}return e.dc},Oc:function(e){return e.dc?e.dc.subarray?e.dc.subarray(0,e.gc):new Uint8Array(e.dc):new Uint8Array(0)},wc:function(e,t){var r=e.dc?e.dc.length:0;r>=t||(t=Math.max(t,r*(1048576>r?2:1.125)|0),0!=r&&(t=Math.max(t,256)),r=e.dc,e.dc=new Uint8Array(t),0<e.gc&&e.dc.set(r.subarray(0,e.gc),0))},Jc:function(e,t){if(e.gc!=t)if(0==t)e.dc=null,e.gc=0;else{if(!e.dc||e.dc.subarray){var r=e.dc;e.dc=new Uint8Array(t),r&&e.dc.set(r.subarray(0,Math.min(t,e.gc)))}else if(e.dc||(e.dc=[]),e.dc.length>t)e.dc.length=t;else for(;e.dc.length<t;)e.dc.push(0);e.gc=t}},ec:{kc:function(e){var t={};return t.dev=8192==(61440&e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,16384==(61440&e.mode)?t.size=4096:32768==(61440&e.mode)?t.size=e.gc:40960==(61440&e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.Dc=4096,t.blocks=Math.ceil(t.size/t.Dc),t},ic:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&J.Jc(e,t.size)},lookup:function(){throw ae[44]},oc:function(e,t,r,n){return J.createNode(e,t,r,n)},rename:function(e,t,r){if(16384==(61440&e.mode)){try{var n=le(t,r)}catch(e){}if(n)for(var _ in n.dc)throw new ce(55)}delete e.parent.dc[e.name],e.name=r,t.dc[r]=e,e.parent=t},unlink:function(e,t){delete e.dc[t]},rmdir:function(e,t){var r,n=le(e,t);for(r in n.dc)throw new ce(55);delete e.dc[t]},readdir:function(e){var t,r=[".",".."];for(t in e.dc)e.dc.hasOwnProperty(t)&&r.push(t);return r},symlink:function(e,t,r){return(e=J.createNode(e,t,41471,0)).link=r,e},readlink:function(e){if(40960!=(61440&e.mode))throw new ce(28);return e.link}},fc:{read:function(e,t,r,n,_){var s=e.node.dc;if(_>=e.node.gc)return 0;if(8<(e=Math.min(e.node.gc-_,n))&&s.subarray)t.set(s.subarray(_,_+e),r);else for(n=0;n<e;n++)t[r+n]=s[_+n];return e},write:function(e,t,r,n,_,s){if(t.buffer===h.buffer&&(s=!1),!n)return 0;if((e=e.node).timestamp=Date.now(),t.subarray&&(!e.dc||e.dc.subarray)){if(s)return e.dc=t.subarray(r,r+n),e.gc=n;if(0===e.gc&&0===_)return e.dc=t.slice(r,r+n),e.gc=n;if(_+n<=e.gc)return e.dc.set(t.subarray(r,r+n),_),n}if(J.wc(e,_+n),e.dc.subarray&&t.subarray)e.dc.set(t.subarray(r,r+n),_);else for(s=0;s<n;s++)e.dc[_+s]=t[r+s];return e.gc=Math.max(e.gc,_+n),n},mc:function(e,t,r){if(1===r?t+=e.position:2===r&&32768==(61440&e.node.mode)&&(t+=e.node.gc),0>t)throw new ce(28);return t},uc:function(e,t,r){J.wc(e.node,t+r),e.node.gc=Math.max(e.node.gc,t+r)},Ac:function(e,t,r,n,_,s,c){if(32768!=(61440&e.node.mode))throw new ce(43);if(e=e.node.dc,2&c||e.buffer!==t.buffer){if((0<_||_+n<e.length)&&(e=e.subarray?e.subarray(_,_+n):Array.prototype.slice.call(e,_,_+n)),_=!0,c=t.buffer==h.buffer,!(n=Ge(n)))throw new ce(48);(c?h:t).set(e,n)}else _=!1,n=e.byteOffset;return{Qc:n,Mc:_}},Cc:function(e,t,r,n,_){if(32768!=(61440&e.node.mode))throw new ce(43);return 2&_||J.fc.write(e,t,0,n,r,!1),0}}},Q=null,ee={},te=[],re=1,ne=null,_e=!0,se={},ce=null,ae={};function oe(e,t){if(t=t||{},!(e=q("/",e)))return{path:"",node:null};var r,n={yc:!0,tc:0};for(r in n)void 0===t[r]&&(t[r]=n[r]);if(8<t.tc)throw new ce(32);e=O(e.split("/").filter((function(e){return!!e})),!1);var _=Q;for(n="/",r=0;r<e.length;r++){var s=r===e.length-1;if(s&&t.parent)break;if(_=le(_,e[r]),n=G(n+"/"+e[r]),_.pc&&(!s||s&&t.yc)&&(_=_.pc.root),!s||t.xc)for(s=0;40960==(61440&_.mode);)if(_=ge(n),_=oe(n=q(z(n),_),{tc:t.tc}).node,40<s++)throw new ce(32)}return{path:n,node:_}}function ie(e){for(var t;;){if(e===e.parent)return e=e.jc.Bc,t?"/"!==e[e.length-1]?e+"/"+t:e+t:e;t=t?e.name+"/"+t:e.name,e=e.parent}}function ue(e,t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%ne.length}function le(e,t){var r;if(r=(r=pe(e,"x"))?r:e.ec.lookup?0:2)throw new ce(r,e);for(r=ne[ue(e.id,t)];r;r=r.Ic){var n=r.name;if(r.parent.id===e.id&&n===t)return r}return e.ec.lookup(e,t)}function fe(e,t,r,n){return t=ue((e=new Ye(e,t,r,n)).parent.id,e.name),e.Ic=ne[t],ne[t]=e}var de={r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218};function he(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t}function pe(e,t){return _e||(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:2}function ve(e,t){try{return le(e,t),20}catch(e){}return pe(e,"wx")}function me(e,t){Se||((Se=function(){}).prototype={});var r,n=new Se;for(r in e)n[r]=e[r];return e=n,t=function(e){for(e=e||0;e<=4096;e++)if(!te[e])return e;throw new ce(33)}(t),e.fd=t,te[t]=e}var ye,Ee={open:function(e){e.fc=ee[e.node.rdev].fc,e.fc.open&&e.fc.open(e)},mc:function(){throw new ce(70)}};function Pe(e,t){ee[e]={fc:t}}function we(e,t){var r="/"===t,n=!t;if(r&&Q)throw new ce(10);if(!r&&!n){var _=oe(t,{yc:!1});if(t=_.path,(_=_.node).pc)throw new ce(10);if(16384!=(61440&_.mode))throw new ce(54)}t={type:e,Pc:{},Bc:t,Hc:[]},(e=e.jc(t)).jc=t,t.root=e,r?Q=e:_&&(_.pc=t,_.jc&&_.jc.Hc.push(t))}function xe(e,t,r){var n=oe(e,{parent:!0}).node;if(!(e=V(e))||"."===e||".."===e)throw new ce(28);var _=ve(n,e);if(_)throw new ce(_);if(!n.ec.oc)throw new ce(63);return n.ec.oc(n,e,t,r)}function Ae(e){xe(e,16895,0)}function be(e,t,r){void 0===r&&(r=t,t=438),xe(e,8192|t,r)}function Ne(e,t){if(!q(e))throw new ce(44);var r=oe(t,{parent:!0}).node;if(!r)throw new ce(44);var n=ve(r,t=V(t));if(n)throw new ce(n);if(!r.ec.symlink)throw new ce(63);r.ec.symlink(r,t,e)}function ge(e){if(!(e=oe(e).node))throw new ce(44);if(!e.ec.readlink)throw new ce(28);return q(ie(e.parent),e.ec.readlink(e))}function Te(e,r,n,_){if(""===e)throw new ce(44);if("string"==typeof r){var s=de[r];if(void 0===s)throw Error("Unknown file open mode: "+r);r=s}if(n=64&r?4095&(void 0===n?438:n)|32768:0,"object"==typeof e)var c=e;else{e=G(e);try{c=oe(e,{xc:!(131072&r)}).node}catch(e){}}if(s=!1,64&r)if(c){if(128&r)throw new ce(20)}else c=xe(e,n,0),s=!0;if(!c)throw new ce(44);if(8192==(61440&c.mode)&&(r&=-513),65536&r&&16384!=(61440&c.mode))throw new ce(54);if(!s&&(n=c?40960==(61440&c.mode)?32:16384==(61440&c.mode)&&("r"!==he(r)||512&r)?31:pe(c,he(r)):44))throw new ce(n);if(512&r){var a;if(!(a="string"==typeof(n=c)?oe(n,{xc:!0}).node:n).ec.ic)throw new ce(63);if(16384==(61440&a.mode))throw new ce(31);if(32768!=(61440&a.mode))throw new ce(28);if(n=pe(a,"w"))throw new ce(n);a.ec.ic(a,{size:0,timestamp:Date.now()})}r&=-641,(_=me({node:c,path:ie(c),flags:r,seekable:!0,position:0,fc:c.fc,Lc:[],error:!1},_)).fc.open&&_.fc.open(_),!t.logReadFiles||1&r||(He||(He={}),e in He||(He[e]=1,l("FS.trackingDelegate error on read file: "+e)));try{se.onOpenFile&&(c=0,1!=(2097155&r)&&(c|=1),0!=(2097155&r)&&(c|=2),se.onOpenFile(e,c))}catch(t){l("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+t.message)}return _}function ke(e,t,r){if(null===e.fd)throw new ce(8);if(!e.seekable||!e.fc.mc)throw new ce(70);if(0!=r&&1!=r&&2!=r)throw new ce(28);e.position=e.fc.mc(e,t,r),e.Lc=[]}function Ce(){ce||((ce=function(e,t){this.node=t,this.Kc=function(e){this.lc=e},this.Kc(e),this.message="FS error"}).prototype=Error(),ce.prototype.constructor=ce,[44].forEach((function(e){ae[e]=new ce(e),ae[e].stack="<generic error, no stack>"})))}function Ie(e,t,r){e=G("/dev/"+e);var n=function(e,t){var r=0;return e&&(r|=365),t&&(r|=146),r}(!!t,!!r);Re||(Re=64);var _=Re++<<8|0;Pe(_,{open:function(e){e.seekable=!1},close:function(){r&&r.buffer&&r.buffer.length&&r(10)},read:function(e,r,n,_){for(var s=0,c=0;c<_;c++){try{var a=t()}catch(e){throw new ce(29)}if(void 0===a&&0===s)throw new ce(6);if(null==a)break;s++,r[n+c]=a}return s&&(e.node.timestamp=Date.now()),s},write:function(e,t,n,_){for(var s=0;s<_;s++)try{r(t[n+s])}catch(e){throw new ce(29)}return _&&(e.node.timestamp=Date.now()),s}}),be(e,n,_)}var Re,Se,He,Le={},Fe=void 0;function Be(){return m[(Fe+=4)-4>>2]}function Ke(e){if(!(e=te[e]))throw new ce(8);return e}function Ye(e,t,r,n){e||(e=this),this.parent=e,this.jc=e.jc,this.pc=null,this.id=re++,this.name=t,this.mode=r,this.ec={},this.fc={},this.rdev=n}Object.defineProperties(Ye.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}}}),Ce(),ne=Array(4096),we(J,"/"),Ae("/tmp"),Ae("/home"),Ae("/home/web_user"),function(){if(Ae("/dev"),Pe(259,{read:function(){return 0},write:function(e,t,r,n){return n}}),be("/dev/null",259),$(1280,Z),$(1536,X),be("/dev/tty",1280),be("/dev/tty1",1536),"object"==typeof crypto&&"function"==typeof crypto.getRandomValues)var e=new Uint8Array(1),t=function(){return crypto.getRandomValues(e),e[0]};else try{var r=require("crypto");t=function(){return r.randomBytes(1)[0]}}catch(e){}t||(t=function(){B("random_device")}),Ie("random",t),Ie("urandom",t),Ae("/dev/shm"),Ae("/dev/shm/tmp")}(),Ae("/proc"),Ae("/proc/self"),Ae("/proc/self/fd"),we({jc:function(){var e=fe("/proc/self","fd",16895,73);return e.ec={lookup:function(e,t){var r=te[+t];if(!r)throw new ce(8);return(e={parent:null,jc:{Bc:"fake"},ec:{readlink:function(){return r.path}}}).parent=e}},e}},"/proc/self/fd");var De={b:function(e,r,n){Fe=n;try{var _=Ke(e);switch(r){case 0:var s=Be();return 0>s?-28:Te(_.path,_.flags,0,s).fd;case 1:case 2:return 0;case 3:return _.flags;case 4:return s=Be(),_.flags|=s,0;case 12:return s=Be(),v[s+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return t.___errno_location&&(m[t.___errno_location()>>2]=28),-1;default:return-28}}catch(e){return void 0!==Le&&e instanceof ce||B(e),-e.lc}},h:function(e,t,r){Fe=r;try{return Te(e?w(p,e,void 0):"",t,Be()).fd}catch(e){return void 0!==Le&&e instanceof ce||B(e),-e.lc}},g:function(e,t,r){Fe=r;try{var n=Ke(e);switch(t){case 21509:case 21505:return n.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return n.tty?0:-59;case 21519:if(!n.tty)return-59;var _=Be();return m[_>>2]=0;case 21520:return n.tty?-28:-59;case 21531:if(e=_=Be(),!n.fc.Gc)throw new ce(59);return n.fc.Gc(n,t,e);case 21523:case 21524:return n.tty?0:-59;default:B("bad ioctl syscall "+t)}}catch(e){return void 0!==Le&&e instanceof ce||B(e),-e.lc}},a:function(){B()},j:function(e,t,r){p.copyWithin(e,t,t+r)},k:function(e){var t=p.length;if(2147418112<e)return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296),0<(n=Math.max(16777216,e,n))%65536&&(n+=65536-n%65536);e:{try{f.grow(Math.min(2147418112,n)-d.byteLength+65535>>16),x(f.buffer);var _=1;break e}catch(e){}_=void 0}if(_)return!0}return!1},e:function(e){try{var t=Ke(e);if(null===t.fd)throw new ce(8);t.rc&&(t.rc=null);try{t.fc.close&&t.fc.close(t)}catch(e){throw e}finally{te[t.fd]=null}return t.fd=null,0}catch(e){return void 0!==Le&&e instanceof ce||B(e),e.lc}},f:function(e,t,r,n){try{e:{for(var _=Ke(e),s=e=0;s<r;s++){var c=m[t+(8*s+4)>>2],a=_,o=m[t+8*s>>2],i=c,u=void 0,l=h;if(0>i||0>u)throw new ce(28);if(null===a.fd)throw new ce(8);if(1==(2097155&a.flags))throw new ce(8);if(16384==(61440&a.node.mode))throw new ce(31);if(!a.fc.read)throw new ce(28);var f=void 0!==u;if(f){if(!a.seekable)throw new ce(70)}else u=a.position;var d=a.fc.read(a,l,o,i,u);f||(a.position+=d);var p=d;if(0>p){var v=-1;break e}if(e+=p,p<c)break}v=e}return m[n>>2]=v,0}catch(e){return void 0!==Le&&e instanceof ce||B(e),e.lc}},i:function(e,t,r,n,_){try{var s=Ke(e);return-9007199254740992>=(e=4294967296*r+(t>>>0))||9007199254740992<=e?-61:(ke(s,e,n),D=[s.position>>>0,(Y=s.position,1<=+I(Y)?0<Y?(0|H(+S(Y/4294967296),4294967295))>>>0:~~+R((Y-+(~~Y>>>0))/4294967296)>>>0:0)],m[_>>2]=D[0],m[_+4>>2]=D[1],s.rc&&0===e&&0===n&&(s.rc=null),0)}catch(e){return void 0!==Le&&e instanceof ce||B(e),e.lc}},d:function(e,t,r,n){try{e:{for(var _=Ke(e),s=e=0;s<r;s++){var c=_,a=m[t+8*s>>2],o=m[t+(8*s+4)>>2],i=void 0,u=h;if(0>o||0>i)throw new ce(28);if(null===c.fd)throw new ce(8);if(0==(2097155&c.flags))throw new ce(8);if(16384==(61440&c.node.mode))throw new ce(31);if(!c.fc.write)throw new ce(28);1024&c.flags&&ke(c,0,2);var f=void 0!==i;if(f){if(!c.seekable)throw new ce(70)}else i=c.position;var d=c.fc.write(c,u,a,o,i,void 0);f||(c.position+=d);try{c.path&&se.onWriteToFile&&se.onWriteToFile(c.path)}catch(e){l("FS.trackingDelegate['onWriteToFile']('"+c.path+"') threw an exception: "+e.message)}var p=d;if(0>p){var v=-1;break e}e+=p}v=e}return m[n>>2]=v,0}catch(e){return void 0!==Le&&e instanceof ce||B(e),e.lc}},c:function(e){var t=Date.now();return m[e>>2]=t/1e3|0,m[e+4>>2]=t%1e3*1e3|0,0},memory:f,table:y},Ue=function(){function e(e){t.asm=e.exports,L--,t.monitorRunDependencies&&t.monitorRunDependencies(L),0==L&&F&&(e=F,F=null,e())}function r(t){e(t.instance)}function n(e){return new Promise((function(e){e:{try{if(i){var t=new Uint8Array(i);break e}if(s){t=s(U);break e}throw"both async and sync fetching of the wasm failed"}catch(e){B(e)}t=void 0}e(t)})).then((function(e){return WebAssembly.instantiate(e,_)})).then(e,(function(e){l("failed to asynchronously prepare wasm: "+e),B(e)}))}var _={a:De};if(L++,t.monitorRunDependencies&&t.monitorRunDependencies(L),t.instantiateWasm)try{return t.instantiateWasm(_,e)}catch(e){return l("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(i||"function"!=typeof WebAssembly.instantiateStreaming||K()||"function"!=typeof fetch)return n(r);fetch(U,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,_).then(r,(function(e){l("wasm streaming compile failed: "+e),l("falling back to ArrayBuffer instantiation"),n(r)}))}))}(),{}}();t.asm=Ue;var Me=t.___wasm_call_ctors=function(){return(Me=t.___wasm_call_ctors=t.asm.l).apply(null,arguments)};t._vsce_error_ctx_size=function(){return(t._vsce_error_ctx_size=t.asm.m).apply(null,arguments)},t._vsce_error_reset=function(){return(t._vsce_error_reset=t.asm.n).apply(null,arguments)},t._vsce_error_status=function(){return(t._vsce_error_status=t.asm.o).apply(null,arguments)},t._vsce_phe_cipher_release_random=function(){return(t._vsce_phe_cipher_release_random=t.asm.p).apply(null,arguments)},t._vsce_phe_cipher_new=function(){return(t._vsce_phe_cipher_new=t.asm.q).apply(null,arguments)},t._vsce_phe_cipher_delete=function(){return(t._vsce_phe_cipher_delete=t.asm.r).apply(null,arguments)},t._vsce_phe_cipher_shallow_copy=function(){return(t._vsce_phe_cipher_shallow_copy=t.asm.s).apply(null,arguments)},t._vsce_phe_cipher_use_random=function(){return(t._vsce_phe_cipher_use_random=t.asm.t).apply(null,arguments)},t._vsce_phe_cipher_setup_defaults=function(){return(t._vsce_phe_cipher_setup_defaults=t.asm.u).apply(null,arguments)},t._vsce_phe_cipher_encrypt_len=function(){return(t._vsce_phe_cipher_encrypt_len=t.asm.v).apply(null,arguments)},t._vsce_phe_cipher_decrypt_len=function(){return(t._vsce_phe_cipher_decrypt_len=t.asm.w).apply(null,arguments)},t._vsce_phe_cipher_encrypt=function(){return(t._vsce_phe_cipher_encrypt=t.asm.x).apply(null,arguments)},t._vsce_phe_cipher_auth_encrypt=function(){return(t._vsce_phe_cipher_auth_encrypt=t.asm.y).apply(null,arguments)},t._vsce_phe_cipher_decrypt=function(){return(t._vsce_phe_cipher_decrypt=t.asm.z).apply(null,arguments)},t._vsce_phe_cipher_auth_decrypt=function(){return(t._vsce_phe_cipher_auth_decrypt=t.asm.A).apply(null,arguments)},t._vsce_phe_client_release_random=function(){return(t._vsce_phe_client_release_random=t.asm.B).apply(null,arguments)},t._vsce_phe_client_release_operation_random=function(){return(t._vsce_phe_client_release_operation_random=t.asm.C).apply(null,arguments)},t._vsce_phe_client_new=function(){return(t._vsce_phe_client_new=t.asm.D).apply(null,arguments)},t._vsce_phe_client_delete=function(){return(t._vsce_phe_client_delete=t.asm.E).apply(null,arguments)},t._vsce_phe_client_shallow_copy=function(){return(t._vsce_phe_client_shallow_copy=t.asm.F).apply(null,arguments)},t._vsce_phe_client_use_random=function(){return(t._vsce_phe_client_use_random=t.asm.G).apply(null,arguments)},t._vsce_phe_client_use_operation_random=function(){return(t._vsce_phe_client_use_operation_random=t.asm.H).apply(null,arguments)},t._vsce_phe_client_setup_defaults=function(){return(t._vsce_phe_client_setup_defaults=t.asm.I).apply(null,arguments)},t._vsce_phe_client_set_keys=function(){return(t._vsce_phe_client_set_keys=t.asm.J).apply(null,arguments)},t._vsce_phe_client_generate_client_private_key=function(){return(t._vsce_phe_client_generate_client_private_key=t.asm.K).apply(null,arguments)},t._vsce_phe_client_enrollment_record_len=function(){return(t._vsce_phe_client_enrollment_record_len=t.asm.L).apply(null,arguments)},t._vsce_phe_client_enroll_account=function(){return(t._vsce_phe_client_enroll_account=t.asm.M).apply(null,arguments)},t._vsce_phe_client_verify_password_request_len=function(){return(t._vsce_phe_client_verify_password_request_len=t.asm.N).apply(null,arguments)},t._vsce_phe_client_create_verify_password_request=function(){return(t._vsce_phe_client_create_verify_password_request=t.asm.O).apply(null,arguments)},t._vsce_phe_client_check_response_and_decrypt=function(){return(t._vsce_phe_client_check_response_and_decrypt=t.asm.P).apply(null,arguments)},t._vsce_phe_client_rotate_keys=function(){return(t._vsce_phe_client_rotate_keys=t.asm.Q).apply(null,arguments)},t._vsce_phe_client_update_enrollment_record=function(){return(t._vsce_phe_client_update_enrollment_record=t.asm.R).apply(null,arguments)},t._vsce_phe_server_release_random=function(){return(t._vsce_phe_server_release_random=t.asm.S).apply(null,arguments)},t._vsce_phe_server_release_operation_random=function(){return(t._vsce_phe_server_release_operation_random=t.asm.T).apply(null,arguments)},t._vsce_phe_server_new=function(){return(t._vsce_phe_server_new=t.asm.U).apply(null,arguments)},t._vsce_phe_server_delete=function(){return(t._vsce_phe_server_delete=t.asm.V).apply(null,arguments)},t._vsce_phe_server_shallow_copy=function(){return(t._vsce_phe_server_shallow_copy=t.asm.W).apply(null,arguments)},t._vsce_phe_server_use_random=function(){return(t._vsce_phe_server_use_random=t.asm.X).apply(null,arguments)},t._vsce_phe_server_use_operation_random=function(){return(t._vsce_phe_server_use_operation_random=t.asm.Y).apply(null,arguments)},t._vsce_phe_server_setup_defaults=function(){return(t._vsce_phe_server_setup_defaults=t.asm.Z).apply(null,arguments)},t._vsce_phe_server_generate_server_key_pair=function(){return(t._vsce_phe_server_generate_server_key_pair=t.asm._).apply(null,arguments)},t._vsce_phe_server_enrollment_response_len=function(){return(t._vsce_phe_server_enrollment_response_len=t.asm.$).apply(null,arguments)},t._vsce_phe_server_get_enrollment=function(){return(t._vsce_phe_server_get_enrollment=t.asm.aa).apply(null,arguments)},t._vsce_phe_server_verify_password_response_len=function(){return(t._vsce_phe_server_verify_password_response_len=t.asm.ba).apply(null,arguments)},t._vsce_phe_server_verify_password=function(){return(t._vsce_phe_server_verify_password=t.asm.ca).apply(null,arguments)},t._vsce_phe_server_update_token_len=function(){return(t._vsce_phe_server_update_token_len=t.asm.da).apply(null,arguments)},t._vsce_phe_server_rotate_keys=function(){return(t._vsce_phe_server_rotate_keys=t.asm.ea).apply(null,arguments)},t._vsce_uokms_client_release_random=function(){return(t._vsce_uokms_client_release_random=t.asm.fa).apply(null,arguments)},t._vsce_uokms_client_release_operation_random=function(){return(t._vsce_uokms_client_release_operation_random=t.asm.ga).apply(null,arguments)},t._vsce_uokms_client_new=function(){return(t._vsce_uokms_client_new=t.asm.ha).apply(null,arguments)},t._vsce_uokms_client_delete=function(){return(t._vsce_uokms_client_delete=t.asm.ia).apply(null,arguments)},t._vsce_uokms_client_shallow_copy=function(){return(t._vsce_uokms_client_shallow_copy=t.asm.ja).apply(null,arguments)},t._vsce_uokms_client_use_random=function(){return(t._vsce_uokms_client_use_random=t.asm.ka).apply(null,arguments)},t._vsce_uokms_client_use_operation_random=function(){return(t._vsce_uokms_client_use_operation_random=t.asm.la).apply(null,arguments)},t._vsce_uokms_client_setup_defaults=function(){return(t._vsce_uokms_client_setup_defaults=t.asm.ma).apply(null,arguments)},t._vsce_uokms_client_set_keys_oneparty=function(){return(t._vsce_uokms_client_set_keys_oneparty=t.asm.na).apply(null,arguments)},t._vsce_uokms_client_set_keys=function(){return(t._vsce_uokms_client_set_keys=t.asm.oa).apply(null,arguments)},t._vsce_uokms_client_generate_client_private_key=function(){return(t._vsce_uokms_client_generate_client_private_key=t.asm.pa).apply(null,arguments)},t._vsce_uokms_client_generate_encrypt_wrap=function(){return(t._vsce_uokms_client_generate_encrypt_wrap=t.asm.qa).apply(null,arguments)},t._vsce_uokms_client_decrypt_oneparty=function(){return(t._vsce_uokms_client_decrypt_oneparty=t.asm.ra).apply(null,arguments)},t._vsce_uokms_client_generate_decrypt_request=function(){return(t._vsce_uokms_client_generate_decrypt_request=t.asm.sa).apply(null,arguments)},t._vsce_uokms_client_process_decrypt_response=function(){return(t._vsce_uokms_client_process_decrypt_response=t.asm.ta).apply(null,arguments)},t._vsce_uokms_client_rotate_keys_oneparty=function(){return(t._vsce_uokms_client_rotate_keys_oneparty=t.asm.ua).apply(null,arguments)},t._vsce_uokms_client_rotate_keys=function(){return(t._vsce_uokms_client_rotate_keys=t.asm.va).apply(null,arguments)},t._vsce_uokms_client_generate_update_token_oneparty=function(){return(t._vsce_uokms_client_generate_update_token_oneparty=t.asm.wa).apply(null,arguments)},t._vsce_uokms_server_release_random=function(){return(t._vsce_uokms_server_release_random=t.asm.xa).apply(null,arguments)},t._vsce_uokms_server_release_operation_random=function(){return(t._vsce_uokms_server_release_operation_random=t.asm.ya).apply(null,arguments)},t._vsce_uokms_server_new=function(){return(t._vsce_uokms_server_new=t.asm.za).apply(null,arguments)},t._vsce_uokms_server_delete=function(){return(t._vsce_uokms_server_delete=t.asm.Aa).apply(null,arguments)},t._vsce_uokms_server_shallow_copy=function(){return(t._vsce_uokms_server_shallow_copy=t.asm.Ba).apply(null,arguments)},t._vsce_uokms_server_use_random=function(){return(t._vsce_uokms_server_use_random=t.asm.Ca).apply(null,arguments)},t._vsce_uokms_server_use_operation_random=function(){return(t._vsce_uokms_server_use_operation_random=t.asm.Da).apply(null,arguments)},t._vsce_uokms_server_setup_defaults=function(){return(t._vsce_uokms_server_setup_defaults=t.asm.Ea).apply(null,arguments)},t._vsce_uokms_server_generate_server_key_pair=function(){return(t._vsce_uokms_server_generate_server_key_pair=t.asm.Fa).apply(null,arguments)},t._vsce_uokms_server_decrypt_response_len=function(){return(t._vsce_uokms_server_decrypt_response_len=t.asm.Ga).apply(null,arguments)},t._vsce_uokms_server_process_decrypt_request=function(){return(t._vsce_uokms_server_process_decrypt_request=t.asm.Ha).apply(null,arguments)},t._vsce_uokms_server_rotate_keys=function(){return(t._vsce_uokms_server_rotate_keys=t.asm.Ia).apply(null,arguments)},t._vsce_uokms_wrap_rotation_release_operation_random=function(){return(t._vsce_uokms_wrap_rotation_release_operation_random=t.asm.Ja).apply(null,arguments)},t._vsce_uokms_wrap_rotation_new=function(){return(t._vsce_uokms_wrap_rotation_new=t.asm.Ka).apply(null,arguments)},t._vsce_uokms_wrap_rotation_delete=function(){return(t._vsce_uokms_wrap_rotation_delete=t.asm.La).apply(null,arguments)},t._vsce_uokms_wrap_rotation_shallow_copy=function(){return(t._vsce_uokms_wrap_rotation_shallow_copy=t.asm.Ma).apply(null,arguments)},t._vsce_uokms_wrap_rotation_use_operation_random=function(){return(t._vsce_uokms_wrap_rotation_use_operation_random=t.asm.Na).apply(null,arguments)},t._vsce_uokms_wrap_rotation_setup_defaults=function(){return(t._vsce_uokms_wrap_rotation_setup_defaults=t.asm.Oa).apply(null,arguments)},t._vsce_uokms_wrap_rotation_set_update_token=function(){return(t._vsce_uokms_wrap_rotation_set_update_token=t.asm.Pa).apply(null,arguments)},t._vsce_uokms_wrap_rotation_update_wrap=function(){return(t._vsce_uokms_wrap_rotation_update_wrap=t.asm.Qa).apply(null,arguments)},t._vscf_impl_api=function(){return(t._vscf_impl_api=t.asm.Ra).apply(null,arguments)},t._vscf_impl_tag=function(){return(t._vscf_impl_tag=t.asm.Sa).apply(null,arguments)},t._vscf_impl_shallow_copy=function(){return(t._vscf_impl_shallow_copy=t.asm.Ta).apply(null,arguments)},t._vscf_ctr_drbg_setup_defaults=function(){return(t._vscf_ctr_drbg_setup_defaults=t.asm.Ua).apply(null,arguments)},t._vscf_ctr_drbg_enable_prediction_resistance=function(){return(t._vscf_ctr_drbg_enable_prediction_resistance=t.asm.Va).apply(null,arguments)},t._vscf_ctr_drbg_set_reseed_interval=function(){return(t._vscf_ctr_drbg_set_reseed_interval=t.asm.Wa).apply(null,arguments)},t._vscf_ctr_drbg_set_entropy_len=function(){return(t._vscf_ctr_drbg_set_entropy_len=t.asm.Xa).apply(null,arguments)},t._vscf_ctr_drbg_random=function(){return(t._vscf_ctr_drbg_random=t.asm.Ya).apply(null,arguments)},t._vscf_ctr_drbg_reseed=function(){return(t._vscf_ctr_drbg_reseed=t.asm.Za).apply(null,arguments)},t._vscf_ctr_drbg_release_entropy_source=function(){return(t._vscf_ctr_drbg_release_entropy_source=t.asm._a).apply(null,arguments)},t._vscf_ctr_drbg_new=function(){return(t._vscf_ctr_drbg_new=t.asm.$a).apply(null,arguments)},t._vscf_ctr_drbg_delete=function(){return(t._vscf_ctr_drbg_delete=t.asm.ab).apply(null,arguments)},t._vscf_ctr_drbg_shallow_copy=function(){return(t._vscf_ctr_drbg_shallow_copy=t.asm.bb).apply(null,arguments)},t._vscf_ctr_drbg_use_entropy_source=function(){return(t._vscf_ctr_drbg_use_entropy_source=t.asm.cb).apply(null,arguments)},t._vscf_hkdf_alg_id=function(){return(t._vscf_hkdf_alg_id=t.asm.db).apply(null,arguments)},t._vscf_hkdf_produce_alg_info=function(){return(t._vscf_hkdf_produce_alg_info=t.asm.eb).apply(null,arguments)},t._vscf_hkdf_restore_alg_info=function(){return(t._vscf_hkdf_restore_alg_info=t.asm.fb).apply(null,arguments)},t._vscf_hkdf_derive=function(){return(t._vscf_hkdf_derive=t.asm.gb).apply(null,arguments)},t._vscf_hkdf_reset=function(){return(t._vscf_hkdf_reset=t.asm.hb).apply(null,arguments)},t._vscf_hkdf_set_info=function(){return(t._vscf_hkdf_set_info=t.asm.ib).apply(null,arguments)},t._vscf_hkdf_release_hash=function(){return(t._vscf_hkdf_release_hash=t.asm.jb).apply(null,arguments)},t._vscf_hkdf_new=function(){return(t._vscf_hkdf_new=t.asm.kb).apply(null,arguments)},t._vscf_hkdf_delete=function(){return(t._vscf_hkdf_delete=t.asm.lb).apply(null,arguments)},t._vscf_hkdf_shallow_copy=function(){return(t._vscf_hkdf_shallow_copy=t.asm.mb).apply(null,arguments)},t._vscf_hkdf_use_hash=function(){return(t._vscf_hkdf_use_hash=t.asm.nb).apply(null,arguments)},t._vscf_hmac_alg_id=function(){return(t._vscf_hmac_alg_id=t.asm.ob).apply(null,arguments)},t._vscf_hmac_produce_alg_info=function(){return(t._vscf_hmac_produce_alg_info=t.asm.pb).apply(null,arguments)},t._vscf_hmac_restore_alg_info=function(){return(t._vscf_hmac_restore_alg_info=t.asm.qb).apply(null,arguments)},t._vscf_hmac_digest_len=function(){return(t._vscf_hmac_digest_len=t.asm.rb).apply(null,arguments)},t._vscf_hmac_mac=function(){return(t._vscf_hmac_mac=t.asm.sb).apply(null,arguments)},t._vscf_hmac_start=function(){return(t._vscf_hmac_start=t.asm.tb).apply(null,arguments)},t._vscf_hmac_finish=function(){return(t._vscf_hmac_finish=t.asm.ub).apply(null,arguments)},t._vscf_hmac_update=function(){return(t._vscf_hmac_update=t.asm.vb).apply(null,arguments)},t._vscf_hmac_reset=function(){return(t._vscf_hmac_reset=t.asm.wb).apply(null,arguments)},t._vscf_hmac_release_hash=function(){return(t._vscf_hmac_release_hash=t.asm.xb).apply(null,arguments)},t._vscf_hmac_new=function(){return(t._vscf_hmac_new=t.asm.yb).apply(null,arguments)},t._vscf_hmac_delete=function(){return(t._vscf_hmac_delete=t.asm.zb).apply(null,arguments)},t._vscf_hmac_shallow_copy=function(){return(t._vscf_hmac_shallow_copy=t.asm.Ab).apply(null,arguments)},t._vscf_hmac_use_hash=function(){return(t._vscf_hmac_use_hash=t.asm.Bb).apply(null,arguments)},t._vscf_sha512_alg_id=function(){return(t._vscf_sha512_alg_id=t.asm.Cb).apply(null,arguments)},t._vscf_sha512_produce_alg_info=function(){return(t._vscf_sha512_produce_alg_info=t.asm.Db).apply(null,arguments)},t._vscf_sha512_restore_alg_info=function(){return(t._vscf_sha512_restore_alg_info=t.asm.Eb).apply(null,arguments)},t._vscf_sha512_hash=function(){return(t._vscf_sha512_hash=t.asm.Fb).apply(null,arguments)},t._vscf_sha512_finish=function(){return(t._vscf_sha512_finish=t.asm.Gb).apply(null,arguments)},t._vscf_sha512_start=function(){return(t._vscf_sha512_start=t.asm.Hb).apply(null,arguments)},t._vscf_sha512_update=function(){return(t._vscf_sha512_update=t.asm.Ib).apply(null,arguments)},t._vscf_sha512_new=function(){return(t._vscf_sha512_new=t.asm.Jb).apply(null,arguments)},t._vscf_sha512_delete=function(){return(t._vscf_sha512_delete=t.asm.Kb).apply(null,arguments)},t._vscf_sha512_shallow_copy=function(){return(t._vscf_sha512_shallow_copy=t.asm.Lb).apply(null,arguments)},t._vscf_error_ctx_size=function(){return(t._vscf_error_ctx_size=t.asm.Mb).apply(null,arguments)},t._vscf_error_reset=function(){return(t._vscf_error_reset=t.asm.Nb).apply(null,arguments)},t._vscf_error_status=function(){return(t._vscf_error_status=t.asm.Ob).apply(null,arguments)},t._vsc_buffer_new=function(){return(t._vsc_buffer_new=t.asm.Pb).apply(null,arguments)},t._vsc_buffer_new_with_capacity=function(){return(t._vsc_buffer_new_with_capacity=t.asm.Qb).apply(null,arguments)},t._vsc_buffer_delete=function(){return(t._vsc_buffer_delete=t.asm.Rb).apply(null,arguments)},t._vsc_buffer_data=function(){return(t._vsc_buffer_data=t.asm.Sb).apply(null,arguments)},t._vsc_buffer_make_secure=function(){return(t._vsc_buffer_make_secure=t.asm.Tb).apply(null,arguments)},t._vsc_buffer_bytes=function(){return(t._vsc_buffer_bytes=t.asm.Ub).apply(null,arguments)},t._vsc_buffer_len=function(){return(t._vsc_buffer_len=t.asm.Vb).apply(null,arguments)},t._vsc_data_ctx_size=function(){return(t._vsc_data_ctx_size=t.asm.Wb).apply(null,arguments)},t._vsc_data=function(){return(t._vsc_data=t.asm.Xb).apply(null,arguments)},t._vsc_data_len=function(){return(t._vsc_data_len=t.asm.Yb).apply(null,arguments)},t._vsc_data_bytes=function(){return(t._vsc_data_bytes=t.asm.Zb).apply(null,arguments)},t.___errno_location=function(){return(t.___errno_location=t.asm._b).apply(null,arguments)};var Oe,Ge=t._malloc=function(){return(Ge=t._malloc=t.asm.$b).apply(null,arguments)};function ze(){function e(){if(!Oe&&(Oe=!0,t.calledRun=!0,!E)){if(t.noFSInit||ye||(ye=!0,Ce(),t.stdin=t.stdin,t.stdout=t.stdout,t.stderr=t.stderr,t.stdin?Ie("stdin",t.stdin):Ne("/dev/tty","/dev/stdin"),t.stdout?Ie("stdout",null,t.stdout):Ne("/dev/tty","/dev/stdout"),t.stderr?Ie("stderr",null,t.stderr):Ne("/dev/tty1","/dev/stderr"),Te("/dev/stdin","r"),Te("/dev/stdout","w"),Te("/dev/stderr","w")),b(g),_e=!1,b(T),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();k.unshift(e)}b(k)}}if(!(0<L)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)C();b(N),0<L||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),e()}),1)):e())}}if(t._free=function(){return(t._free=t.asm.ac).apply(null,arguments)},t.stackAlloc=function(){return(t.stackAlloc=t.asm.bc).apply(null,arguments)},t.dynCall_vi=function(){return(t.dynCall_vi=t.asm.cc).apply(null,arguments)},t.asm=Ue,t.then=function(e){if(Oe)e(t);else{var r=t.onRuntimeInitialized;t.onRuntimeInitialized=function(){r&&r(),e(t)}}return t},F=function e(){Oe||ze(),Oe||(F=e)},t.run=ze,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return ze(),e});e.exports=n}));var t=(e,t)=>{class r extends Error{constructor(e){super(e),this.name="FoundationError",this.message=e}static handleStatusCode(e){if(0!=e){if(-1==e)throw new r("This error should not be returned if assertions is enabled.");if(-2==e)throw new r("Can be used to define that not all context prerequisites are satisfied. Note, this error should not be returned if assertions is enabled.");if(-3==e)throw new r("Define that error code from one of third-party module was not handled. Note, this error should not be returned if assertions is enabled.");if(-101==e)throw new r("Buffer capacity is not enough to hold result.");if(-200==e)throw new r("Unsupported algorithm.");if(-201==e)throw new r("Authentication failed during decryption.");if(-202==e)throw new r("Attempt to read data out of buffer bounds.");if(-203==e)throw new r("ASN.1 encoded data is corrupted.");if(-204==e)throw new r("Attempt to read ASN.1 type that is bigger then requested C type.");if(-205==e)throw new r("ASN.1 representation of PKCS#1 public key is corrupted.");if(-206==e)throw new r("ASN.1 representation of PKCS#1 private key is corrupted.");if(-207==e)throw new r("ASN.1 representation of PKCS#8 public key is corrupted.");if(-208==e)throw new r("ASN.1 representation of PKCS#8 private key is corrupted.");if(-209==e)throw new r("Encrypted data is corrupted.");if(-210==e)throw new r("Underlying random operation returns error.");if(-211==e)throw new r("Generation of the private or secret key failed.");if(-212==e)throw new r("One of the entropy sources failed.");if(-213==e)throw new r("Requested data to be generated is too big.");if(-214==e)throw new r("Base64 encoded string contains invalid characters.");if(-215==e)throw new r("PEM data is corrupted.");if(-216==e)throw new r("Exchange key return zero.");if(-217==e)throw new r("Ed25519 public key is corrupted.");if(-218==e)throw new r("Ed25519 private key is corrupted.");if(-219==e)throw new r("CURVE25519 public key is corrupted.");if(-220==e)throw new r("CURVE25519 private key is corrupted.");if(-221==e)throw new r("Elliptic curve public key format is corrupted see RFC 5480.");if(-222==e)throw new r("Elliptic curve public key format is corrupted see RFC 5915.");if(-223==e)throw new r("ASN.1 representation of a public key is corrupted.");if(-224==e)throw new r("ASN.1 representation of a private key is corrupted.");if(-225==e)throw new r("Key algorithm does not accept given type of public key.");if(-226==e)throw new r("Key algorithm does not accept given type of private key.");if(-227==e)throw new r("Post-quantum Falcon-Sign public key is corrupted.");if(-228==e)throw new r("Post-quantum Falcon-Sign private key is corrupted.");if(-229==e)throw new r("Generic Round5 library error.");if(-230==e)throw new r("Post-quantum NIST Round5 public key is corrupted.");if(-231==e)throw new r("Post-quantum NIST Round5 private key is corrupted.");if(-232==e)throw new r("Compound public key is corrupted.");if(-233==e)throw new r("Compound private key is corrupted.");if(-234==e)throw new r("Compound public hybrid key is corrupted.");if(-235==e)throw new r("Compound private hybrid key is corrupted.");if(-236==e)throw new r("ASN.1 AlgorithmIdentifer is corrupted.");if(-237==e)throw new r("ASN.1 AlgorithmIdentifer with ECParameters is corrupted.");if(-238==e)throw new r("ASN.1 AlgorithmIdentifer with CompoundKeyParams is corrupted.");if(-239==e)throw new r("ASN.1 AlgorithmIdentifer with HybridKeyParams is corrupted.");if(-301==e)throw new r("Decryption failed, because message info was not given explicitly, and was not part of an encrypted message.");if(-302==e)throw new r("Message Info is corrupted.");if(-303==e)throw new r("Recipient defined with id is not found within message info during data decryption.");if(-304==e)throw new r("Content encryption key can not be decrypted with a given private key.");if(-305==e)throw new r("Content encryption key can not be decrypted with a given password.");if(-306==e)throw new r("Custom parameter with a given key is not found within message info.");if(-307==e)throw new r("A custom parameter with a given key is found, but the requested value type does not correspond to the actual type.");if(-308==e)throw new r("Signature format is corrupted.");if(-309==e)throw new r("Message Info footer is corrupted.");if(-401==e)throw new r("Brainkey password length is out of range.");if(-402==e)throw new r("Brainkey number length should be 32 byte.");if(-403==e)throw new r("Brainkey point length should be 65 bytes.");if(-404==e)throw new r("Brainkey name is out of range.");if(-405==e)throw new r("Brainkey internal error.");if(-406==e)throw new r("Brainkey point is invalid.");if(-407==e)throw new r("Brainkey number buffer length capacity should be >= 32 byte.");if(-408==e)throw new r("Brainkey point buffer length capacity should be >= 32 byte.");if(-409==e)throw new r("Brainkey seed buffer length capacity should be >= 32 byte.");if(-410==e)throw new r("Brainkey identity secret is invalid.");if(-411==e)throw new r("KEM encapsulated key is invalid or does not correspond to the private key.");if(-501==e)throw new r("Invalid padding.");if(-601==e)throw new r("Protobuf error.");if(-701==e)throw new r("Session id doesnt match.");if(-702==e)throw new r("Epoch not found.");if(-703==e)throw new r("Wrong key type.");if(-704==e)throw new r("Invalid signature.");if(-705==e)throw new r("Ed25519 error.");if(-706==e)throw new r("Duplicate epoch.");if(-707==e)throw new r("Plain text too long.");throw new r("Unexpected status code:"+e)}}}return r};var r=(e,t)=>class{static newAndTakeCContext(r){const n=e._vscf_impl_tag(r);switch(n){case t.FoundationImplTag.SHA224:return t.Sha224.newAndTakeCContext(r);case t.FoundationImplTag.SHA256:return t.Sha256.newAndTakeCContext(r);case t.FoundationImplTag.SHA384:return t.Sha384.newAndTakeCContext(r);case t.FoundationImplTag.SHA512:return t.Sha512.newAndTakeCContext(r);case t.FoundationImplTag.AES256_GCM:return t.Aes256Gcm.newAndTakeCContext(r);case t.FoundationImplTag.AES256_CBC:return t.Aes256Cbc.newAndTakeCContext(r);case t.FoundationImplTag.ASN1RD:return t.Asn1rd.newAndTakeCContext(r);case t.FoundationImplTag.ASN1WR:return t.Asn1wr.newAndTakeCContext(r);case t.FoundationImplTag.RSA_PUBLIC_KEY:return t.RsaPublicKey.newAndTakeCContext(r);case t.FoundationImplTag.RSA_PRIVATE_KEY:return t.RsaPrivateKey.newAndTakeCContext(r);case t.FoundationImplTag.RSA:return t.Rsa.newAndTakeCContext(r);case t.FoundationImplTag.ECC_PUBLIC_KEY:return t.EccPublicKey.newAndTakeCContext(r);case t.FoundationImplTag.ECC_PRIVATE_KEY:return t.EccPrivateKey.newAndTakeCContext(r);case t.FoundationImplTag.ECC:return t.Ecc.newAndTakeCContext(r);case t.FoundationImplTag.ENTROPY_ACCUMULATOR:return t.EntropyAccumulator.newAndTakeCContext(r);case t.FoundationImplTag.CTR_DRBG:return t.CtrDrbg.newAndTakeCContext(r);case t.FoundationImplTag.HMAC:return t.Hmac.newAndTakeCContext(r);case t.FoundationImplTag.HKDF:return t.Hkdf.newAndTakeCContext(r);case t.FoundationImplTag.KDF1:return t.Kdf1.newAndTakeCContext(r);case t.FoundationImplTag.KDF2:return t.Kdf2.newAndTakeCContext(r);case t.FoundationImplTag.FAKE_RANDOM:return t.FakeRandom.newAndTakeCContext(r);case t.FoundationImplTag.PKCS5_PBKDF2:return t.Pkcs5Pbkdf2.newAndTakeCContext(r);case t.FoundationImplTag.PKCS5_PBES2:return t.Pkcs5Pbes2.newAndTakeCContext(r);case t.FoundationImplTag.SEED_ENTROPY_SOURCE:return t.SeedEntropySource.newAndTakeCContext(r);case t.FoundationImplTag.KEY_MATERIAL_RNG:return t.KeyMaterialRng.newAndTakeCContext(r);case t.FoundationImplTag.RAW_PUBLIC_KEY:return t.RawPublicKey.newAndTakeCContext(r);case t.FoundationImplTag.RAW_PRIVATE_KEY:return t.RawPrivateKey.newAndTakeCContext(r);case t.FoundationImplTag.PKCS8_SERIALIZER:return t.Pkcs8Serializer.newAndTakeCContext(r);case t.FoundationImplTag.SEC1_SERIALIZER:return t.Sec1Serializer.newAndTakeCContext(r);case t.FoundationImplTag.KEY_ASN1_SERIALIZER:return t.KeyAsn1Serializer.newAndTakeCContext(r);case t.FoundationImplTag.KEY_ASN1_DESERIALIZER:return t.KeyAsn1Deserializer.newAndTakeCContext(r);case t.FoundationImplTag.ED25519:return t.Ed25519.newAndTakeCContext(r);case t.FoundationImplTag.CURVE25519:return t.Curve25519.newAndTakeCContext(r);case t.FoundationImplTag.FALCON:return t.Falcon.newAndTakeCContext(r);case t.FoundationImplTag.ROUND5:return t.Round5.newAndTakeCContext(r);case t.FoundationImplTag.COMPOUND_KEY_ALG_INFO:return t.CompoundKeyAlgInfo.newAndTakeCContext(r);case t.FoundationImplTag.COMPOUND_PUBLIC_KEY:return t.CompoundPublicKey.newAndTakeCContext(r);case t.FoundationImplTag.COMPOUND_PRIVATE_KEY:return t.CompoundPrivateKey.newAndTakeCContext(r);case t.FoundationImplTag.COMPOUND_KEY_ALG:return t.CompoundKeyAlg.newAndTakeCContext(r);case t.FoundationImplTag.HYBRID_KEY_ALG_INFO:return t.HybridKeyAlgInfo.newAndTakeCContext(r);case t.FoundationImplTag.HYBRID_PUBLIC_KEY:return t.HybridPublicKey.newAndTakeCContext(r);case t.FoundationImplTag.HYBRID_PRIVATE_KEY:return t.HybridPrivateKey.newAndTakeCContext(r);case t.FoundationImplTag.HYBRID_KEY_ALG:return t.HybridKeyAlg.newAndTakeCContext(r);case t.FoundationImplTag.SIMPLE_ALG_INFO:return t.SimpleAlgInfo.newAndTakeCContext(r);case t.FoundationImplTag.HASH_BASED_ALG_INFO:return t.HashBasedAlgInfo.newAndTakeCContext(r);case t.FoundationImplTag.CIPHER_ALG_INFO:return t.CipherAlgInfo.newAndTakeCContext(r);case t.FoundationImplTag.SALTED_KDF_ALG_INFO:return t.SaltedKdfAlgInfo.newAndTakeCContext(r);case t.FoundationImplTag.PBE_ALG_INFO:return t.PbeAlgInfo.newAndTakeCContext(r);case t.FoundationImplTag.ECC_ALG_INFO:return t.EccAlgInfo.newAndTakeCContext(r);case t.FoundationImplTag.ALG_INFO_DER_SERIALIZER:return t.AlgInfoDerSerializer.newAndTakeCContext(r);case t.FoundationImplTag.ALG_INFO_DER_DESERIALIZER:return t.AlgInfoDerDeserializer.newAndTakeCContext(r);case t.FoundationImplTag.MESSAGE_INFO_DER_SERIALIZER:return t.MessageInfoDerSerializer.newAndTakeCContext(r);case t.FoundationImplTag.RANDOM_PADDING:return t.RandomPadding.newAndTakeCContext(r);default:throw new Error("Unexpected implementation tag found: "+n)}}static newAndUseCContext(r){return new t.FoundationInterface.newAndTakeCContext(e._vscf_impl_shallow_copy(r))}static isImplemented(t,r){return 0!=e._vscf_impl_api(t,r)}};var n=(e,t)=>Object.freeze({ALG:1,ALG_INFO:2,ALG_INFO_DESERIALIZER:3,ALG_INFO_SERIALIZER:4,ASN1_READER:5,ASN1_WRITER:6,AUTH_DECRYPT:7,AUTH_ENCRYPT:8,CIPHER:9,CIPHER_AUTH:10,CIPHER_AUTH_INFO:11,CIPHER_INFO:12,COMPUTE_SHARED_KEY:13,DECRYPT:14,ENCRYPT:15,ENTROPY_SOURCE:16,HASH:17,KDF:18,KEM:19,KEY:20,KEY_ALG:21,KEY_CIPHER:22,KEY_DESERIALIZER:23,KEY_SERIALIZER:24,KEY_SIGNER:25,MAC:26,MESSAGE_INFO_FOOTER_SERIALIZER:27,MESSAGE_INFO_SERIALIZER:28,PADDING:29,PRIVATE_KEY:30,PUBLIC_KEY:31,RANDOM:32,SALTED_KDF:33});var _=(e,t)=>Object.freeze({AES256_CBC:1,AES256_GCM:2,ALG_INFO_DER_DESERIALIZER:3,ALG_INFO_DER_SERIALIZER:4,ASN1RD:5,ASN1WR:6,CIPHER_ALG_INFO:7,COMPOUND_KEY_ALG:8,COMPOUND_KEY_ALG_INFO:9,COMPOUND_PRIVATE_KEY:10,COMPOUND_PUBLIC_KEY:11,CTR_DRBG:12,CURVE25519:13,ECC:14,ECC_ALG_INFO:15,ECC_PRIVATE_KEY:16,ECC_PUBLIC_KEY:17,ED25519:18,ENTROPY_ACCUMULATOR:19,FAKE_RANDOM:20,FALCON:21,HASH_BASED_ALG_INFO:22,HKDF:23,HMAC:24,HYBRID_KEY_ALG:25,HYBRID_KEY_ALG_INFO:26,HYBRID_PRIVATE_KEY:27,HYBRID_PUBLIC_KEY:28,KDF1:29,KDF2:30,KEY_ASN1_DESERIALIZER:31,KEY_ASN1_SERIALIZER:32,KEY_MATERIAL_RNG:33,MESSAGE_INFO_DER_SERIALIZER:34,PBE_ALG_INFO:35,PKCS5_PBES2:36,PKCS5_PBKDF2:37,PKCS8_SERIALIZER:38,RANDOM_PADDING:39,RAW_PRIVATE_KEY:40,RAW_PUBLIC_KEY:41,ROUND5:42,RSA:43,RSA_PRIVATE_KEY:44,RSA_PUBLIC_KEY:45,SALTED_KDF_ALG_INFO:46,SEC1_SERIALIZER:47,SEED_ENTROPY_SOURCE:48,SHA224:49,SHA256:50,SHA384:51,SHA512:52,SIMPLE_ALG_INFO:53});function s(e,t){if(!("number"==typeof t||t instanceof Number))throw new TypeError(`'${e}' is not a number`);if(Number.isNaN(t))throw new TypeError(`'${e}' is NaN`);if(t===1/0)throw new TypeError(`'${e}' is Infinity`);if(t===-1/0)throw new TypeError(`'${e}' is -Infinity`)}function c(e,t){if(s(e,t),0==t)throw new TypeError(`'${e}' is NULL`)}var a={ensureNumber:s,ensureString:function(e,t){if(!("string"==typeof t||t instanceof String))throw new TypeError(`'${e}' is not a string`)},ensureBoolean:function(e,t){if("boolean"!=typeof t)throw new TypeError(`'${e}' is not a boolean`)},ensureByteArray:function(e,t){if(!(t instanceof Uint8Array))throw new TypeError(`'${e}' is not an Uint8Array`)},ensureClass:function(e,t,r){if(!(t instanceof r))throw new TypeError(`'${e}' is not an instance of the class ${r.name}`);c(e,t.ctxPtr)},ensureNotNull:c,ensureImplementInterface:function(e,t,r,n,_){if(c(e,t.ctxPtr),!_.isImplemented(t.ctxPtr,n))throw new TypeError(`'${e}' does not implement interface '${r}'`)}};var o=(e,t)=>{class r{static get RESEED_INTERVAL(){return 1e4}get RESEED_INTERVAL(){return r.RESEED_INTERVAL}static get ENTROPY_LEN(){return 48}get ENTROPY_LEN(){return r.ENTROPY_LEN}constructor(t){this.name="CtrDrbg",this.ctxPtr=void 0===t?e._vscf_ctr_drbg_new():t}static newAndUseCContext(t){return new r(e._vscf_ctr_drbg_shallow_copy(t))}static newAndTakeCContext(e){return new r(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vscf_ctr_drbg_delete(this.ctxPtr),this.ctxPtr=null)}set entropySource(r){a.ensureNotNull("this.ctxPtr",this.ctxPtr),a.ensureImplementInterface("entropySource",r,"Foundation.EntropySource",t.FoundationInterfaceTag.ENTROPY_SOURCE,t.FoundationInterface),e._vscf_ctr_drbg_release_entropy_source(this.ctxPtr);const n=e._vscf_ctr_drbg_use_entropy_source(this.ctxPtr,r.ctxPtr);t.FoundationError.handleStatusCode(n)}random(r){a.ensureNotNull("this.ctxPtr",this.ctxPtr),a.ensureNumber("dataLen",r);const n=r,_=e._vsc_buffer_new_with_capacity(n);try{const n=e._vscf_ctr_drbg_random(this.ctxPtr,r,_);t.FoundationError.handleStatusCode(n);const s=e._vsc_buffer_bytes(_),c=e._vsc_buffer_len(_);return e.HEAPU8.slice(s,s+c)}finally{e._vsc_buffer_delete(_)}}reseed(){a.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=e._vscf_ctr_drbg_reseed(this.ctxPtr);t.FoundationError.handleStatusCode(r)}setupDefaults(){a.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=e._vscf_ctr_drbg_setup_defaults(this.ctxPtr);t.FoundationError.handleStatusCode(r)}enablePredictionResistance(){a.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_ctr_drbg_enable_prediction_resistance(this.ctxPtr)}setReseedInterval(t){a.ensureNotNull("this.ctxPtr",this.ctxPtr),a.ensureNumber("interval",t),e._vscf_ctr_drbg_set_reseed_interval(this.ctxPtr,t)}setEntropyLen(t){a.ensureNotNull("this.ctxPtr",this.ctxPtr),a.ensureNumber("len",t),e._vscf_ctr_drbg_set_entropy_len(this.ctxPtr,t)}}return r};var i=(e,t)=>{class r{constructor(t){this.name="Hmac",this.ctxPtr=void 0===t?e._vscf_hmac_new():t}static newAndUseCContext(t){return new r(e._vscf_hmac_shallow_copy(t))}static newAndTakeCContext(e){return new r(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vscf_hmac_delete(this.ctxPtr),this.ctxPtr=null)}set hash(r){a.ensureNotNull("this.ctxPtr",this.ctxPtr),a.ensureImplementInterface("hash",r,"Foundation.Hash",t.FoundationInterfaceTag.HASH,t.FoundationInterface),e._vscf_hmac_release_hash(this.ctxPtr),e._vscf_hmac_use_hash(this.ctxPtr,r.ctxPtr)}algId(){let t;return a.ensureNotNull("this.ctxPtr",this.ctxPtr),t=e._vscf_hmac_alg_id(this.ctxPtr),t}produceAlgInfo(){let r;return a.ensureNotNull("this.ctxPtr",this.ctxPtr),r=e._vscf_hmac_produce_alg_info(this.ctxPtr),t.FoundationInterface.newAndTakeCContext(r)}restoreAlgInfo(r){a.ensureNotNull("this.ctxPtr",this.ctxPtr),a.ensureImplementInterface("algInfo",r,"Foundation.AlgInfo",t.FoundationInterfaceTag.ALG_INFO,t.FoundationInterface);const n=e._vscf_hmac_restore_alg_info(this.ctxPtr,r.ctxPtr);t.FoundationError.handleStatusCode(n)}digestLen(){let t;return a.ensureNotNull("this.ctxPtr",this.ctxPtr),t=e._vscf_hmac_digest_len(this.ctxPtr),t}mac(t,r){a.ensureNotNull("this.ctxPtr",this.ctxPtr),a.ensureByteArray("key",t),a.ensureByteArray("data",r);const n=t.length*t.BYTES_PER_ELEMENT,_=e._malloc(n);e.HEAP8.set(t,_);const s=e._vsc_data_ctx_size(),c=e._malloc(s);e._vsc_data(c,_,n);const o=r.length*r.BYTES_PER_ELEMENT,i=e._malloc(o);e.HEAP8.set(r,i);const u=e._vsc_data_ctx_size(),l=e._malloc(u);e._vsc_data(l,i,o);const f=this.digestLen(),d=e._vsc_buffer_new_with_capacity(f);try{e._vscf_hmac_mac(this.ctxPtr,c,l,d);const t=e._vsc_buffer_bytes(d),r=e._vsc_buffer_len(d);return e.HEAPU8.slice(t,t+r)}finally{e._free(_),e._free(c),e._free(i),e._free(l),e._vsc_buffer_delete(d)}}start(t){a.ensureNotNull("this.ctxPtr",this.ctxPtr),a.ensureByteArray("key",t);const r=t.length*t.BYTES_PER_ELEMENT,n=e._malloc(r);e.HEAP8.set(t,n);const _=e._vsc_data_ctx_size(),s=e._malloc(_);e._vsc_data(s,n,r);try{e._vscf_hmac_start(this.ctxPtr,s)}finally{e._free(n),e._free(s)}}update(t){a.ensureNotNull("this.ctxPtr",this.ctxPtr),a.ensureByteArray("data",t);const r=t.length*t.BYTES_PER_ELEMENT,n=e._malloc(r);e.HEAP8.set(t,n);const _=e._vsc_data_ctx_size(),s=e._malloc(_);e._vsc_data(s,n,r);try{e._vscf_hmac_update(this.ctxPtr,s)}finally{e._free(n),e._free(s)}}finish(){a.ensureNotNull("this.ctxPtr",this.ctxPtr);const t=this.digestLen(),r=e._vsc_buffer_new_with_capacity(t);try{e._vscf_hmac_finish(this.ctxPtr,r);const t=e._vsc_buffer_bytes(r),n=e._vsc_buffer_len(r);return e.HEAPU8.slice(t,t+n)}finally{e._vsc_buffer_delete(r)}}reset(){a.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_hmac_reset(this.ctxPtr)}}return r};var u=(e,t)=>{class r{constructor(t){this.name="Hkdf",this.ctxPtr=void 0===t?e._vscf_hkdf_new():t}static newAndUseCContext(t){return new r(e._vscf_hkdf_shallow_copy(t))}static newAndTakeCContext(e){return new r(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vscf_hkdf_delete(this.ctxPtr),this.ctxPtr=null)}set hash(r){a.ensureNotNull("this.ctxPtr",this.ctxPtr),a.ensureImplementInterface("hash",r,"Foundation.Hash",t.FoundationInterfaceTag.HASH,t.FoundationInterface),e._vscf_hkdf_release_hash(this.ctxPtr),e._vscf_hkdf_use_hash(this.ctxPtr,r.ctxPtr)}algId(){let t;return a.ensureNotNull("this.ctxPtr",this.ctxPtr),t=e._vscf_hkdf_alg_id(this.ctxPtr),t}produceAlgInfo(){let r;return a.ensureNotNull("this.ctxPtr",this.ctxPtr),r=e._vscf_hkdf_produce_alg_info(this.ctxPtr),t.FoundationInterface.newAndTakeCContext(r)}restoreAlgInfo(r){a.ensureNotNull("this.ctxPtr",this.ctxPtr),a.ensureImplementInterface("algInfo",r,"Foundation.AlgInfo",t.FoundationInterfaceTag.ALG_INFO,t.FoundationInterface);const n=e._vscf_hkdf_restore_alg_info(this.ctxPtr,r.ctxPtr);t.FoundationError.handleStatusCode(n)}derive(t,r){a.ensureNotNull("this.ctxPtr",this.ctxPtr),a.ensureByteArray("data",t),a.ensureNumber("keyLen",r);const n=t.length*t.BYTES_PER_ELEMENT,_=e._malloc(n);e.HEAP8.set(t,_);const s=e._vsc_data_ctx_size(),c=e._malloc(s);e._vsc_data(c,_,n);const o=r,i=e._vsc_buffer_new_with_capacity(o);try{e._vscf_hkdf_derive(this.ctxPtr,c,r,i);const t=e._vsc_buffer_bytes(i),n=e._vsc_buffer_len(i);return e.HEAPU8.slice(t,t+n)}finally{e._free(_),e._free(c),e._vsc_buffer_delete(i)}}reset(t,r){a.ensureNotNull("this.ctxPtr",this.ctxPtr),a.ensureByteArray("salt",t),a.ensureNumber("iterationCount",r);const n=t.length*t.BYTES_PER_ELEMENT,_=e._malloc(n);e.HEAP8.set(t,_);const s=e._vsc_data_ctx_size(),c=e._malloc(s);e._vsc_data(c,_,n);try{e._vscf_hkdf_reset(this.ctxPtr,c,r)}finally{e._free(_),e._free(c)}}setInfo(t){a.ensureNotNull("this.ctxPtr",this.ctxPtr),a.ensureByteArray("info",t);const r=t.length*t.BYTES_PER_ELEMENT,n=e._malloc(r);e.HEAP8.set(t,n);const _=e._vsc_data_ctx_size(),s=e._malloc(_);e._vsc_data(s,n,r);try{e._vscf_hkdf_set_info(this.ctxPtr,s)}finally{e._free(n),e._free(s)}}}return r};var l=(e,t)=>{class r{static get DIGEST_LEN(){return 64}get DIGEST_LEN(){return r.DIGEST_LEN}static get BLOCK_LEN(){return 128}get BLOCK_LEN(){return r.BLOCK_LEN}constructor(t){this.name="Sha512",this.ctxPtr=void 0===t?e._vscf_sha512_new():t}static newAndUseCContext(t){return new r(e._vscf_sha512_shallow_copy(t))}static newAndTakeCContext(e){return new r(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vscf_sha512_delete(this.ctxPtr),this.ctxPtr=null)}algId(){let t;return a.ensureNotNull("this.ctxPtr",this.ctxPtr),t=e._vscf_sha512_alg_id(this.ctxPtr),t}produceAlgInfo(){let r;return a.ensureNotNull("this.ctxPtr",this.ctxPtr),r=e._vscf_sha512_produce_alg_info(this.ctxPtr),t.FoundationInterface.newAndTakeCContext(r)}restoreAlgInfo(r){a.ensureNotNull("this.ctxPtr",this.ctxPtr),a.ensureImplementInterface("algInfo",r,"Foundation.AlgInfo",t.FoundationInterfaceTag.ALG_INFO,t.FoundationInterface);const n=e._vscf_sha512_restore_alg_info(this.ctxPtr,r.ctxPtr);t.FoundationError.handleStatusCode(n)}hash(t){a.ensureByteArray("data",t);const r=t.length*t.BYTES_PER_ELEMENT,n=e._malloc(r);e.HEAP8.set(t,n);const _=e._vsc_data_ctx_size(),s=e._malloc(_);e._vsc_data(s,n,r);const c=this.DIGEST_LEN,o=e._vsc_buffer_new_with_capacity(c);try{e._vscf_sha512_hash(s,o);const t=e._vsc_buffer_bytes(o),r=e._vsc_buffer_len(o);return e.HEAPU8.slice(t,t+r)}finally{e._free(n),e._free(s),e._vsc_buffer_delete(o)}}start(){a.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_sha512_start(this.ctxPtr)}update(t){a.ensureNotNull("this.ctxPtr",this.ctxPtr),a.ensureByteArray("data",t);const r=t.length*t.BYTES_PER_ELEMENT,n=e._malloc(r);e.HEAP8.set(t,n);const _=e._vsc_data_ctx_size(),s=e._malloc(_);e._vsc_data(s,n,r);try{e._vscf_sha512_update(this.ctxPtr,s)}finally{e._free(n),e._free(s)}}finish(){a.ensureNotNull("this.ctxPtr",this.ctxPtr);const t=this.DIGEST_LEN,r=e._vsc_buffer_new_with_capacity(t);try{e._vscf_sha512_finish(this.ctxPtr,r);const t=e._vsc_buffer_bytes(r),n=e._vsc_buffer_len(r);return e.HEAPU8.slice(t,t+n)}finally{e._vsc_buffer_delete(r)}}}return r};var f=(e,t)=>{class r extends Error{constructor(e){super(e),this.name="PheError",this.message=e}static handleStatusCode(e){if(0!=e){if(-1==e)throw new r("Success proof check failed.");if(-2==e)throw new r("Failure proof check failed.");if(-3==e)throw new r("RNG returned error.");if(-4==e)throw new r("Protobuf decode failed.");if(-5==e)throw new r("Invalid public key.");if(-6==e)throw new r("Invalid private key.");if(-7==e)throw new r("AES error occurred.");throw new r("Unexpected status code:"+e)}}}return r};function d(e,t){if(!("number"==typeof t||t instanceof Number))throw new TypeError(`'${e}' is not a number`);if(Number.isNaN(t))throw new TypeError(`'${e}' is NaN`);if(t===1/0)throw new TypeError(`'${e}' is Infinity`);if(t===-1/0)throw new TypeError(`'${e}' is -Infinity`)}function h(e,t){if(d(e,t),0==t)throw new TypeError(`'${e}' is NULL`)}var p={ensureNumber:d,ensureString:function(e,t){if(!("string"==typeof t||t instanceof String))throw new TypeError(`'${e}' is not a string`)},ensureBoolean:function(e,t){if("boolean"!=typeof t)throw new TypeError(`'${e}' is not a boolean`)},ensureByteArray:function(e,t){if(!(t instanceof Uint8Array))throw new TypeError(`'${e}' is not an Uint8Array`)},ensureClass:function(e,t,r){if(!(t instanceof r))throw new TypeError(`'${e}' is not an instance of the class ${r.name}`);h(e,t.ctxPtr)},ensureNotNull:h,ensureImplementInterface:function(e,t,r,n,_){if(h(e,t.ctxPtr),!_.isImplemented(t.ctxPtr,n))throw new TypeError(`'${e}' does not implement interface '${r}'`)}};var v=(e,t)=>{class r{static get PHE_POINT_LENGTH(){return 65}get PHE_POINT_LENGTH(){return r.PHE_POINT_LENGTH}static get PHE_MAX_PASSWORD_LENGTH(){return 128}get PHE_MAX_PASSWORD_LENGTH(){return r.PHE_MAX_PASSWORD_LENGTH}static get PHE_SERVER_IDENTIFIER_LENGTH(){return 32}get PHE_SERVER_IDENTIFIER_LENGTH(){return r.PHE_SERVER_IDENTIFIER_LENGTH}static get PHE_CLIENT_IDENTIFIER_LENGTH(){return 32}get PHE_CLIENT_IDENTIFIER_LENGTH(){return r.PHE_CLIENT_IDENTIFIER_LENGTH}static get PHE_ACCOUNT_KEY_LENGTH(){return 32}get PHE_ACCOUNT_KEY_LENGTH(){return r.PHE_ACCOUNT_KEY_LENGTH}static get PHE_PRIVATE_KEY_LENGTH(){return 32}get PHE_PRIVATE_KEY_LENGTH(){return r.PHE_PRIVATE_KEY_LENGTH}static get PHE_PUBLIC_KEY_LENGTH(){return 65}get PHE_PUBLIC_KEY_LENGTH(){return r.PHE_PUBLIC_KEY_LENGTH}static get PHE_HASH_LEN(){return 32}get PHE_HASH_LEN(){return r.PHE_HASH_LEN}static get PHE_MAX_ENCRYPT_LEN(){return 1048512}get PHE_MAX_ENCRYPT_LEN(){return r.PHE_MAX_ENCRYPT_LEN}static get PHE_MAX_DECRYPT_LEN(){return 1048576}get PHE_MAX_DECRYPT_LEN(){return r.PHE_MAX_DECRYPT_LEN}static get PHE_MAX_AUTH_LEN(){return 1024}get PHE_MAX_AUTH_LEN(){return r.PHE_MAX_AUTH_LEN}}return r};var m=(e,t)=>{class r{constructor(t){this.name="PheServer",this.ctxPtr=void 0===t?e._vsce_phe_server_new():t}static newAndUseCContext(t){return new r(e._vsce_phe_server_shallow_copy(t))}static newAndTakeCContext(e){return new r(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vsce_phe_server_delete(this.ctxPtr),this.ctxPtr=null)}set random(r){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureImplementInterface("random",r,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_server_release_random(this.ctxPtr),e._vsce_phe_server_use_random(this.ctxPtr,r.ctxPtr)}set operationRandom(r){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureImplementInterface("operationRandom",r,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_server_release_operation_random(this.ctxPtr),e._vsce_phe_server_use_operation_random(this.ctxPtr,r.ctxPtr)}setupDefaults(){p.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=e._vsce_phe_server_setup_defaults(this.ctxPtr);t.PheError.handleStatusCode(r)}generateServerKeyPair(){p.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=t.PheCommon.PHE_PRIVATE_KEY_LENGTH,n=e._vsc_buffer_new_with_capacity(r),_=t.PheCommon.PHE_PUBLIC_KEY_LENGTH,s=e._vsc_buffer_new_with_capacity(_);try{const r=e._vsce_phe_server_generate_server_key_pair(this.ctxPtr,n,s);t.PheError.handleStatusCode(r);const _=e._vsc_buffer_bytes(n),c=e._vsc_buffer_len(n),a=e.HEAPU8.slice(_,_+c),o=e._vsc_buffer_bytes(s),i=e._vsc_buffer_len(s);return{serverPrivateKey:a,serverPublicKey:e.HEAPU8.slice(o,o+i)}}finally{e._vsc_buffer_delete(n),e._vsc_buffer_delete(s)}}enrollmentResponseLen(){let t;return p.ensureNotNull("this.ctxPtr",this.ctxPtr),t=e._vsce_phe_server_enrollment_response_len(this.ctxPtr),t}getEnrollment(r,n){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("serverPrivateKey",r),p.ensureByteArray("serverPublicKey",n);const _=r.length*r.BYTES_PER_ELEMENT,s=e._malloc(_);e.HEAP8.set(r,s);const c=e._vsc_data_ctx_size(),a=e._malloc(c);e._vsc_data(a,s,_);const o=n.length*n.BYTES_PER_ELEMENT,i=e._malloc(o);e.HEAP8.set(n,i);const u=e._vsc_data_ctx_size(),l=e._malloc(u);e._vsc_data(l,i,o);const f=this.enrollmentResponseLen(),d=e._vsc_buffer_new_with_capacity(f);try{const r=e._vsce_phe_server_get_enrollment(this.ctxPtr,a,l,d);t.PheError.handleStatusCode(r);const n=e._vsc_buffer_bytes(d),_=e._vsc_buffer_len(d);return e.HEAPU8.slice(n,n+_)}finally{e._free(s),e._free(a),e._free(i),e._free(l),e._vsc_buffer_delete(d)}}verifyPasswordResponseLen(){let t;return p.ensureNotNull("this.ctxPtr",this.ctxPtr),t=e._vsce_phe_server_verify_password_response_len(this.ctxPtr),t}verifyPassword(r,n,_){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("serverPrivateKey",r),p.ensureByteArray("serverPublicKey",n),p.ensureByteArray("verifyPasswordRequest",_);const s=r.length*r.BYTES_PER_ELEMENT,c=e._malloc(s);e.HEAP8.set(r,c);const a=e._vsc_data_ctx_size(),o=e._malloc(a);e._vsc_data(o,c,s);const i=n.length*n.BYTES_PER_ELEMENT,u=e._malloc(i);e.HEAP8.set(n,u);const l=e._vsc_data_ctx_size(),f=e._malloc(l);e._vsc_data(f,u,i);const d=_.length*_.BYTES_PER_ELEMENT,h=e._malloc(d);e.HEAP8.set(_,h);const v=e._vsc_data_ctx_size(),m=e._malloc(v);e._vsc_data(m,h,d);const y=this.verifyPasswordResponseLen(),E=e._vsc_buffer_new_with_capacity(y);try{const r=e._vsce_phe_server_verify_password(this.ctxPtr,o,f,m,E);t.PheError.handleStatusCode(r);const n=e._vsc_buffer_bytes(E),_=e._vsc_buffer_len(E);return e.HEAPU8.slice(n,n+_)}finally{e._free(c),e._free(o),e._free(u),e._free(f),e._free(h),e._free(m),e._vsc_buffer_delete(E)}}updateTokenLen(){let t;return p.ensureNotNull("this.ctxPtr",this.ctxPtr),t=e._vsce_phe_server_update_token_len(this.ctxPtr),t}rotateKeys(r){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("serverPrivateKey",r);const n=r.length*r.BYTES_PER_ELEMENT,_=e._malloc(n);e.HEAP8.set(r,_);const s=e._vsc_data_ctx_size(),c=e._malloc(s);e._vsc_data(c,_,n);const a=t.PheCommon.PHE_PRIVATE_KEY_LENGTH,o=e._vsc_buffer_new_with_capacity(a),i=t.PheCommon.PHE_PUBLIC_KEY_LENGTH,u=e._vsc_buffer_new_with_capacity(i),l=this.updateTokenLen(),f=e._vsc_buffer_new_with_capacity(l);try{const r=e._vsce_phe_server_rotate_keys(this.ctxPtr,c,o,u,f);t.PheError.handleStatusCode(r);const n=e._vsc_buffer_bytes(o),s=e._vsc_buffer_len(o),a=e.HEAPU8.slice(n,n+s),i=e._vsc_buffer_bytes(u),l=e._vsc_buffer_len(u),d=e.HEAPU8.slice(i,i+l),h=e._vsc_buffer_bytes(f),p=e._vsc_buffer_len(f);return{newServerPrivateKey:a,newServerPublicKey:d,updateToken:e.HEAPU8.slice(h,h+p)}}finally{e._free(_),e._free(c),e._vsc_buffer_delete(o),e._vsc_buffer_delete(u),e._vsc_buffer_delete(f)}}}return r};var y=(e,t)=>{class r{constructor(t){this.name="PheClient",this.ctxPtr=void 0===t?e._vsce_phe_client_new():t}static newAndUseCContext(t){return new r(e._vsce_phe_client_shallow_copy(t))}static newAndTakeCContext(e){return new r(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vsce_phe_client_delete(this.ctxPtr),this.ctxPtr=null)}set random(r){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureImplementInterface("random",r,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_client_release_random(this.ctxPtr),e._vsce_phe_client_use_random(this.ctxPtr,r.ctxPtr)}set operationRandom(r){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureImplementInterface("operationRandom",r,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_client_release_operation_random(this.ctxPtr),e._vsce_phe_client_use_operation_random(this.ctxPtr,r.ctxPtr)}setupDefaults(){p.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=e._vsce_phe_client_setup_defaults(this.ctxPtr);t.PheError.handleStatusCode(r)}setKeys(r,n){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("clientPrivateKey",r),p.ensureByteArray("serverPublicKey",n);const _=r.length*r.BYTES_PER_ELEMENT,s=e._malloc(_);e.HEAP8.set(r,s);const c=e._vsc_data_ctx_size(),a=e._malloc(c);e._vsc_data(a,s,_);const o=n.length*n.BYTES_PER_ELEMENT,i=e._malloc(o);e.HEAP8.set(n,i);const u=e._vsc_data_ctx_size(),l=e._malloc(u);e._vsc_data(l,i,o);try{const r=e._vsce_phe_client_set_keys(this.ctxPtr,a,l);t.PheError.handleStatusCode(r)}finally{e._free(s),e._free(a),e._free(i),e._free(l)}}generateClientPrivateKey(){p.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=t.PheCommon.PHE_PRIVATE_KEY_LENGTH,n=e._vsc_buffer_new_with_capacity(r);try{const r=e._vsce_phe_client_generate_client_private_key(this.ctxPtr,n);t.PheError.handleStatusCode(r);const _=e._vsc_buffer_bytes(n),s=e._vsc_buffer_len(n);return e.HEAPU8.slice(_,_+s)}finally{e._vsc_buffer_delete(n)}}enrollmentRecordLen(){let t;return p.ensureNotNull("this.ctxPtr",this.ctxPtr),t=e._vsce_phe_client_enrollment_record_len(this.ctxPtr),t}enrollAccount(r,n){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("enrollmentResponse",r),p.ensureByteArray("password",n);const _=r.length*r.BYTES_PER_ELEMENT,s=e._malloc(_);e.HEAP8.set(r,s);const c=e._vsc_data_ctx_size(),a=e._malloc(c);e._vsc_data(a,s,_);const o=n.length*n.BYTES_PER_ELEMENT,i=e._malloc(o);e.HEAP8.set(n,i);const u=e._vsc_data_ctx_size(),l=e._malloc(u);e._vsc_data(l,i,o);const f=this.enrollmentRecordLen(),d=e._vsc_buffer_new_with_capacity(f),h=t.PheCommon.PHE_ACCOUNT_KEY_LENGTH,v=e._vsc_buffer_new_with_capacity(h);try{const r=e._vsce_phe_client_enroll_account(this.ctxPtr,a,l,d,v);t.PheError.handleStatusCode(r);const n=e._vsc_buffer_bytes(d),_=e._vsc_buffer_len(d),c=e.HEAPU8.slice(n,n+_),o=e._vsc_buffer_bytes(v),u=e._vsc_buffer_len(v);return{enrollmentRecord:c,accountKey:e.HEAPU8.slice(o,o+u)}}finally{e._free(s),e._free(a),e._free(i),e._free(l),e._vsc_buffer_delete(d),e._vsc_buffer_delete(v)}}verifyPasswordRequestLen(){let t;return p.ensureNotNull("this.ctxPtr",this.ctxPtr),t=e._vsce_phe_client_verify_password_request_len(this.ctxPtr),t}createVerifyPasswordRequest(r,n){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("password",r),p.ensureByteArray("enrollmentRecord",n);const _=r.length*r.BYTES_PER_ELEMENT,s=e._malloc(_);e.HEAP8.set(r,s);const c=e._vsc_data_ctx_size(),a=e._malloc(c);e._vsc_data(a,s,_);const o=n.length*n.BYTES_PER_ELEMENT,i=e._malloc(o);e.HEAP8.set(n,i);const u=e._vsc_data_ctx_size(),l=e._malloc(u);e._vsc_data(l,i,o);const f=this.verifyPasswordRequestLen(),d=e._vsc_buffer_new_with_capacity(f);try{const r=e._vsce_phe_client_create_verify_password_request(this.ctxPtr,a,l,d);t.PheError.handleStatusCode(r);const n=e._vsc_buffer_bytes(d),_=e._vsc_buffer_len(d);return e.HEAPU8.slice(n,n+_)}finally{e._free(s),e._free(a),e._free(i),e._free(l),e._vsc_buffer_delete(d)}}checkResponseAndDecrypt(r,n,_){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("password",r),p.ensureByteArray("enrollmentRecord",n),p.ensureByteArray("verifyPasswordResponse",_);const s=r.length*r.BYTES_PER_ELEMENT,c=e._malloc(s);e.HEAP8.set(r,c);const a=e._vsc_data_ctx_size(),o=e._malloc(a);e._vsc_data(o,c,s);const i=n.length*n.BYTES_PER_ELEMENT,u=e._malloc(i);e.HEAP8.set(n,u);const l=e._vsc_data_ctx_size(),f=e._malloc(l);e._vsc_data(f,u,i);const d=_.length*_.BYTES_PER_ELEMENT,h=e._malloc(d);e.HEAP8.set(_,h);const v=e._vsc_data_ctx_size(),m=e._malloc(v);e._vsc_data(m,h,d);const y=t.PheCommon.PHE_ACCOUNT_KEY_LENGTH,E=e._vsc_buffer_new_with_capacity(y);try{const r=e._vsce_phe_client_check_response_and_decrypt(this.ctxPtr,o,f,m,E);t.PheError.handleStatusCode(r);const n=e._vsc_buffer_bytes(E),_=e._vsc_buffer_len(E);return e.HEAPU8.slice(n,n+_)}finally{e._free(c),e._free(o),e._free(u),e._free(f),e._free(h),e._free(m),e._vsc_buffer_delete(E)}}rotateKeys(r){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("updateToken",r);const n=r.length*r.BYTES_PER_ELEMENT,_=e._malloc(n);e.HEAP8.set(r,_);const s=e._vsc_data_ctx_size(),c=e._malloc(s);e._vsc_data(c,_,n);const a=t.PheCommon.PHE_PRIVATE_KEY_LENGTH,o=e._vsc_buffer_new_with_capacity(a),i=t.PheCommon.PHE_PUBLIC_KEY_LENGTH,u=e._vsc_buffer_new_with_capacity(i);try{const r=e._vsce_phe_client_rotate_keys(this.ctxPtr,c,o,u);t.PheError.handleStatusCode(r);const n=e._vsc_buffer_bytes(o),s=e._vsc_buffer_len(o),a=e.HEAPU8.slice(n,n+s),i=e._vsc_buffer_bytes(u),l=e._vsc_buffer_len(u);return{newClientPrivateKey:a,newServerPublicKey:e.HEAPU8.slice(i,i+l)}}finally{e._free(_),e._free(c),e._vsc_buffer_delete(o),e._vsc_buffer_delete(u)}}updateEnrollmentRecord(r,n){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("enrollmentRecord",r),p.ensureByteArray("updateToken",n);const _=r.length*r.BYTES_PER_ELEMENT,s=e._malloc(_);e.HEAP8.set(r,s);const c=e._vsc_data_ctx_size(),a=e._malloc(c);e._vsc_data(a,s,_);const o=n.length*n.BYTES_PER_ELEMENT,i=e._malloc(o);e.HEAP8.set(n,i);const u=e._vsc_data_ctx_size(),l=e._malloc(u);e._vsc_data(l,i,o);const f=this.enrollmentRecordLen(),d=e._vsc_buffer_new_with_capacity(f);try{const r=e._vsce_phe_client_update_enrollment_record(this.ctxPtr,a,l,d);t.PheError.handleStatusCode(r);const n=e._vsc_buffer_bytes(d),_=e._vsc_buffer_len(d);return e.HEAPU8.slice(n,n+_)}finally{e._free(s),e._free(a),e._free(i),e._free(l),e._vsc_buffer_delete(d)}}}return r};var E=(e,t)=>{class r{constructor(t){this.name="PheCipher",this.ctxPtr=void 0===t?e._vsce_phe_cipher_new():t}static newAndUseCContext(t){return new r(e._vsce_phe_cipher_shallow_copy(t))}static newAndTakeCContext(e){return new r(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vsce_phe_cipher_delete(this.ctxPtr),this.ctxPtr=null)}set random(r){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureImplementInterface("random",r,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_cipher_release_random(this.ctxPtr),e._vsce_phe_cipher_use_random(this.ctxPtr,r.ctxPtr)}setupDefaults(){p.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=e._vsce_phe_cipher_setup_defaults(this.ctxPtr);t.PheError.handleStatusCode(r)}encryptLen(t){let r;return p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureNumber("plainTextLen",t),r=e._vsce_phe_cipher_encrypt_len(this.ctxPtr,t),r}decryptLen(t){let r;return p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureNumber("cipherTextLen",t),r=e._vsce_phe_cipher_decrypt_len(this.ctxPtr,t),r}encrypt(r,n){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("plainText",r),p.ensureByteArray("accountKey",n);const _=r.length*r.BYTES_PER_ELEMENT,s=e._malloc(_);e.HEAP8.set(r,s);const c=e._vsc_data_ctx_size(),a=e._malloc(c);e._vsc_data(a,s,_);const o=n.length*n.BYTES_PER_ELEMENT,i=e._malloc(o);e.HEAP8.set(n,i);const u=e._vsc_data_ctx_size(),l=e._malloc(u);e._vsc_data(l,i,o);const f=this.encryptLen(r.length),d=e._vsc_buffer_new_with_capacity(f);try{const r=e._vsce_phe_cipher_encrypt(this.ctxPtr,a,l,d);t.PheError.handleStatusCode(r);const n=e._vsc_buffer_bytes(d),_=e._vsc_buffer_len(d);return e.HEAPU8.slice(n,n+_)}finally{e._free(s),e._free(a),e._free(i),e._free(l),e._vsc_buffer_delete(d)}}decrypt(r,n){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("cipherText",r),p.ensureByteArray("accountKey",n);const _=r.length*r.BYTES_PER_ELEMENT,s=e._malloc(_);e.HEAP8.set(r,s);const c=e._vsc_data_ctx_size(),a=e._malloc(c);e._vsc_data(a,s,_);const o=n.length*n.BYTES_PER_ELEMENT,i=e._malloc(o);e.HEAP8.set(n,i);const u=e._vsc_data_ctx_size(),l=e._malloc(u);e._vsc_data(l,i,o);const f=this.decryptLen(r.length),d=e._vsc_buffer_new_with_capacity(f);try{const r=e._vsce_phe_cipher_decrypt(this.ctxPtr,a,l,d);t.PheError.handleStatusCode(r);const n=e._vsc_buffer_bytes(d),_=e._vsc_buffer_len(d);return e.HEAPU8.slice(n,n+_)}finally{e._free(s),e._free(a),e._free(i),e._free(l),e._vsc_buffer_delete(d)}}authEncrypt(r,n,_){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("plainText",r),p.ensureByteArray("additionalData",n),p.ensureByteArray("accountKey",_);const s=r.length*r.BYTES_PER_ELEMENT,c=e._malloc(s);e.HEAP8.set(r,c);const a=e._vsc_data_ctx_size(),o=e._malloc(a);e._vsc_data(o,c,s);const i=n.length*n.BYTES_PER_ELEMENT,u=e._malloc(i);e.HEAP8.set(n,u);const l=e._vsc_data_ctx_size(),f=e._malloc(l);e._vsc_data(f,u,i);const d=_.length*_.BYTES_PER_ELEMENT,h=e._malloc(d);e.HEAP8.set(_,h);const v=e._vsc_data_ctx_size(),m=e._malloc(v);e._vsc_data(m,h,d);const y=this.encryptLen(r.length),E=e._vsc_buffer_new_with_capacity(y);try{const r=e._vsce_phe_cipher_auth_encrypt(this.ctxPtr,o,f,m,E);t.PheError.handleStatusCode(r);const n=e._vsc_buffer_bytes(E),_=e._vsc_buffer_len(E);return e.HEAPU8.slice(n,n+_)}finally{e._free(c),e._free(o),e._free(u),e._free(f),e._free(h),e._free(m),e._vsc_buffer_delete(E)}}authDecrypt(r,n,_){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("cipherText",r),p.ensureByteArray("additionalData",n),p.ensureByteArray("accountKey",_);const s=r.length*r.BYTES_PER_ELEMENT,c=e._malloc(s);e.HEAP8.set(r,c);const a=e._vsc_data_ctx_size(),o=e._malloc(a);e._vsc_data(o,c,s);const i=n.length*n.BYTES_PER_ELEMENT,u=e._malloc(i);e.HEAP8.set(n,u);const l=e._vsc_data_ctx_size(),f=e._malloc(l);e._vsc_data(f,u,i);const d=_.length*_.BYTES_PER_ELEMENT,h=e._malloc(d);e.HEAP8.set(_,h);const v=e._vsc_data_ctx_size(),m=e._malloc(v);e._vsc_data(m,h,d);const y=this.decryptLen(r.length),E=e._vsc_buffer_new_with_capacity(y);try{const r=e._vsce_phe_cipher_auth_decrypt(this.ctxPtr,o,f,m,E);t.PheError.handleStatusCode(r);const n=e._vsc_buffer_bytes(E),_=e._vsc_buffer_len(E);return e.HEAPU8.slice(n,n+_)}finally{e._free(c),e._free(o),e._free(u),e._free(f),e._free(h),e._free(m),e._vsc_buffer_delete(E)}}}return r};var P=(e,t)=>{class r{constructor(t){this.name="UokmsClient",this.ctxPtr=void 0===t?e._vsce_uokms_client_new():t}static newAndUseCContext(t){return new r(e._vsce_uokms_client_shallow_copy(t))}static newAndTakeCContext(e){return new r(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vsce_uokms_client_delete(this.ctxPtr),this.ctxPtr=null)}set random(r){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureImplementInterface("random",r,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_uokms_client_release_random(this.ctxPtr),e._vsce_uokms_client_use_random(this.ctxPtr,r.ctxPtr)}set operationRandom(r){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureImplementInterface("operationRandom",r,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_uokms_client_release_operation_random(this.ctxPtr),e._vsce_uokms_client_use_operation_random(this.ctxPtr,r.ctxPtr)}setupDefaults(){p.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=e._vsce_uokms_client_setup_defaults(this.ctxPtr);t.PheError.handleStatusCode(r)}setKeysOneparty(r){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("clientPrivateKey",r);const n=r.length*r.BYTES_PER_ELEMENT,_=e._malloc(n);e.HEAP8.set(r,_);const s=e._vsc_data_ctx_size(),c=e._malloc(s);e._vsc_data(c,_,n);try{const r=e._vsce_uokms_client_set_keys_oneparty(this.ctxPtr,c);t.PheError.handleStatusCode(r)}finally{e._free(_),e._free(c)}}setKeys(r,n){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("clientPrivateKey",r),p.ensureByteArray("serverPublicKey",n);const _=r.length*r.BYTES_PER_ELEMENT,s=e._malloc(_);e.HEAP8.set(r,s);const c=e._vsc_data_ctx_size(),a=e._malloc(c);e._vsc_data(a,s,_);const o=n.length*n.BYTES_PER_ELEMENT,i=e._malloc(o);e.HEAP8.set(n,i);const u=e._vsc_data_ctx_size(),l=e._malloc(u);e._vsc_data(l,i,o);try{const r=e._vsce_uokms_client_set_keys(this.ctxPtr,a,l);t.PheError.handleStatusCode(r)}finally{e._free(s),e._free(a),e._free(i),e._free(l)}}generateClientPrivateKey(){p.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=t.PheCommon.PHE_PRIVATE_KEY_LENGTH,n=e._vsc_buffer_new_with_capacity(r);try{const r=e._vsce_uokms_client_generate_client_private_key(this.ctxPtr,n);t.PheError.handleStatusCode(r);const _=e._vsc_buffer_bytes(n),s=e._vsc_buffer_len(n);return e.HEAPU8.slice(_,_+s)}finally{e._vsc_buffer_delete(n)}}generateEncryptWrap(r){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureNumber("encryptionKeyLen",r);const n=t.PheCommon.PHE_PUBLIC_KEY_LENGTH,_=e._vsc_buffer_new_with_capacity(n),s=r,c=e._vsc_buffer_new_with_capacity(s);try{const n=e._vsce_uokms_client_generate_encrypt_wrap(this.ctxPtr,_,r,c);t.PheError.handleStatusCode(n);const s=e._vsc_buffer_bytes(_),a=e._vsc_buffer_len(_),o=e.HEAPU8.slice(s,s+a),i=e._vsc_buffer_bytes(c),u=e._vsc_buffer_len(c);return{wrap:o,encryptionKey:e.HEAPU8.slice(i,i+u)}}finally{e._vsc_buffer_delete(_),e._vsc_buffer_delete(c)}}decryptOneparty(r,n){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("wrap",r),p.ensureNumber("encryptionKeyLen",n);const _=r.length*r.BYTES_PER_ELEMENT,s=e._malloc(_);e.HEAP8.set(r,s);const c=e._vsc_data_ctx_size(),a=e._malloc(c);e._vsc_data(a,s,_);const o=n,i=e._vsc_buffer_new_with_capacity(o);try{const r=e._vsce_uokms_client_decrypt_oneparty(this.ctxPtr,a,n,i);t.PheError.handleStatusCode(r);const _=e._vsc_buffer_bytes(i),c=e._vsc_buffer_len(i);return e.HEAPU8.slice(_,_+c)}finally{e._free(s),e._free(a),e._vsc_buffer_delete(i)}}generateDecryptRequest(r){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("wrap",r);const n=r.length*r.BYTES_PER_ELEMENT,_=e._malloc(n);e.HEAP8.set(r,_);const s=e._vsc_data_ctx_size(),c=e._malloc(s);e._vsc_data(c,_,n);const a=t.PheCommon.PHE_PRIVATE_KEY_LENGTH,o=e._vsc_buffer_new_with_capacity(a),i=t.PheCommon.PHE_PUBLIC_KEY_LENGTH,u=e._vsc_buffer_new_with_capacity(i);try{const r=e._vsce_uokms_client_generate_decrypt_request(this.ctxPtr,c,o,u);t.PheError.handleStatusCode(r);const n=e._vsc_buffer_bytes(o),s=e._vsc_buffer_len(o),a=e.HEAPU8.slice(n,n+s),i=e._vsc_buffer_bytes(u),l=e._vsc_buffer_len(u);return{deblindFactor:a,decryptRequest:e.HEAPU8.slice(i,i+l)}}finally{e._free(_),e._free(c),e._vsc_buffer_delete(o),e._vsc_buffer_delete(u)}}processDecryptResponse(r,n,_,s,c){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("wrap",r),p.ensureByteArray("decryptRequest",n),p.ensureByteArray("decryptResponse",_),p.ensureByteArray("deblindFactor",s),p.ensureNumber("encryptionKeyLen",c);const a=r.length*r.BYTES_PER_ELEMENT,o=e._malloc(a);e.HEAP8.set(r,o);const i=e._vsc_data_ctx_size(),u=e._malloc(i);e._vsc_data(u,o,a);const l=n.length*n.BYTES_PER_ELEMENT,f=e._malloc(l);e.HEAP8.set(n,f);const d=e._vsc_data_ctx_size(),h=e._malloc(d);e._vsc_data(h,f,l);const v=_.length*_.BYTES_PER_ELEMENT,m=e._malloc(v);e.HEAP8.set(_,m);const y=e._vsc_data_ctx_size(),E=e._malloc(y);e._vsc_data(E,m,v);const P=s.length*s.BYTES_PER_ELEMENT,w=e._malloc(P);e.HEAP8.set(s,w);const x=e._vsc_data_ctx_size(),A=e._malloc(x);e._vsc_data(A,w,P);const b=c,N=e._vsc_buffer_new_with_capacity(b);try{const r=e._vsce_uokms_client_process_decrypt_response(this.ctxPtr,u,h,E,A,c,N);t.PheError.handleStatusCode(r);const n=e._vsc_buffer_bytes(N),_=e._vsc_buffer_len(N);return e.HEAPU8.slice(n,n+_)}finally{e._free(o),e._free(u),e._free(f),e._free(h),e._free(m),e._free(E),e._free(w),e._free(A),e._vsc_buffer_delete(N)}}rotateKeysOneparty(r){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("updateToken",r);const n=r.length*r.BYTES_PER_ELEMENT,_=e._malloc(n);e.HEAP8.set(r,_);const s=e._vsc_data_ctx_size(),c=e._malloc(s);e._vsc_data(c,_,n);const a=t.PheCommon.PHE_PRIVATE_KEY_LENGTH,o=e._vsc_buffer_new_with_capacity(a);try{const r=e._vsce_uokms_client_rotate_keys_oneparty(this.ctxPtr,c,o);t.PheError.handleStatusCode(r);const n=e._vsc_buffer_bytes(o),s=e._vsc_buffer_len(o);return e.HEAPU8.slice(n,n+s)}finally{e._free(_),e._free(c),e._vsc_buffer_delete(o)}}generateUpdateTokenOneparty(){p.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=t.PheCommon.PHE_PRIVATE_KEY_LENGTH,n=e._vsc_buffer_new_with_capacity(r);try{const r=e._vsce_uokms_client_generate_update_token_oneparty(this.ctxPtr,n);t.PheError.handleStatusCode(r);const _=e._vsc_buffer_bytes(n),s=e._vsc_buffer_len(n);return e.HEAPU8.slice(_,_+s)}finally{e._vsc_buffer_delete(n)}}rotateKeys(r){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("updateToken",r);const n=r.length*r.BYTES_PER_ELEMENT,_=e._malloc(n);e.HEAP8.set(r,_);const s=e._vsc_data_ctx_size(),c=e._malloc(s);e._vsc_data(c,_,n);const a=t.PheCommon.PHE_PRIVATE_KEY_LENGTH,o=e._vsc_buffer_new_with_capacity(a),i=t.PheCommon.PHE_PUBLIC_KEY_LENGTH,u=e._vsc_buffer_new_with_capacity(i);try{const r=e._vsce_uokms_client_rotate_keys(this.ctxPtr,c,o,u);t.PheError.handleStatusCode(r);const n=e._vsc_buffer_bytes(o),s=e._vsc_buffer_len(o),a=e.HEAPU8.slice(n,n+s),i=e._vsc_buffer_bytes(u),l=e._vsc_buffer_len(u);return{newClientPrivateKey:a,newServerPublicKey:e.HEAPU8.slice(i,i+l)}}finally{e._free(_),e._free(c),e._vsc_buffer_delete(o),e._vsc_buffer_delete(u)}}}return r};var w=(e,t)=>{class r{constructor(t){this.name="UokmsServer",this.ctxPtr=void 0===t?e._vsce_uokms_server_new():t}static newAndUseCContext(t){return new r(e._vsce_uokms_server_shallow_copy(t))}static newAndTakeCContext(e){return new r(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vsce_uokms_server_delete(this.ctxPtr),this.ctxPtr=null)}set random(r){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureImplementInterface("random",r,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_uokms_server_release_random(this.ctxPtr),e._vsce_uokms_server_use_random(this.ctxPtr,r.ctxPtr)}set operationRandom(r){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureImplementInterface("operationRandom",r,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_uokms_server_release_operation_random(this.ctxPtr),e._vsce_uokms_server_use_operation_random(this.ctxPtr,r.ctxPtr)}setupDefaults(){p.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=e._vsce_uokms_server_setup_defaults(this.ctxPtr);t.PheError.handleStatusCode(r)}generateServerKeyPair(){p.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=t.PheCommon.PHE_PRIVATE_KEY_LENGTH,n=e._vsc_buffer_new_with_capacity(r),_=t.PheCommon.PHE_PUBLIC_KEY_LENGTH,s=e._vsc_buffer_new_with_capacity(_);try{const r=e._vsce_uokms_server_generate_server_key_pair(this.ctxPtr,n,s);t.PheError.handleStatusCode(r);const _=e._vsc_buffer_bytes(n),c=e._vsc_buffer_len(n),a=e.HEAPU8.slice(_,_+c),o=e._vsc_buffer_bytes(s),i=e._vsc_buffer_len(s);return{serverPrivateKey:a,serverPublicKey:e.HEAPU8.slice(o,o+i)}}finally{e._vsc_buffer_delete(n),e._vsc_buffer_delete(s)}}decryptResponseLen(){let t;return p.ensureNotNull("this.ctxPtr",this.ctxPtr),t=e._vsce_uokms_server_decrypt_response_len(this.ctxPtr),t}processDecryptRequest(r,n){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("serverPrivateKey",r),p.ensureByteArray("decryptRequest",n);const _=r.length*r.BYTES_PER_ELEMENT,s=e._malloc(_);e.HEAP8.set(r,s);const c=e._vsc_data_ctx_size(),a=e._malloc(c);e._vsc_data(a,s,_);const o=n.length*n.BYTES_PER_ELEMENT,i=e._malloc(o);e.HEAP8.set(n,i);const u=e._vsc_data_ctx_size(),l=e._malloc(u);e._vsc_data(l,i,o);const f=this.decryptResponseLen(),d=e._vsc_buffer_new_with_capacity(f);try{const r=e._vsce_uokms_server_process_decrypt_request(this.ctxPtr,a,l,d);t.PheError.handleStatusCode(r);const n=e._vsc_buffer_bytes(d),_=e._vsc_buffer_len(d);return e.HEAPU8.slice(n,n+_)}finally{e._free(s),e._free(a),e._free(i),e._free(l),e._vsc_buffer_delete(d)}}rotateKeys(r){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("serverPrivateKey",r);const n=r.length*r.BYTES_PER_ELEMENT,_=e._malloc(n);e.HEAP8.set(r,_);const s=e._vsc_data_ctx_size(),c=e._malloc(s);e._vsc_data(c,_,n);const a=t.PheCommon.PHE_PRIVATE_KEY_LENGTH,o=e._vsc_buffer_new_with_capacity(a),i=t.PheCommon.PHE_PUBLIC_KEY_LENGTH,u=e._vsc_buffer_new_with_capacity(i),l=t.PheCommon.PHE_PRIVATE_KEY_LENGTH,f=e._vsc_buffer_new_with_capacity(l);try{const r=e._vsce_uokms_server_rotate_keys(this.ctxPtr,c,o,u,f);t.PheError.handleStatusCode(r);const n=e._vsc_buffer_bytes(o),s=e._vsc_buffer_len(o),a=e.HEAPU8.slice(n,n+s),i=e._vsc_buffer_bytes(u),l=e._vsc_buffer_len(u),d=e.HEAPU8.slice(i,i+l),h=e._vsc_buffer_bytes(f),p=e._vsc_buffer_len(f);return{newServerPrivateKey:a,newServerPublicKey:d,updateToken:e.HEAPU8.slice(h,h+p)}}finally{e._free(_),e._free(c),e._vsc_buffer_delete(o),e._vsc_buffer_delete(u),e._vsc_buffer_delete(f)}}}return r};var x=(e,t)=>{class r{constructor(t){this.name="UokmsWrapRotation",this.ctxPtr=void 0===t?e._vsce_uokms_wrap_rotation_new():t}static newAndUseCContext(t){return new r(e._vsce_uokms_wrap_rotation_shallow_copy(t))}static newAndTakeCContext(e){return new r(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vsce_uokms_wrap_rotation_delete(this.ctxPtr),this.ctxPtr=null)}set operationRandom(r){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureImplementInterface("operationRandom",r,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_uokms_wrap_rotation_release_operation_random(this.ctxPtr),e._vsce_uokms_wrap_rotation_use_operation_random(this.ctxPtr,r.ctxPtr)}setupDefaults(){p.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=e._vsce_uokms_wrap_rotation_setup_defaults(this.ctxPtr);t.PheError.handleStatusCode(r)}setUpdateToken(r){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("updateToken",r);const n=r.length*r.BYTES_PER_ELEMENT,_=e._malloc(n);e.HEAP8.set(r,_);const s=e._vsc_data_ctx_size(),c=e._malloc(s);e._vsc_data(c,_,n);try{const r=e._vsce_uokms_wrap_rotation_set_update_token(this.ctxPtr,c);t.PheError.handleStatusCode(r)}finally{e._free(_),e._free(c)}}updateWrap(r){p.ensureNotNull("this.ctxPtr",this.ctxPtr),p.ensureByteArray("wrap",r);const n=r.length*r.BYTES_PER_ELEMENT,_=e._malloc(n);e.HEAP8.set(r,_);const s=e._vsc_data_ctx_size(),c=e._malloc(s);e._vsc_data(c,_,n);const a=t.PheCommon.PHE_PUBLIC_KEY_LENGTH,o=e._vsc_buffer_new_with_capacity(a);try{const r=e._vsce_uokms_wrap_rotation_update_wrap(this.ctxPtr,c,o);t.PheError.handleStatusCode(r);const n=e._vsc_buffer_bytes(o),s=e._vsc_buffer_len(o);return e.HEAPU8.slice(n,n+s)}finally{e._free(_),e._free(c),e._vsc_buffer_delete(o)}}}return r};var A=()=>{const s=new e;return new Promise((e,c)=>{s.onRuntimeInitialized=()=>{const c={};c.FoundationError=t(),c.FoundationInterface=r(s,c),c.FoundationInterfaceTag=n(),c.FoundationImplTag=_(),c.CtrDrbg=o(s,c),c.Hmac=i(s,c),c.Hkdf=u(s,c),c.Sha512=l(s,c),c.PheError=f(),c.PheCommon=v(),c.PheServer=m(s,c),c.PheClient=y(s,c),c.PheCipher=E(s,c),c.UokmsClient=P(s,c),c.UokmsServer=w(s,c),c.UokmsWrapRotation=x(s,c),e(c)},s.onAbort=e=>{c(new Error(e))}})};module.exports=A;
