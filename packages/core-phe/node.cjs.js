"use strict";function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var libphe=createCommonjsModule((function(e,t){t=function(e){function t(e,t){e||s("Assertion failed: "+t)}function n(e,t,n){var r=t+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.subarray&&re)return re.decode(e.subarray(t,n));for(r="";t<n;){var o=e[t++];if(128&o){var a=63&e[t++];if(192==(224&o))r+=String.fromCharCode((31&o)<<6|a);else{var c=63&e[t++];65536>(o=224==(240&o)?(15&o)<<12|a<<6|c:(7&o)<<18|a<<12|c<<6|63&e[t++])?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|1023&o))}}else r+=String.fromCharCode(o)}return r}function r(e){return 0<e%65536&&(e+=65536-e%65536),e}function o(e){oe=e,K.HEAP8=ae=new Int8Array(e),K.HEAP16=se=new Int16Array(e),K.HEAP32=ie=new Int32Array(e),K.HEAPU8=ce=new Uint8Array(e),K.HEAPU16=new Uint16Array(e),K.HEAPU32=new Uint32Array(e),K.HEAPF32=new Float32Array(e),K.HEAPF64=new Float64Array(e)}function a(e){for(;0<e.length;){var t=e.shift();if("function"==typeof t)t();else{var n=t.Fe;"number"==typeof n?void 0===t.Ob?K.dynCall_v(n):K.dynCall_vi(n,t.Ob):n(void 0===t.Ob?null:t.Ob)}}}function c(){var e=K.preRun.shift();ue.unshift(e)}function s(e){throw K.onAbort&&K.onAbort(e),q(e),Z(e),ne=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}function i(){var e=we;return String.prototype.startsWith?e.startsWith("data:application/octet-stream;base64,"):0===e.indexOf("data:application/octet-stream;base64,")}function _(e,t){for(var n=0,r=e.length-1;0<=r;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e}function u(e){var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=_(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function l(e){var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],e||t?(t&&(t=t.substr(0,t.length-1)),e+t):"."}function f(e){if("/"===e)return"/";var t=e.lastIndexOf("/");return-1===t?e:e.substr(t+1)}function d(){return u(Array.prototype.slice.call(arguments,0).join("/"))}function h(e,t){return u(e+"/"+t)}function p(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){if("string"!=typeof(t=0<=n?arguments[n]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t="/"===t.charAt(0)}return(t?"/":"")+(e=_(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."}function v(e,t){Se[e]={input:[],output:[],Jb:t},g(e,Re)}function y(e,t){if(t=t||{},!(e=p("/",e)))return{path:"",node:null};var n,r={Zb:!0,Sb:0};for(n in r)void 0===t[n]&&(t[n]=r[n]);if(8<t.Sb)throw new Oe(32);e=_(e.split("/").filter((function(e){return!!e})),!1);var o=$e;for(r="/",n=0;n<e.length;n++){var a=n===e.length-1;if(a&&t.parent)break;if(o=E(o,e[n]),r=h(r,e[n]),o.Nb&&(!a||a&&t.Zb)&&(o=o.Nb.root),!a||t.Yb)for(a=0;40960==(61440&o.mode);)if(o=k(r),o=y(r=p(l(r),o),{Sb:t.Sb}).node,40<a++)throw new Oe(32)}return{path:r,node:o}}function m(e){for(var t;;){if(e===e.parent)return e=e.Bb.cc,t?"/"!==e[e.length-1]?e+"/"+t:e+t:e;t=t?e.name+"/"+t:e.name,e=e.parent}}function b(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%Ye.length}function E(e,t){var n;if(n=(n=x(e,"x"))?n:e.xb.lookup?0:2)throw new Oe(n,e);for(n=Ye[b(e.id,t)];n;n=n.hc){var r=n.name;if(n.parent.id===e.id&&r===t)return n}return e.xb.lookup(e,t)}function w(e,t,n,r){return Te||((Te=function(e,t,n,r){e||(e=this),this.parent=e,this.Bb=e.Bb,this.Nb=null,this.id=ze++,this.name=t,this.mode=n,this.xb={},this.yb={},this.rdev=r}).prototype={},Object.defineProperties(Te.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}}})),function(e){var t=b(e.parent.id,e.name);e.hc=Ye[t],Ye[t]=e}(e=new Te(e,t,n,r)),e}function P(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t}function x(e,t){return Ue?0:(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:2}function A(e,t){try{return E(e,t),20}catch(e){}return x(e,"wx")}function N(e,t){Ce||((Ce=function(){}).prototype={},Object.defineProperties(Ce.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}}}));var n,r=new Ce;for(n in e)r[n]=e[n];return e=r,t=function(e){for(e=e||0;4096>=e;e++)if(!Me[e])return e;throw new Oe(33)}(t),e.fd=t,Me[t]=e}function g(e,t){De[e]={yb:t}}function T(e,t){var n="/"===t,r=!t;if(n&&$e)throw new Oe(10);if(!n&&!r){var o=y(t,{Zb:!1});if(t=o.path,(o=o.node).Nb)throw new Oe(10);if(16384!=(61440&o.mode))throw new Oe(54)}t={type:e,Qb:{},cc:t,gc:[]},(e=e.Bb(t)).Bb=t,t.root=e,n?$e=e:o&&(o.Nb=t,o.Bb&&o.Bb.gc.push(t))}function C(e,t,n){var r=y(e,{parent:!0}).node;if(!(e=f(e))||"."===e||".."===e)throw new Oe(28);var o=A(r,e);if(o)throw new Oe(o);if(!r.xb.Kb)throw new Oe(63);return r.xb.Kb(r,e,t,n)}function I(e){C(e,16895,0)}function S(e,t,n){void 0===n&&(n=t,t=438),C(e,8192|t,n)}function R(e,t){if(!p(e))throw new Oe(44);var n=y(t,{parent:!0}).node;if(!n)throw new Oe(44);var r=A(n,t=f(t));if(r)throw new Oe(r);if(!n.xb.symlink)throw new Oe(63);n.xb.symlink(n,t,e)}function k(e){if(!(e=y(e).node))throw new Oe(44);if(!e.xb.readlink)throw new Oe(28);return p(m(e.parent),e.xb.readlink(e))}function H(e,t,n,r){if(""===e)throw new Oe(44);if("string"==typeof t){var o=We[t];if(void 0===o)throw Error("Unknown file open mode: "+t);t=o}if(n=64&t?4095&(void 0===n?438:n)|32768:0,"object"==typeof e)var a=e;else{e=u(e);try{a=y(e,{Yb:!(131072&t)}).node}catch(e){}}if(o=!1,64&t)if(a){if(128&t)throw new Oe(20)}else a=C(e,n,0),o=!0;if(!a)throw new Oe(44);if(8192==(61440&a.mode)&&(t&=-513),65536&t&&16384!=(61440&a.mode))throw new Oe(54);if(!o&&(n=a?40960==(61440&a.mode)?32:16384==(61440&a.mode)&&("r"!==P(t)||512&t)?31:x(a,P(t)):44))throw new Oe(n);if(512&t){var c;if(!(c="string"==typeof(n=a)?y(n,{Yb:!0}).node:n).xb.Db)throw new Oe(63);if(16384==(61440&c.mode))throw new Oe(31);if(32768!=(61440&c.mode))throw new Oe(28);if(n=x(c,"w"))throw new Oe(n);c.xb.Db(c,{size:0,timestamp:Date.now()})}t&=-641,(r=N({node:a,path:m(a),flags:t,seekable:!0,position:0,yb:a.yb,lc:[],error:!1},r)).yb.open&&r.yb.open(r),!K.logReadFiles||1&t||(Ie||(Ie={}),e in Ie||(Ie[e]=1,console.log("FS.trackingDelegate error on read file: "+e)));try{Ke.onOpenFile&&(a=0,1!=(2097155&t)&&(a|=1),0!=(2097155&t)&&(a|=2),Ke.onOpenFile(e,a))}catch(t){console.log("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+t.message)}return r}function L(e,t,n){if(null===e.fd)throw new Oe(8);if(!e.seekable||!e.yb.Gb)throw new Oe(70);if(0!=n&&1!=n&&2!=n)throw new Oe(28);e.position=e.yb.Gb(e,t,n),e.lc=[]}function F(){Oe||((Oe=function(e,t){this.node=t,this.jc=function(e){this.Ib=e},this.jc(e),this.message="FS error"}).prototype=Error(),Oe.prototype.constructor=Oe,[44].forEach((function(e){Ge[e]=new Oe(e),Ge[e].stack="<generic error, no stack>"})))}function B(e,t,n){e=h("/dev",e);var r=function(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n}(!!t,!!n);ge||(ge=64);var o=ge++<<8|0;g(o,{open:function(e){e.seekable=!1},close:function(){n&&n.buffer&&n.buffer.length&&n(10)},read:function(e,n,r,o){for(var a=0,c=0;c<o;c++){try{var s=t()}catch(e){throw new Oe(29)}if(void 0===s&&0===a)throw new Oe(6);if(null==s)break;a++,n[r+c]=s}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,r,o){for(var a=0;a<o;a++)try{n(t[r+a])}catch(e){throw new Oe(29)}return o&&(e.node.timestamp=Date.now()),a}}),S(e,r,o)}function $(){return ie[(Xe+=4)-4>>2]}function D(e){if(e||(e=$()),!(e=Me[e]))throw new Oe(8);return e}function M(e){try{var t=D(e);if(null===t.fd)throw new Oe(8);t.Pb&&(t.Pb=null);try{t.yb.close&&t.yb.close(t)}catch(e){throw e}finally{Me[t.fd]=null}return t.fd=null,0}catch(e){return void 0!==je&&e instanceof Oe||s(e),e.Ib}}function z(e,t,n,r){try{e:{for(var o=D(e),a=e=0;a<n;a++){var c=o,i=ie[t+8*a>>2],_=ie[t+(8*a+4)>>2],u=void 0,l=ae;if(0>_||0>u)throw new Oe(28);if(null===c.fd)throw new Oe(8);if(0==(2097155&c.flags))throw new Oe(8);if(16384==(61440&c.node.mode))throw new Oe(31);if(!c.yb.write)throw new Oe(28);1024&c.flags&&L(c,0,2);var f=void 0!==u;if(f){if(!c.seekable)throw new Oe(70)}else u=c.position;var d=c.yb.write(c,l,i,_,u,void 0);f||(c.position+=d);try{c.path&&Ke.onWriteToFile&&Ke.onWriteToFile(c.path)}catch(e){console.log("FS.trackingDelegate['onWriteToFile']('"+c.path+"') threw an exception: "+e.message)}if(0>(c=d)){var h=-1;break e}e+=c}h=e}return ie[r>>2]=h,0}catch(e){return void 0!==je&&e instanceof Oe||s(e),e.Ib}}function Y(){return ae.length}function U(){function e(){if(!et&&(et=!0,!ne)){if(K.noFSInit||Ne||(Ne=!0,F(),K.stdin=K.stdin,K.stdout=K.stdout,K.stderr=K.stderr,K.stdin?B("stdin",K.stdin):R("/dev/tty","/dev/stdin"),K.stdout?B("stdout",null,K.stdout):R("/dev/tty","/dev/stdout"),K.stderr?B("stderr",null,K.stderr):R("/dev/tty1","/dev/stderr"),H("/dev/stdin","r"),H("/dev/stdout","w"),H("/dev/stderr","w")),a(le),Ue=!1,a(fe),K.onRuntimeInitialized&&K.onRuntimeInitialized(),K.postRun)for("function"==typeof K.postRun&&(K.postRun=[K.postRun]);K.postRun.length;){var e=K.postRun.shift();de.unshift(e)}a(de)}}if(!(0<me)){if(K.preRun)for("function"==typeof K.preRun&&(K.preRun=[K.preRun]);K.preRun.length;)c();a(ue),0<me||(K.setStatus?(K.setStatus("Running..."),setTimeout((function(){setTimeout((function(){K.setStatus("")}),1),e()}),1)):e())}}var K;e=e||{},K||(K=void 0!==e?e:{});var O,G,W,V,j={};for(O in K)K.hasOwnProperty(O)&&(j[O]=K[O]);G=__dirname+"/";var X=function(e){return(e=function(e){return W||(W=require("fs")),V||(V=require("path")),e=V.normalize(e),W.readFileSync(e)}(e)).buffer||(e=new Uint8Array(e)),t(e.buffer),e};1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){throw e})),process.on("unhandledRejection",s),K.inspect=function(){return"[Emscripten Module object]"};var q=K.print||console.log.bind(console),Z=K.printErr||console.warn.bind(console);for(O in j)j.hasOwnProperty(O)&&(K[O]=j[O]);j=null;var J,Q={"f64-rem":function(e,t){return e%t},debugger:function(){}};K.wasmBinary&&(J=K.wasmBinary),"object"!=typeof WebAssembly&&Z("no native wasm support detected");var ee,te=new WebAssembly.Table({initial:286,maximum:286,element:"anyfunc"}),ne=!1,re="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var oe,ae,ce,se,ie,_e=K.TOTAL_MEMORY||16777216;(ee=K.wasmMemory?K.wasmMemory:new WebAssembly.Memory({initial:_e/65536}))&&(oe=ee.buffer),_e=oe.byteLength,o(oe),ie[7868]=5274560;var ue=[],le=[],fe=[],de=[],he=Math.abs,pe=Math.ceil,ve=Math.floor,ye=Math.min,me=0,be=null,Ee=null;K.preloadedImages={},K.preloadedAudios={};var we="libphe.wasm";if(!i()){var Pe=we;we=K.locateFile?K.locateFile(Pe,G):G+Pe}K.asm=function(){function e(e){K.asm=e.exports,me--,K.monitorRunDependencies&&K.monitorRunDependencies(me),0==me&&(null!==be&&(clearInterval(be),be=null),Ee&&(e=Ee,Ee=null,e()))}function t(t){e(t.instance)}function n(e){return new Promise((function(e){e:{try{if(J){var t=new Uint8Array(J);break e}if(X){t=X(we);break e}throw"both async and sync fetching of the wasm failed"}catch(e){s(e)}t=void 0}e(t)})).then((function(e){return WebAssembly.instantiate(e,r)})).then(e,(function(e){Z("failed to asynchronously prepare wasm: "+e),s(e)}))}var r={env:Je,wasi_unstable:Je,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:Q};if(me++,K.monitorRunDependencies&&K.monitorRunDependencies(me),K.instantiateWasm)try{return K.instantiateWasm(r,e)}catch(e){return Z("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(J||"function"!=typeof WebAssembly.instantiateStreaming||i()||"function"!=typeof fetch)return n(t);fetch(we,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,r).then(t,(function(e){Z("wasm streaming compile failed: "+e),Z("falling back to ArrayBuffer instantiation"),n(t)}))}))}(),{}};var xe,Ae,Ne,ge,Te,Ce,Ie,Se=[],Re={open:function(e){var t=Se[e.node.rdev];if(!t)throw new Oe(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.Jb.flush(e.tty)},flush:function(e){e.tty.Jb.flush(e.tty)},read:function(e,t,n,r){if(!e.tty||!e.tty.Jb.ac)throw new Oe(60);for(var o=0,a=0;a<r;a++){try{var c=e.tty.Jb.ac(e.tty)}catch(e){throw new Oe(29)}if(void 0===c&&0===o)throw new Oe(6);if(null==c)break;o++,t[n+a]=c}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,n,r){if(!e.tty||!e.tty.Jb.Rb)throw new Oe(60);try{for(var o=0;o<r;o++)e.tty.Jb.Rb(e.tty,t[n+o])}catch(e){throw new Oe(29)}return r&&(e.node.timestamp=Date.now()),o}},ke={ac:function(e){if(!e.input.length){var t=null,n=Buffer.mc?Buffer.mc(256):new Buffer(256),r=0;try{r=qe.readSync(process.stdin.fd,n,0,256,null)}catch(e){if(-1==e.toString().indexOf("EOF"))throw e;r=0}if(!(t=0<r?n.slice(0,r).toString("utf-8"):null))return null;for(r=n=0;r<t.length;++r){var o=t.charCodeAt(r);55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++r)),127>=o?++n:n=2047>=o?n+2:65535>=o?n+3:n+4}var a=(n=Array(n+1)).length;if(r=0,0<a){o=r,a=r+a-1;for(var c=0;c<t.length;++c){var s=t.charCodeAt(c);if(55296<=s&&57343>=s&&(s=65536+((1023&s)<<10)|1023&t.charCodeAt(++c)),127>=s){if(r>=a)break;n[r++]=s}else{if(2047>=s){if(r+1>=a)break;n[r++]=192|s>>6}else{if(65535>=s){if(r+2>=a)break;n[r++]=224|s>>12}else{if(r+3>=a)break;n[r++]=240|s>>18,n[r++]=128|s>>12&63}n[r++]=128|s>>6&63}n[r++]=128|63&s}}n[r]=0,t=r-o}else t=0;n.length=t,e.input=n}return e.input.shift()},Rb:function(e,t){null===t||10===t?(q(n(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&0<e.output.length&&(q(n(e.output,0)),e.output=[])}},He={Rb:function(e,t){null===t||10===t?(Z(n(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&0<e.output.length&&(Z(n(e.output,0)),e.output=[])}},Le={Eb:null,Bb:function(){return Le.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(24576==(61440&n)||4096==(61440&n))throw new Oe(63);return Le.Eb||(Le.Eb={dir:{node:{Fb:Le.xb.Fb,Db:Le.xb.Db,lookup:Le.xb.lookup,Kb:Le.xb.Kb,rename:Le.xb.rename,unlink:Le.xb.unlink,rmdir:Le.xb.rmdir,readdir:Le.xb.readdir,symlink:Le.xb.symlink},stream:{Gb:Le.yb.Gb}},file:{node:{Fb:Le.xb.Fb,Db:Le.xb.Db},stream:{Gb:Le.yb.Gb,read:Le.yb.read,write:Le.yb.write,Tb:Le.yb.Tb,bc:Le.yb.bc,dc:Le.yb.dc}},link:{node:{Fb:Le.xb.Fb,Db:Le.xb.Db,readlink:Le.xb.readlink},stream:{}},Vb:{node:{Fb:Le.xb.Fb,Db:Le.xb.Db},stream:Ve}}),16384==(61440&(n=w(e,t,n,r)).mode)?(n.xb=Le.Eb.dir.node,n.yb=Le.Eb.dir.stream,n.wb={}):32768==(61440&n.mode)?(n.xb=Le.Eb.file.node,n.yb=Le.Eb.file.stream,n.zb=0,n.wb=null):40960==(61440&n.mode)?(n.xb=Le.Eb.link.node,n.yb=Le.Eb.link.stream):8192==(61440&n.mode)&&(n.xb=Le.Eb.Vb.node,n.yb=Le.Eb.Vb.stream),n.timestamp=Date.now(),e&&(e.wb[t]=n),n},Ge:function(e){if(e.wb&&e.wb.subarray){for(var t=[],n=0;n<e.zb;++n)t.push(e.wb[n]);return t}return e.wb},He:function(e){return e.wb?e.wb.subarray?e.wb.subarray(0,e.zb):new Uint8Array(e.wb):new Uint8Array},Wb:function(e,t){var n=e.wb?e.wb.length:0;n>=t||(t=Math.max(t,n*(1048576>n?2:1.125)|0),0!=n&&(t=Math.max(t,256)),n=e.wb,e.wb=new Uint8Array(t),0<e.zb&&e.wb.set(n.subarray(0,e.zb),0))},ic:function(e,t){if(e.zb!=t)if(0==t)e.wb=null,e.zb=0;else{if(!e.wb||e.wb.subarray){var n=e.wb;e.wb=new Uint8Array(new ArrayBuffer(t)),n&&e.wb.set(n.subarray(0,Math.min(t,e.zb)))}else if(e.wb||(e.wb=[]),e.wb.length>t)e.wb.length=t;else for(;e.wb.length<t;)e.wb.push(0);e.zb=t}},xb:{Fb:function(e){var t={};return t.dev=8192==(61440&e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,16384==(61440&e.mode)?t.size=4096:32768==(61440&e.mode)?t.size=e.zb:40960==(61440&e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.Hb=4096,t.blocks=Math.ceil(t.size/t.Hb),t},Db:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&Le.ic(e,t.size)},lookup:function(){throw Ge[44]},Kb:function(e,t,n,r){return Le.createNode(e,t,n,r)},rename:function(e,t,n){if(16384==(61440&e.mode)){try{var r=E(t,n)}catch(e){}if(r)for(var o in r.wb)throw new Oe(55)}delete e.parent.wb[e.name],e.name=n,t.wb[n]=e,e.parent=t},unlink:function(e,t){delete e.wb[t]},rmdir:function(e,t){var n,r=E(e,t);for(n in r.wb)throw new Oe(55);delete e.wb[t]},readdir:function(e){var t,n=[".",".."];for(t in e.wb)e.wb.hasOwnProperty(t)&&n.push(t);return n},symlink:function(e,t,n){return(e=Le.createNode(e,t,41471,0)).link=n,e},readlink:function(e){if(40960!=(61440&e.mode))throw new Oe(28);return e.link}},yb:{read:function(e,t,n,r,o){var a=e.node.wb;if(o>=e.node.zb)return 0;if(8<(e=Math.min(e.node.zb-o,r))&&a.subarray)t.set(a.subarray(o,o+e),n);else for(r=0;r<e;r++)t[n+r]=a[o+r];return e},write:function(e,t,n,r,o,a){if(a=!1,!r)return 0;if((e=e.node).timestamp=Date.now(),t.subarray&&(!e.wb||e.wb.subarray)){if(a)return e.wb=t.subarray(n,n+r),e.zb=r;if(0===e.zb&&0===o)return e.wb=new Uint8Array(t.subarray(n,n+r)),e.zb=r;if(o+r<=e.zb)return e.wb.set(t.subarray(n,n+r),o),r}if(Le.Wb(e,o+r),e.wb.subarray&&t.subarray)e.wb.set(t.subarray(n,n+r),o);else for(a=0;a<r;a++)e.wb[o+a]=t[n+a];return e.zb=Math.max(e.zb,o+r),r},Gb:function(e,t,n){if(1===n?t+=e.position:2===n&&32768==(61440&e.node.mode)&&(t+=e.node.zb),0>t)throw new Oe(28);return t},Tb:function(e,t,n){Le.Wb(e.node,t+n),e.node.zb=Math.max(e.node.zb,t+n)},bc:function(e,t,n,r,o,a,c){if(32768!=(61440&e.node.mode))throw new Oe(43);if(n=e.node.wb,2&c||n.buffer!==t&&n.buffer!==t.buffer){if((0<o||o+r<e.node.zb)&&(n=n.subarray?n.subarray(o,o+r):Array.prototype.slice.call(n,o,o+r)),e=!0,o=t.buffer==ae.buffer,!(r=tt(r)))throw new Oe(48);(o?ae:t).set(n,r)}else e=!1,r=n.byteOffset;return{Ie:r,Ee:e}},dc:function(e,t,n,r,o){if(32768!=(61440&e.node.mode))throw new Oe(43);return 2&o?0:(Le.yb.write(e,t,0,r,n,!1),0)}}},Fe={ee:63,Ed:44,re:71,Zc:27,ad:29,ae:60,nc:1,Fd:45,wc:8,Fc:12,tc:6,Be:6,Jd:48,oc:2,Sc:21,Sd:105,Dc:10,Rc:20,Ce:75,Dd:43,Ud:54,cd:31,$c:28,yd:41,qd:33,Zd:59,ye:74,Tc:22,Od:51,qe:70,ne:69,rd:34,ge:64,Oc:18,ke:68,Kd:49,Wc:24,Gc:106,ed:156,gd:107,hd:108,od:109,ze:110,Bd:111,dd:112,Lc:16,Gd:46,vc:113,zc:114,De:115,zd:104,Ac:103,Bc:102,Mc:16,Cc:101,Qd:100,Cd:116,ve:117,Pd:118,Ld:119,Md:120,me:121,Hd:47,rc:122,se:123,Hc:124,he:65,td:36,Pc:125,yc:9,$d:126,xc:127,le:128,jd:129,kd:130,nd:131,md:132,ld:133,Rd:52,Vd:55,ud:37,pd:32,be:138,fe:139,Kc:15,Ad:42,sc:5,je:67,Xd:57,Nd:50,oe:140,Jc:14,pc:3,Ic:13,xd:40,vd:38,we:73,Uc:142,Vc:23,Yc:26,uc:7,Nc:17,sd:35,ie:66,pe:137,qc:4,wd:39,bd:30,Td:53,xe:141,Ae:136,Qc:19,te:72,Yd:138,Id:148,Xc:25,ce:61,Ec:11,Wd:56,de:62,ue:135},Be={Mb:!1,kc:function(){Be.Mb=!!process.platform.match(/^win/);var e=process.binding("constants");e.fs&&(e=e.fs),Be.Xb={1024:e.O_APPEND,64:e.O_CREAT,128:e.O_EXCL,0:e.O_RDONLY,2:e.O_RDWR,4096:e.O_SYNC,512:e.O_TRUNC,1:e.O_WRONLY}},Ub:function(e){return Buffer.alloc?Buffer.from(e):new Buffer(e)},Ab:function(e){return t((e=e.code)in Fe),Fe[e]},Bb:function(e){return t(!0),Be.createNode(null,"/",Be.$b(e.Qb.root),0)},createNode:function(e,t,n){if(16384!=(61440&n)&&32768!=(61440&n)&&40960!=(61440&n))throw new Oe(28);return(e=w(e,t,n)).xb=Be.xb,e.yb=Be.yb,e},$b:function(e){try{var t=qe.lstatSync(e);Be.Mb&&(t.mode|=(292&t.mode)>>2)}catch(e){if(!e.code)throw e;throw new Oe(Be.Ab(e))}return t.mode},Cb:function(e){for(var t=[];e.parent!==e;)t.push(e.name),e=e.parent;return t.push(e.Bb.Qb.root),t.reverse(),d.apply(null,t)},ec:function(e){e&=-2656257;var t,n=0;for(t in Be.Xb)e&t&&(n|=Be.Xb[t],e^=t);if(e)throw new Oe(28);return n},xb:{Fb:function(e){e=Be.Cb(e);try{var t=qe.lstatSync(e)}catch(e){if(!e.code)throw e;throw new Oe(Be.Ab(e))}return Be.Mb&&!t.Hb&&(t.Hb=4096),Be.Mb&&!t.blocks&&(t.blocks=(t.size+t.Hb-1)/t.Hb|0),{dev:t.dev,ino:t.ino,mode:t.mode,nlink:t.nlink,uid:t.uid,gid:t.gid,rdev:t.rdev,size:t.size,atime:t.atime,mtime:t.mtime,ctime:t.ctime,Hb:t.Hb,blocks:t.blocks}},Db:function(e,t){var n=Be.Cb(e);try{void 0!==t.mode&&(qe.chmodSync(n,t.mode),e.mode=t.mode),void 0!==t.size&&qe.truncateSync(n,t.size)}catch(e){if(!e.code)throw e;throw new Oe(Be.Ab(e))}},lookup:function(e,t){var n=h(Be.Cb(e),t);return n=Be.$b(n),Be.createNode(e,t,n)},Kb:function(e,t,n,r){e=Be.createNode(e,t,n,r),t=Be.Cb(e);try{16384==(61440&e.mode)?qe.mkdirSync(t,e.mode):qe.writeFileSync(t,"",{mode:e.mode})}catch(e){if(!e.code)throw e;throw new Oe(Be.Ab(e))}return e},rename:function(e,t,n){e=Be.Cb(e),t=h(Be.Cb(t),n);try{qe.renameSync(e,t)}catch(e){if(!e.code)throw e;throw new Oe(Be.Ab(e))}},unlink:function(e,t){e=h(Be.Cb(e),t);try{qe.unlinkSync(e)}catch(e){if(!e.code)throw e;throw new Oe(Be.Ab(e))}},rmdir:function(e,t){e=h(Be.Cb(e),t);try{qe.rmdirSync(e)}catch(e){if(!e.code)throw e;throw new Oe(Be.Ab(e))}},readdir:function(e){e=Be.Cb(e);try{return qe.readdirSync(e)}catch(e){if(!e.code)throw e;throw new Oe(Be.Ab(e))}},symlink:function(e,t,n){e=h(Be.Cb(e),t);try{qe.symlinkSync(n,e)}catch(e){if(!e.code)throw e;throw new Oe(Be.Ab(e))}},readlink:function(e){var t=Be.Cb(e);try{return t=qe.readlinkSync(t),Ze.relative(Ze.resolve(e.Bb.Qb.root),t)}catch(e){if(!e.code)throw e;throw new Oe(Be.Ab(e))}}},yb:{open:function(e){var t=Be.Cb(e.node);try{32768==(61440&e.node.mode)&&(e.Lb=qe.openSync(t,Be.ec(e.flags)))}catch(e){if(!e.code)throw e;throw new Oe(Be.Ab(e))}},close:function(e){try{32768==(61440&e.node.mode)&&e.Lb&&qe.closeSync(e.Lb)}catch(e){if(!e.code)throw e;throw new Oe(Be.Ab(e))}},read:function(e,t,n,r,o){if(0===r)return 0;try{return qe.readSync(e.Lb,Be.Ub(t.buffer),n,r,o)}catch(e){throw new Oe(Be.Ab(e))}},write:function(e,t,n,r,o){try{return qe.writeSync(e.Lb,Be.Ub(t.buffer),n,r,o)}catch(e){throw new Oe(Be.Ab(e))}},Gb:function(e,t,n){if(1===n)t+=e.position;else if(2===n&&32768==(61440&e.node.mode))try{t+=qe.fstatSync(e.Lb).size}catch(e){throw new Oe(Be.Ab(e))}if(0>t)throw new Oe(28);return t}}},$e=null,De={},Me=[],ze=1,Ye=null,Ue=!0,Ke={},Oe=null,Ge={},We={r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},Ve={open:function(e){e.yb=De[e.node.rdev].yb,e.yb.open&&e.yb.open(e)},Gb:function(){throw new Oe(70)}},je={},Xe=0;F(),Ye=Array(4096),T(Le,"/"),I("/tmp"),I("/home"),I("/home/web_user"),function(){if(I("/dev"),g(259,{read:function(){return 0},write:function(e,t,n,r){return r}}),S("/dev/null",259),v(1280,ke),v(1536,He),S("/dev/tty",1280),S("/dev/tty1",1536),"object"==typeof crypto&&"function"==typeof crypto.getRandomValues)var e=new Uint8Array(1),t=function(){return crypto.getRandomValues(e),e[0]};else try{var n=require("crypto");t=function(){return n.randomBytes(1)[0]}}catch(e){}t||(t=function(){s("random_device")}),B("random",t),B("urandom",t),I("/dev/shm"),I("/dev/shm/tmp")}(),I("/proc"),I("/proc/self"),I("/proc/self/fd"),T({Bb:function(){var e=w("/proc/self","fd",16895,73);return e.xb={lookup:function(e,t){var n=Me[+t];if(!n)throw new Oe(8);return(e={parent:null,Bb:{cc:"fake"},xb:{readlink:function(){return n.path}}}).parent=e}},e}},"/proc/self/fd");var qe=require("fs"),Ze=require("path");Be.kc();var Je={c:function(){},k:function(e,t){Xe=t;try{var n=D(),r=$(),o=$(),a=$(),c=$();return-9007199254740992>=(e=4294967296*r+(o>>>0))||9007199254740992<=e?-61:(L(n,e,c),Ae=[n.position>>>0,(xe=n.position,1<=+he(xe)?0<xe?(0|ye(+ve(xe/4294967296),4294967295))>>>0:~~+pe((xe-+(~~xe>>>0))/4294967296)>>>0:0)],ie[a>>2]=Ae[0],ie[a+4>>2]=Ae[1],n.Pb&&0===e&&0===c&&(n.Pb=null),0)}catch(e){return void 0!==je&&e instanceof Oe||s(e),-e.Ib}},j:function(e,t){Xe=t;try{var n=D(),r=$();e:{var o=$();for(t=e=0;t<o;t++){var a=ie[r+(8*t+4)>>2],c=n,i=ie[r+8*t>>2],_=a,u=void 0,l=ae;if(0>_||0>u)throw new Oe(28);if(null===c.fd)throw new Oe(8);if(1==(2097155&c.flags))throw new Oe(8);if(16384==(61440&c.node.mode))throw new Oe(31);if(!c.yb.read)throw new Oe(28);var f=void 0!==u;if(f){if(!c.seekable)throw new Oe(70)}else u=c.position;var d=c.yb.read(c,l,i,_,u);if(f||(c.position+=d),0>(c=d)){var h=-1;break e}if(e+=c,c<a)break}h=e}return h}catch(e){return void 0!==je&&e instanceof Oe||s(e),-e.Ib}},e:function(e,t){Xe=t;try{var n=D();switch($()){case 0:var r=$();return 0>r?-28:H(n.path,n.flags,0,r).fd;case 1:case 2:return 0;case 3:return n.flags;case 4:return r=$(),n.flags|=r,0;case 12:return r=$(),se[r+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return K.___errno_location&&(ie[K.___errno_location()>>2]=28),-1;default:return-28}}catch(e){return void 0!==je&&e instanceof Oe||s(e),-e.Ib}},i:function(e,t){Xe=t;try{var r=$();return H(r?n(ce,r,void 0):"",$(),$()).fd}catch(e){return void 0!==je&&e instanceof Oe||s(e),-e.Ib}},h:function(e,t){Xe=t;try{var n=D(),r=$();switch(r){case 21509:case 21505:return n.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return n.tty?0:-59;case 21519:if(!n.tty)return-59;var o=$();return ie[o>>2]=0;case 21520:return n.tty?-28:-59;case 21531:if(e=$(),!n.yb.fc)throw new Oe(59);return n.yb.fc(n,r,e);case 21523:case 21524:return n.tty?0:-59;default:s("bad ioctl syscall "+r)}}catch(e){return void 0!==je&&e instanceof Oe||s(e),-e.Ib}},b:function(){},d:function(){return M.apply(null,arguments)},g:function(){return z.apply(null,arguments)},__memory_base:1024,__table_base:0,o:function(){s()},n:Y,m:function(e,t,n){ce.set(ce.subarray(t,t+n),e)},l:function(e){if(2147418112<e)return!1;for(var t=Math.max(Y(),16777216);t<e;)t=536870912>=t?r(2*t):Math.min(r((3*t+2147483648)/4),2147418112);e:{try{ee.grow(t-oe.byteLength+65535>>16),o(ee.buffer),e=1;break e}catch(e){}e=void 0}return!!e},f:function(e){var t=Date.now();return ie[e>>2]=t/1e3|0,ie[e+4>>2]=t%1e3*1e3|0,0},a:s,memory:ee,table:te},Qe=K.asm({},Je,oe);K.asm=Qe,K.___errno_location=function(){return K.asm.p.apply(null,arguments)},K._free=function(){return K.asm.q.apply(null,arguments)};var et,tt=K._malloc=function(){return K.asm.r.apply(null,arguments)};if(K._vsc_buffer_bytes=function(){return K.asm.s.apply(null,arguments)},K._vsc_buffer_data=function(){return K.asm.t.apply(null,arguments)},K._vsc_buffer_delete=function(){return K.asm.u.apply(null,arguments)},K._vsc_buffer_len=function(){return K.asm.v.apply(null,arguments)},K._vsc_buffer_make_secure=function(){return K.asm.w.apply(null,arguments)},K._vsc_buffer_new=function(){return K.asm.x.apply(null,arguments)},K._vsc_buffer_new_with_capacity=function(){return K.asm.y.apply(null,arguments)},K._vsc_data=function(){return K.asm.z.apply(null,arguments)},K._vsc_data_bytes=function(){return K.asm.A.apply(null,arguments)},K._vsc_data_ctx_size=function(){return K.asm.B.apply(null,arguments)},K._vsc_data_len=function(){return K.asm.C.apply(null,arguments)},K._vsce_error_ctx_size=function(){return K.asm.D.apply(null,arguments)},K._vsce_error_reset=function(){return K.asm.E.apply(null,arguments)},K._vsce_error_status=function(){return K.asm.F.apply(null,arguments)},K._vsce_phe_cipher_auth_decrypt=function(){return K.asm.G.apply(null,arguments)},K._vsce_phe_cipher_auth_encrypt=function(){return K.asm.H.apply(null,arguments)},K._vsce_phe_cipher_decrypt=function(){return K.asm.I.apply(null,arguments)},K._vsce_phe_cipher_decrypt_len=function(){return K.asm.J.apply(null,arguments)},K._vsce_phe_cipher_delete=function(){return K.asm.K.apply(null,arguments)},K._vsce_phe_cipher_encrypt=function(){return K.asm.L.apply(null,arguments)},K._vsce_phe_cipher_encrypt_len=function(){return K.asm.M.apply(null,arguments)},K._vsce_phe_cipher_new=function(){return K.asm.N.apply(null,arguments)},K._vsce_phe_cipher_release_random=function(){return K.asm.O.apply(null,arguments)},K._vsce_phe_cipher_setup_defaults=function(){return K.asm.P.apply(null,arguments)},K._vsce_phe_cipher_shallow_copy=function(){return K.asm.Q.apply(null,arguments)},K._vsce_phe_cipher_use_random=function(){return K.asm.R.apply(null,arguments)},K._vsce_phe_client_check_response_and_decrypt=function(){return K.asm.S.apply(null,arguments)},K._vsce_phe_client_create_verify_password_request=function(){return K.asm.T.apply(null,arguments)},K._vsce_phe_client_delete=function(){return K.asm.U.apply(null,arguments)},K._vsce_phe_client_enroll_account=function(){return K.asm.V.apply(null,arguments)},K._vsce_phe_client_enrollment_record_len=function(){return K.asm.W.apply(null,arguments)},K._vsce_phe_client_generate_client_private_key=function(){return K.asm.X.apply(null,arguments)},K._vsce_phe_client_new=function(){return K.asm.Y.apply(null,arguments)},K._vsce_phe_client_release_operation_random=function(){return K.asm.Z.apply(null,arguments)},K._vsce_phe_client_release_random=function(){return K.asm._.apply(null,arguments)},K._vsce_phe_client_rotate_keys=function(){return K.asm.$.apply(null,arguments)},K._vsce_phe_client_set_keys=function(){return K.asm.aa.apply(null,arguments)},K._vsce_phe_client_setup_defaults=function(){return K.asm.ba.apply(null,arguments)},K._vsce_phe_client_shallow_copy=function(){return K.asm.ca.apply(null,arguments)},K._vsce_phe_client_update_enrollment_record=function(){return K.asm.da.apply(null,arguments)},K._vsce_phe_client_use_operation_random=function(){return K.asm.ea.apply(null,arguments)},K._vsce_phe_client_use_random=function(){return K.asm.fa.apply(null,arguments)},K._vsce_phe_client_verify_password_request_len=function(){return K.asm.ga.apply(null,arguments)},K._vsce_phe_server_delete=function(){return K.asm.ha.apply(null,arguments)},K._vsce_phe_server_enrollment_response_len=function(){return K.asm.ia.apply(null,arguments)},K._vsce_phe_server_generate_server_key_pair=function(){return K.asm.ja.apply(null,arguments)},K._vsce_phe_server_get_enrollment=function(){return K.asm.ka.apply(null,arguments)},K._vsce_phe_server_new=function(){return K.asm.la.apply(null,arguments)},K._vsce_phe_server_release_operation_random=function(){return K.asm.ma.apply(null,arguments)},K._vsce_phe_server_release_random=function(){return K.asm.na.apply(null,arguments)},K._vsce_phe_server_rotate_keys=function(){return K.asm.oa.apply(null,arguments)},K._vsce_phe_server_setup_defaults=function(){return K.asm.pa.apply(null,arguments)},K._vsce_phe_server_shallow_copy=function(){return K.asm.qa.apply(null,arguments)},K._vsce_phe_server_update_token_len=function(){return K.asm.ra.apply(null,arguments)},K._vsce_phe_server_use_operation_random=function(){return K.asm.sa.apply(null,arguments)},K._vsce_phe_server_use_random=function(){return K.asm.ta.apply(null,arguments)},K._vsce_phe_server_verify_password=function(){return K.asm.ua.apply(null,arguments)},K._vsce_phe_server_verify_password_response_len=function(){return K.asm.va.apply(null,arguments)},K._vscf_ctr_drbg_delete=function(){return K.asm.wa.apply(null,arguments)},K._vscf_ctr_drbg_enable_prediction_resistance=function(){return K.asm.xa.apply(null,arguments)},K._vscf_ctr_drbg_new=function(){return K.asm.ya.apply(null,arguments)},K._vscf_ctr_drbg_random=function(){return K.asm.za.apply(null,arguments)},K._vscf_ctr_drbg_release_entropy_source=function(){return K.asm.Aa.apply(null,arguments)},K._vscf_ctr_drbg_reseed=function(){return K.asm.Ba.apply(null,arguments)},K._vscf_ctr_drbg_set_entropy_len=function(){return K.asm.Ca.apply(null,arguments)},K._vscf_ctr_drbg_set_reseed_interval=function(){return K.asm.Da.apply(null,arguments)},K._vscf_ctr_drbg_setup_defaults=function(){return K.asm.Ea.apply(null,arguments)},K._vscf_ctr_drbg_shallow_copy=function(){return K.asm.Fa.apply(null,arguments)},K._vscf_ctr_drbg_use_entropy_source=function(){return K.asm.Ga.apply(null,arguments)},K._vscf_error_ctx_size=function(){return K.asm.Ha.apply(null,arguments)},K._vscf_error_reset=function(){return K.asm.Ia.apply(null,arguments)},K._vscf_error_status=function(){return K.asm.Ja.apply(null,arguments)},K._vscf_hkdf_alg_id=function(){return K.asm.Ka.apply(null,arguments)},K._vscf_hkdf_delete=function(){return K.asm.La.apply(null,arguments)},K._vscf_hkdf_derive=function(){return K.asm.Ma.apply(null,arguments)},K._vscf_hkdf_new=function(){return K.asm.Na.apply(null,arguments)},K._vscf_hkdf_produce_alg_info=function(){return K.asm.Oa.apply(null,arguments)},K._vscf_hkdf_release_hash=function(){return K.asm.Pa.apply(null,arguments)},K._vscf_hkdf_reset=function(){return K.asm.Qa.apply(null,arguments)},K._vscf_hkdf_restore_alg_info=function(){return K.asm.Ra.apply(null,arguments)},K._vscf_hkdf_set_info=function(){return K.asm.Sa.apply(null,arguments)},K._vscf_hkdf_shallow_copy=function(){return K.asm.Ta.apply(null,arguments)},K._vscf_hkdf_use_hash=function(){return K.asm.Ua.apply(null,arguments)},K._vscf_hmac_alg_id=function(){return K.asm.Va.apply(null,arguments)},K._vscf_hmac_delete=function(){return K.asm.Wa.apply(null,arguments)},K._vscf_hmac_digest_len=function(){return K.asm.Xa.apply(null,arguments)},K._vscf_hmac_finish=function(){return K.asm.Ya.apply(null,arguments)},K._vscf_hmac_mac=function(){return K.asm.Za.apply(null,arguments)},K._vscf_hmac_new=function(){return K.asm._a.apply(null,arguments)},K._vscf_hmac_produce_alg_info=function(){return K.asm.$a.apply(null,arguments)},K._vscf_hmac_release_hash=function(){return K.asm.ab.apply(null,arguments)},K._vscf_hmac_reset=function(){return K.asm.bb.apply(null,arguments)},K._vscf_hmac_restore_alg_info=function(){return K.asm.cb.apply(null,arguments)},K._vscf_hmac_shallow_copy=function(){return K.asm.db.apply(null,arguments)},K._vscf_hmac_start=function(){return K.asm.eb.apply(null,arguments)},K._vscf_hmac_update=function(){return K.asm.fb.apply(null,arguments)},K._vscf_hmac_use_hash=function(){return K.asm.gb.apply(null,arguments)},K._vscf_impl_api=function(){return K.asm.hb.apply(null,arguments)},K._vscf_impl_shallow_copy=function(){return K.asm.ib.apply(null,arguments)},K._vscf_impl_tag=function(){return K.asm.jb.apply(null,arguments)},K._vscf_sha512_alg_id=function(){return K.asm.kb.apply(null,arguments)},K._vscf_sha512_delete=function(){return K.asm.lb.apply(null,arguments)},K._vscf_sha512_finish=function(){return K.asm.mb.apply(null,arguments)},K._vscf_sha512_hash=function(){return K.asm.nb.apply(null,arguments)},K._vscf_sha512_new=function(){return K.asm.ob.apply(null,arguments)},K._vscf_sha512_produce_alg_info=function(){return K.asm.pb.apply(null,arguments)},K._vscf_sha512_restore_alg_info=function(){return K.asm.qb.apply(null,arguments)},K._vscf_sha512_shallow_copy=function(){return K.asm.rb.apply(null,arguments)},K._vscf_sha512_start=function(){return K.asm.sb.apply(null,arguments)},K._vscf_sha512_update=function(){return K.asm.tb.apply(null,arguments)},K.stackAlloc=function(){return K.asm.vb.apply(null,arguments)},K.dynCall_vi=function(){return K.asm.ub.apply(null,arguments)},K.asm=Qe,K.then=function(e){if(et)e(K);else{var t=K.onRuntimeInitialized;K.onRuntimeInitialized=function(){t&&t(),e(K)}}return K},Ee=function e(){et||U(),et||(Ee=e)},K.run=U,K.preInit)for("function"==typeof K.preInit&&(K.preInit=[K.preInit]);0<K.preInit.length;)K.preInit.pop()();return U(),e},e.exports=t}));let initFoundationInterface=(e,t)=>{return class{static newAndTakeCContext(n){const r=e._vscf_impl_tag(n);switch(r){case t.FoundationImplTag.SHA224:return t.Sha224.newAndTakeCContext(n);case t.FoundationImplTag.SHA256:return t.Sha256.newAndTakeCContext(n);case t.FoundationImplTag.SHA384:return t.Sha384.newAndTakeCContext(n);case t.FoundationImplTag.SHA512:return t.Sha512.newAndTakeCContext(n);case t.FoundationImplTag.AES256_GCM:return t.Aes256Gcm.newAndTakeCContext(n);case t.FoundationImplTag.AES256_CBC:return t.Aes256Cbc.newAndTakeCContext(n);case t.FoundationImplTag.ASN1RD:return t.Asn1rd.newAndTakeCContext(n);case t.FoundationImplTag.ASN1WR:return t.Asn1wr.newAndTakeCContext(n);case t.FoundationImplTag.RSA_PUBLIC_KEY:return t.RsaPublicKey.newAndTakeCContext(n);case t.FoundationImplTag.RSA_PRIVATE_KEY:return t.RsaPrivateKey.newAndTakeCContext(n);case t.FoundationImplTag.RSA:return t.Rsa.newAndTakeCContext(n);case t.FoundationImplTag.ECC_PUBLIC_KEY:return t.EccPublicKey.newAndTakeCContext(n);case t.FoundationImplTag.ECC_PRIVATE_KEY:return t.EccPrivateKey.newAndTakeCContext(n);case t.FoundationImplTag.ECC:return t.Ecc.newAndTakeCContext(n);case t.FoundationImplTag.ENTROPY_ACCUMULATOR:return t.EntropyAccumulator.newAndTakeCContext(n);case t.FoundationImplTag.CTR_DRBG:return t.CtrDrbg.newAndTakeCContext(n);case t.FoundationImplTag.HMAC:return t.Hmac.newAndTakeCContext(n);case t.FoundationImplTag.HKDF:return t.Hkdf.newAndTakeCContext(n);case t.FoundationImplTag.KDF1:return t.Kdf1.newAndTakeCContext(n);case t.FoundationImplTag.KDF2:return t.Kdf2.newAndTakeCContext(n);case t.FoundationImplTag.FAKE_RANDOM:return t.FakeRandom.newAndTakeCContext(n);case t.FoundationImplTag.PKCS5_PBKDF2:return t.Pkcs5Pbkdf2.newAndTakeCContext(n);case t.FoundationImplTag.PKCS5_PBES2:return t.Pkcs5Pbes2.newAndTakeCContext(n);case t.FoundationImplTag.SEED_ENTROPY_SOURCE:return t.SeedEntropySource.newAndTakeCContext(n);case t.FoundationImplTag.KEY_MATERIAL_RNG:return t.KeyMaterialRng.newAndTakeCContext(n);case t.FoundationImplTag.RAW_PUBLIC_KEY:return t.RawPublicKey.newAndTakeCContext(n);case t.FoundationImplTag.RAW_PRIVATE_KEY:return t.RawPrivateKey.newAndTakeCContext(n);case t.FoundationImplTag.PKCS8_SERIALIZER:return t.Pkcs8Serializer.newAndTakeCContext(n);case t.FoundationImplTag.SEC1_SERIALIZER:return t.Sec1Serializer.newAndTakeCContext(n);case t.FoundationImplTag.KEY_ASN1_SERIALIZER:return t.KeyAsn1Serializer.newAndTakeCContext(n);case t.FoundationImplTag.KEY_ASN1_DESERIALIZER:return t.KeyAsn1Deserializer.newAndTakeCContext(n);case t.FoundationImplTag.ED25519:return t.Ed25519.newAndTakeCContext(n);case t.FoundationImplTag.CURVE25519:return t.Curve25519.newAndTakeCContext(n);case t.FoundationImplTag.SIMPLE_ALG_INFO:return t.SimpleAlgInfo.newAndTakeCContext(n);case t.FoundationImplTag.HASH_BASED_ALG_INFO:return t.HashBasedAlgInfo.newAndTakeCContext(n);case t.FoundationImplTag.CIPHER_ALG_INFO:return t.CipherAlgInfo.newAndTakeCContext(n);case t.FoundationImplTag.SALTED_KDF_ALG_INFO:return t.SaltedKdfAlgInfo.newAndTakeCContext(n);case t.FoundationImplTag.PBE_ALG_INFO:return t.PbeAlgInfo.newAndTakeCContext(n);case t.FoundationImplTag.ECC_ALG_INFO:return t.EccAlgInfo.newAndTakeCContext(n);case t.FoundationImplTag.ALG_INFO_DER_SERIALIZER:return t.AlgInfoDerSerializer.newAndTakeCContext(n);case t.FoundationImplTag.ALG_INFO_DER_DESERIALIZER:return t.AlgInfoDerDeserializer.newAndTakeCContext(n);case t.FoundationImplTag.MESSAGE_INFO_DER_SERIALIZER:return t.MessageInfoDerSerializer.newAndTakeCContext(n);default:throw Error("Unexpected implementation tag found: "+r)}}static newAndUseCContext(n){return new t.FoundationInterface.newAndTakeCContext(e._vscf_impl_shallow_copy(n))}static isImplemented(t,n){return 0!=e._vscf_impl_api(t,n)}}};var FoundationInterface=initFoundationInterface;function ensureNumber(e,t){if(!("number"==typeof t||t instanceof Number))throw new TypeError(`'${e}' is not a number`);if(Number.isNaN(t))throw new TypeError(`'${e}' is NaN`);if(1/0===t)throw new TypeError(`'${e}' is Infinity`);if(-1/0===t)throw new TypeError(`'${e}' is -Infinity`)}function ensureNotNull(e,t){if(ensureNumber(e,t),0==t)throw new TypeError(`'${e}' is NULL`)}function ensureString(e,t){if(!("string"==typeof t||t instanceof String))throw new TypeError(`'${e}' is not a string`)}function ensureBoolean(e,t){if("boolean"!=typeof t)throw new TypeError(`'${e}' is not a boolean`)}function ensureByteArray(e,t){if(!(t instanceof Uint8Array))throw new TypeError(`'${e}' is not an Uint8Array`)}function ensureClass(e,t,n){if(!(t instanceof n))throw new TypeError(`'${e}' is not an instance of the class ${n.name}`);ensureNotNull(e,t.ctxPtr)}function ensureImplementInterface(e,t,n,r,o){if(ensureNotNull(e,t.ctxPtr),!o.isImplemented(t.ctxPtr,r))throw new TypeError(`'${e}' does not implement interface '${n}'`)}var ensureNumber_1=ensureNumber,ensureString_1=ensureString,ensureBoolean_1=ensureBoolean,ensureByteArray_1=ensureByteArray,ensureClass_1=ensureClass,ensureNotNull_1=ensureNotNull,ensureImplementInterface_1=ensureImplementInterface,precondition={ensureNumber:ensureNumber_1,ensureString:ensureString_1,ensureBoolean:ensureBoolean_1,ensureByteArray:ensureByteArray_1,ensureClass:ensureClass_1,ensureNotNull:ensureNotNull_1,ensureImplementInterface:ensureImplementInterface_1};let initCtrDrbg=(e,t)=>{class n{static get RESEED_INTERVAL(){return 1e4}get RESEED_INTERVAL(){return n.RESEED_INTERVAL}static get ENTROPY_LEN(){return 48}get ENTROPY_LEN(){return n.ENTROPY_LEN}constructor(t){this.name="CtrDrbg",this.ctxPtr=void 0===t?e._vscf_ctr_drbg_new():t}static newAndUseCContext(t){return new n(e._vscf_ctr_drbg_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vscf_ctr_drbg_delete(this.ctxPtr),this.ctxPtr=null)}set entropySource(n){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureImplementInterface("entropySource",n,"Foundation.EntropySource",t.FoundationInterfaceTag.ENTROPY_SOURCE,t.FoundationInterface),e._vscf_ctr_drbg_release_entropy_source(this.ctxPtr),n=e._vscf_ctr_drbg_use_entropy_source(this.ctxPtr,n.ctxPtr),t.FoundationError.handleStatusCode(n)}random(n){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureNumber("dataLen",n);const r=e._vsc_buffer_new_with_capacity(n);try{const o=e._vscf_ctr_drbg_random(this.ctxPtr,n,r);t.FoundationError.handleStatusCode(o);const a=e._vsc_buffer_bytes(r),c=e._vsc_buffer_len(r);return e.HEAPU8.slice(a,a+c)}finally{e._vsc_buffer_delete(r)}}reseed(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=e._vscf_ctr_drbg_reseed(this.ctxPtr);t.FoundationError.handleStatusCode(n)}setupDefaults(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=e._vscf_ctr_drbg_setup_defaults(this.ctxPtr);t.FoundationError.handleStatusCode(n)}enablePredictionResistance(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_ctr_drbg_enable_prediction_resistance(this.ctxPtr)}setReseedInterval(t){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureNumber("interval",t),e._vscf_ctr_drbg_set_reseed_interval(this.ctxPtr,t)}setEntropyLen(t){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureNumber("len",t),e._vscf_ctr_drbg_set_entropy_len(this.ctxPtr,t)}}return n};var CtrDrbg=initCtrDrbg;let initHmac=(e,t)=>{class n{constructor(t){this.name="Hmac",this.ctxPtr=void 0===t?e._vscf_hmac_new():t}static newAndUseCContext(t){return new n(e._vscf_hmac_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vscf_hmac_delete(this.ctxPtr),this.ctxPtr=null)}set hash(n){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureImplementInterface("hash",n,"Foundation.Hash",t.FoundationInterfaceTag.HASH,t.FoundationInterface),e._vscf_hmac_release_hash(this.ctxPtr),e._vscf_hmac_use_hash(this.ctxPtr,n.ctxPtr)}algId(){return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_hmac_alg_id(this.ctxPtr)}produceAlgInfo(){let n;return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),n=e._vscf_hmac_produce_alg_info(this.ctxPtr),t.FoundationInterface.newAndTakeCContext(n)}restoreAlgInfo(n){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureImplementInterface("algInfo",n,"Foundation.AlgInfo",t.FoundationInterfaceTag.ALG_INFO,t.FoundationInterface),n=e._vscf_hmac_restore_alg_info(this.ctxPtr,n.ctxPtr),t.FoundationError.handleStatusCode(n)}digestLen(){return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_hmac_digest_len(this.ctxPtr)}mac(t,n){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("key",t),precondition.ensureByteArray("data",n);var r=t.length*t.BYTES_PER_ELEMENT;const o=e._malloc(r);e.HEAP8.set(t,o),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,o,r);var a=n.length*n.BYTES_PER_ELEMENT;r=e._malloc(a),e.HEAP8.set(n,r),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,r,a),a=this.digestLen(),a=e._vsc_buffer_new_with_capacity(a);try{e._vscf_hmac_mac(this.ctxPtr,t,n,a);const r=e._vsc_buffer_bytes(a),c=e._vsc_buffer_len(a);return e.HEAPU8.slice(r,r+c)}finally{e._free(o),e._free(t),e._free(r),e._free(n),e._vsc_buffer_delete(a)}}start(t){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("key",t);const n=t.length*t.BYTES_PER_ELEMENT,r=e._malloc(n);e.HEAP8.set(t,r),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,r,n);try{e._vscf_hmac_start(this.ctxPtr,t)}finally{e._free(r),e._free(t)}}update(t){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("data",t);const n=t.length*t.BYTES_PER_ELEMENT,r=e._malloc(n);e.HEAP8.set(t,r),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,r,n);try{e._vscf_hmac_update(this.ctxPtr,t)}finally{e._free(r),e._free(t)}}finish(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr);var t=this.digestLen();t=e._vsc_buffer_new_with_capacity(t);try{e._vscf_hmac_finish(this.ctxPtr,t);const n=e._vsc_buffer_bytes(t),r=e._vsc_buffer_len(t);return e.HEAPU8.slice(n,n+r)}finally{e._vsc_buffer_delete(t)}}reset(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_hmac_reset(this.ctxPtr)}}return n};var Hmac=initHmac;let initHkdf=(e,t)=>{class n{constructor(t){this.name="Hkdf",this.ctxPtr=void 0===t?e._vscf_hkdf_new():t}static newAndUseCContext(t){return new n(e._vscf_hkdf_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vscf_hkdf_delete(this.ctxPtr),this.ctxPtr=null)}set hash(n){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureImplementInterface("hash",n,"Foundation.Hash",t.FoundationInterfaceTag.HASH,t.FoundationInterface),e._vscf_hkdf_release_hash(this.ctxPtr),e._vscf_hkdf_use_hash(this.ctxPtr,n.ctxPtr)}algId(){return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_hkdf_alg_id(this.ctxPtr)}produceAlgInfo(){let n;return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),n=e._vscf_hkdf_produce_alg_info(this.ctxPtr),t.FoundationInterface.newAndTakeCContext(n)}restoreAlgInfo(n){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureImplementInterface("algInfo",n,"Foundation.AlgInfo",t.FoundationInterfaceTag.ALG_INFO,t.FoundationInterface),n=e._vscf_hkdf_restore_alg_info(this.ctxPtr,n.ctxPtr),t.FoundationError.handleStatusCode(n)}derive(t,n){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("data",t),precondition.ensureNumber("keyLen",n);var r=t.length*t.BYTES_PER_ELEMENT;const o=e._malloc(r);e.HEAP8.set(t,o),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,o,r),r=e._vsc_buffer_new_with_capacity(n);try{e._vscf_hkdf_derive(this.ctxPtr,t,n,r);const o=e._vsc_buffer_bytes(r),a=e._vsc_buffer_len(r);return e.HEAPU8.slice(o,o+a)}finally{e._free(a),e._free(t),e._vsc_buffer_delete(r)}}reset(t,n){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("salt",t),precondition.ensureNumber("iterationCount",n);const r=t.length*t.BYTES_PER_ELEMENT,o=e._malloc(r);e.HEAP8.set(t,o),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,o,r);try{e._vscf_hkdf_reset(this.ctxPtr,t,n)}finally{e._free(o),e._free(t)}}setInfo(t){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("info",t);const n=t.length*t.BYTES_PER_ELEMENT,r=e._malloc(n);e.HEAP8.set(t,r),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,r,n);try{e._vscf_hkdf_set_info(this.ctxPtr,t)}finally{e._free(r),e._free(t)}}}return n};var Hkdf=initHkdf;let initSha512=(e,t)=>{class n{static get DIGEST_LEN(){return 64}get DIGEST_LEN(){return n.DIGEST_LEN}static get BLOCK_LEN(){return 128}get BLOCK_LEN(){return n.BLOCK_LEN}constructor(t){this.name="Sha512",this.ctxPtr=void 0===t?e._vscf_sha512_new():t}static newAndUseCContext(t){return new n(e._vscf_sha512_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vscf_sha512_delete(this.ctxPtr),this.ctxPtr=null)}algId(){return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_sha512_alg_id(this.ctxPtr)}produceAlgInfo(){let n;return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),n=e._vscf_sha512_produce_alg_info(this.ctxPtr),t.FoundationInterface.newAndTakeCContext(n)}restoreAlgInfo(n){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureImplementInterface("algInfo",n,"Foundation.AlgInfo",t.FoundationInterfaceTag.ALG_INFO,t.FoundationInterface),n=e._vscf_sha512_restore_alg_info(this.ctxPtr,n.ctxPtr),t.FoundationError.handleStatusCode(n)}hash(t){precondition.ensureByteArray("data",t);var n=t.length*t.BYTES_PER_ELEMENT;const r=e._malloc(n);e.HEAP8.set(t,r),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,r,n),n=e._vsc_buffer_new_with_capacity(this.DIGEST_LEN);try{e._vscf_sha512_hash(t,n);const r=e._vsc_buffer_bytes(n),o=e._vsc_buffer_len(n);return e.HEAPU8.slice(r,r+o)}finally{e._free(o),e._free(t),e._vsc_buffer_delete(n)}}start(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_sha512_start(this.ctxPtr)}update(t){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("data",t);const n=t.length*t.BYTES_PER_ELEMENT,r=e._malloc(n);e.HEAP8.set(t,r),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,r,n);try{e._vscf_sha512_update(this.ctxPtr,t)}finally{e._free(r),e._free(t)}}finish(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr);const t=e._vsc_buffer_new_with_capacity(this.DIGEST_LEN);try{e._vscf_sha512_finish(this.ctxPtr,t);const n=e._vsc_buffer_bytes(t),r=e._vsc_buffer_len(t);return e.HEAPU8.slice(n,n+r)}finally{e._vsc_buffer_delete(t)}}}return n};var Sha512=initSha512;let initPheError=(e,t)=>{class n extends Error{constructor(e){super(e),this.name="PheError",this.message=e}static handleStatusCode(e){if(0!=e){if(-1==e)throw new n("Success proof check failed.");if(-2==e)throw new n("Failure proof check failed.");if(-3==e)throw new n("RNG returned error.");if(-4==e)throw new n("Protobuf decode failed.");if(-5==e)throw new n("Invalid public key.");if(-6==e)throw new n("Invalid private key.");if(-7==e)throw new n("AES error occurred.");throw new n("Unexpected status code:"+e)}}}return n};var PheError=initPheError;function ensureNumber$1(e,t){if(!("number"==typeof t||t instanceof Number))throw new TypeError(`'${e}' is not a number`);if(Number.isNaN(t))throw new TypeError(`'${e}' is NaN`);if(1/0===t)throw new TypeError(`'${e}' is Infinity`);if(-1/0===t)throw new TypeError(`'${e}' is -Infinity`)}function ensureNotNull$1(e,t){if(ensureNumber$1(e,t),0==t)throw new TypeError(`'${e}' is NULL`)}function ensureString$1(e,t){if(!("string"==typeof t||t instanceof String))throw new TypeError(`'${e}' is not a string`)}function ensureBoolean$1(e,t){if("boolean"!=typeof t)throw new TypeError(`'${e}' is not a boolean`)}function ensureByteArray$1(e,t){if(!(t instanceof Uint8Array))throw new TypeError(`'${e}' is not an Uint8Array`)}function ensureClass$1(e,t,n){if(!(t instanceof n))throw new TypeError(`'${e}' is not an instance of the class ${n.name}`);ensureNotNull$1(e,t.ctxPtr)}function ensureImplementInterface$1(e,t,n,r,o){if(ensureNotNull$1(e,t.ctxPtr),!o.isImplemented(t.ctxPtr,r))throw new TypeError(`'${e}' does not implement interface '${n}'`)}var ensureNumber_1$1=ensureNumber$1,ensureString_1$1=ensureString$1,ensureBoolean_1$1=ensureBoolean$1,ensureByteArray_1$1=ensureByteArray$1,ensureClass_1$1=ensureClass$1,ensureNotNull_1$1=ensureNotNull$1,ensureImplementInterface_1$1=ensureImplementInterface$1,precondition$1={ensureNumber:ensureNumber_1$1,ensureString:ensureString_1$1,ensureBoolean:ensureBoolean_1$1,ensureByteArray:ensureByteArray_1$1,ensureClass:ensureClass_1$1,ensureNotNull:ensureNotNull_1$1,ensureImplementInterface:ensureImplementInterface_1$1};let initPheCommon=(e,t)=>{class n{static get PHE_POINT_LENGTH(){return 65}get PHE_POINT_LENGTH(){return n.PHE_POINT_LENGTH}static get PHE_MAX_PASSWORD_LENGTH(){return 128}get PHE_MAX_PASSWORD_LENGTH(){return n.PHE_MAX_PASSWORD_LENGTH}static get PHE_SERVER_IDENTIFIER_LENGTH(){return 32}get PHE_SERVER_IDENTIFIER_LENGTH(){return n.PHE_SERVER_IDENTIFIER_LENGTH}static get PHE_CLIENT_IDENTIFIER_LENGTH(){return 32}get PHE_CLIENT_IDENTIFIER_LENGTH(){return n.PHE_CLIENT_IDENTIFIER_LENGTH}static get PHE_ACCOUNT_KEY_LENGTH(){return 32}get PHE_ACCOUNT_KEY_LENGTH(){return n.PHE_ACCOUNT_KEY_LENGTH}static get PHE_PRIVATE_KEY_LENGTH(){return 32}get PHE_PRIVATE_KEY_LENGTH(){return n.PHE_PRIVATE_KEY_LENGTH}static get PHE_PUBLIC_KEY_LENGTH(){return 65}get PHE_PUBLIC_KEY_LENGTH(){return n.PHE_PUBLIC_KEY_LENGTH}static get PHE_HASH_LEN(){return 32}get PHE_HASH_LEN(){return n.PHE_HASH_LEN}static get PHE_MAX_ENCRYPT_LEN(){return 1048512}get PHE_MAX_ENCRYPT_LEN(){return n.PHE_MAX_ENCRYPT_LEN}static get PHE_MAX_DECRYPT_LEN(){return 1048576}get PHE_MAX_DECRYPT_LEN(){return n.PHE_MAX_DECRYPT_LEN}static get PHE_MAX_AUTH_LEN(){return 1024}get PHE_MAX_AUTH_LEN(){return n.PHE_MAX_AUTH_LEN}}return n};var PheCommon=initPheCommon;let initPheServer=(e,t)=>{class n{constructor(t){this.name="PheServer",this.ctxPtr=void 0===t?e._vsce_phe_server_new():t}static newAndUseCContext(t){return new n(e._vsce_phe_server_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vsce_phe_server_delete(this.ctxPtr),this.ctxPtr=null)}set random(n){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureImplementInterface("random",n,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_server_release_random(this.ctxPtr),e._vsce_phe_server_use_random(this.ctxPtr,n.ctxPtr)}set operationRandom(n){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureImplementInterface("operationRandom",n,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_server_release_operation_random(this.ctxPtr),e._vsce_phe_server_use_operation_random(this.ctxPtr,n.ctxPtr)}setupDefaults(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=e._vsce_phe_server_setup_defaults(this.ctxPtr);t.PheError.handleStatusCode(n)}generateServerKeyPair(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PRIVATE_KEY_LENGTH),r=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PUBLIC_KEY_LENGTH);try{const o=e._vsce_phe_server_generate_server_key_pair(this.ctxPtr,n,r);t.PheError.handleStatusCode(o);const a=e._vsc_buffer_bytes(n),c=e._vsc_buffer_len(n),s=e.HEAPU8.slice(a,a+c),i=e._vsc_buffer_bytes(r),_=e._vsc_buffer_len(r);return{serverPrivateKey:s,serverPublicKey:e.HEAPU8.slice(i,i+_)}}finally{e._vsc_buffer_delete(n),e._vsc_buffer_delete(r)}}enrollmentResponseLen(){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vsce_phe_server_enrollment_response_len(this.ctxPtr)}getEnrollment(n,r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("serverPrivateKey",n),precondition$1.ensureByteArray("serverPublicKey",r);var o=n.length*n.BYTES_PER_ELEMENT;const a=e._malloc(o);e.HEAP8.set(n,a),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,a,o);var c=r.length*r.BYTES_PER_ELEMENT;o=e._malloc(c),e.HEAP8.set(r,o),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,o,c),c=this.enrollmentResponseLen(),c=e._vsc_buffer_new_with_capacity(c);try{const o=e._vsce_phe_server_get_enrollment(this.ctxPtr,n,r,c);t.PheError.handleStatusCode(o);const a=e._vsc_buffer_bytes(c),s=e._vsc_buffer_len(c);return e.HEAPU8.slice(a,a+s)}finally{e._free(a),e._free(n),e._free(o),e._free(r),e._vsc_buffer_delete(c)}}verifyPasswordResponseLen(){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vsce_phe_server_verify_password_response_len(this.ctxPtr)}verifyPassword(n,r,o){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("serverPrivateKey",n),precondition$1.ensureByteArray("serverPublicKey",r),precondition$1.ensureByteArray("verifyPasswordRequest",o);var a=n.length*n.BYTES_PER_ELEMENT;const c=e._malloc(a);e.HEAP8.set(n,c),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,c,a);var s=r.length*r.BYTES_PER_ELEMENT;a=e._malloc(s),e.HEAP8.set(r,a),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,a,s);var i=o.length*o.BYTES_PER_ELEMENT;s=e._malloc(i),e.HEAP8.set(o,s),o=e._vsc_data_ctx_size(),o=e._malloc(o),e._vsc_data(o,s,i),i=this.verifyPasswordResponseLen(),i=e._vsc_buffer_new_with_capacity(i);try{const a=e._vsce_phe_server_verify_password(this.ctxPtr,n,r,o,i);t.PheError.handleStatusCode(a);const c=e._vsc_buffer_bytes(i),s=e._vsc_buffer_len(i);return e.HEAPU8.slice(c,c+s)}finally{e._free(a),e._free(n),e._free(c),e._free(r),e._free(s),e._free(o),e._vsc_buffer_delete(i)}}updateTokenLen(){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vsce_phe_server_update_token_len(this.ctxPtr)}rotateKeys(n){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("serverPrivateKey",n);var r=n.length*n.BYTES_PER_ELEMENT;const o=e._malloc(r);e.HEAP8.set(n,o),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,o,r),r=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PRIVATE_KEY_LENGTH);const a=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PUBLIC_KEY_LENGTH);var c=this.updateTokenLen();c=e._vsc_buffer_new_with_capacity(c);try{const o=e._vsce_phe_server_rotate_keys(this.ctxPtr,n,r,a,c);t.PheError.handleStatusCode(o);const s=e._vsc_buffer_bytes(r),i=e._vsc_buffer_len(r),_=e.HEAPU8.slice(s,s+i),u=e._vsc_buffer_bytes(a),l=e._vsc_buffer_len(a),f=e.HEAPU8.slice(u,u+l),d=e._vsc_buffer_bytes(c),h=e._vsc_buffer_len(c);return{newServerPrivateKey:_,newServerPublicKey:f,updateToken:e.HEAPU8.slice(d,d+h)}}finally{e._free(o),e._free(n),e._vsc_buffer_delete(r),e._vsc_buffer_delete(a),e._vsc_buffer_delete(c)}}}return n};var PheServer=initPheServer;let initPheClient=(e,t)=>{class n{constructor(t){this.name="PheClient",this.ctxPtr=void 0===t?e._vsce_phe_client_new():t}static newAndUseCContext(t){return new n(e._vsce_phe_client_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vsce_phe_client_delete(this.ctxPtr),this.ctxPtr=null)}set random(n){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureImplementInterface("random",n,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_client_release_random(this.ctxPtr),e._vsce_phe_client_use_random(this.ctxPtr,n.ctxPtr)}set operationRandom(n){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureImplementInterface("operationRandom",n,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_client_release_operation_random(this.ctxPtr),e._vsce_phe_client_use_operation_random(this.ctxPtr,n.ctxPtr)}setupDefaults(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=e._vsce_phe_client_setup_defaults(this.ctxPtr);t.PheError.handleStatusCode(n)}setKeys(n,r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("clientPrivateKey",n),precondition$1.ensureByteArray("serverPublicKey",r);var o=n.length*n.BYTES_PER_ELEMENT;const a=e._malloc(o);e.HEAP8.set(n,a),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,a,o),o=r.length*r.BYTES_PER_ELEMENT;const c=e._malloc(o);e.HEAP8.set(r,c),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,c,o);try{const o=e._vsce_phe_client_set_keys(this.ctxPtr,n,r);t.PheError.handleStatusCode(o)}finally{e._free(a),e._free(n),e._free(c),e._free(r)}}generateClientPrivateKey(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PRIVATE_KEY_LENGTH);try{const r=e._vsce_phe_client_generate_client_private_key(this.ctxPtr,n);t.PheError.handleStatusCode(r);const o=e._vsc_buffer_bytes(n),a=e._vsc_buffer_len(n);return e.HEAPU8.slice(o,o+a)}finally{e._vsc_buffer_delete(n)}}enrollmentRecordLen(){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vsce_phe_client_enrollment_record_len(this.ctxPtr)}enrollAccount(n,r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("enrollmentResponse",n),precondition$1.ensureByteArray("password",r);var o=n.length*n.BYTES_PER_ELEMENT;const a=e._malloc(o);e.HEAP8.set(n,a),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,a,o);var c=r.length*r.BYTES_PER_ELEMENT;o=e._malloc(c),e.HEAP8.set(r,o),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,o,c),c=this.enrollmentRecordLen(),c=e._vsc_buffer_new_with_capacity(c);const s=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_ACCOUNT_KEY_LENGTH);try{const o=e._vsce_phe_client_enroll_account(this.ctxPtr,n,r,c,s);t.PheError.handleStatusCode(o);const a=e._vsc_buffer_bytes(c),i=e._vsc_buffer_len(c),_=e.HEAPU8.slice(a,a+i),u=e._vsc_buffer_bytes(s),l=e._vsc_buffer_len(s);return{enrollmentRecord:_,accountKey:e.HEAPU8.slice(u,u+l)}}finally{e._free(a),e._free(n),e._free(o),e._free(r),e._vsc_buffer_delete(c),e._vsc_buffer_delete(s)}}verifyPasswordRequestLen(){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vsce_phe_client_verify_password_request_len(this.ctxPtr)}createVerifyPasswordRequest(n,r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("password",n),precondition$1.ensureByteArray("enrollmentRecord",r);var o=n.length*n.BYTES_PER_ELEMENT;const a=e._malloc(o);e.HEAP8.set(n,a),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,a,o);var c=r.length*r.BYTES_PER_ELEMENT;o=e._malloc(c),e.HEAP8.set(r,o),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,o,c),c=this.verifyPasswordRequestLen(),c=e._vsc_buffer_new_with_capacity(c);try{const o=e._vsce_phe_client_create_verify_password_request(this.ctxPtr,n,r,c);t.PheError.handleStatusCode(o);const a=e._vsc_buffer_bytes(c),s=e._vsc_buffer_len(c);return e.HEAPU8.slice(a,a+s)}finally{e._free(a),e._free(n),e._free(o),e._free(r),e._vsc_buffer_delete(c)}}checkResponseAndDecrypt(n,r,o){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("password",n),precondition$1.ensureByteArray("enrollmentRecord",r),precondition$1.ensureByteArray("verifyPasswordResponse",o);var a=n.length*n.BYTES_PER_ELEMENT;const c=e._malloc(a);e.HEAP8.set(n,c),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,c,a);var s=r.length*r.BYTES_PER_ELEMENT;a=e._malloc(s),e.HEAP8.set(r,a),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,a,s);var i=o.length*o.BYTES_PER_ELEMENT;s=e._malloc(i),e.HEAP8.set(o,s),o=e._vsc_data_ctx_size(),o=e._malloc(o),e._vsc_data(o,s,i),i=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_ACCOUNT_KEY_LENGTH);try{const a=e._vsce_phe_client_check_response_and_decrypt(this.ctxPtr,n,r,o,i);t.PheError.handleStatusCode(a);const c=e._vsc_buffer_bytes(i),s=e._vsc_buffer_len(i);return e.HEAPU8.slice(c,c+s)}finally{e._free(a),e._free(n),e._free(c),e._free(r),e._free(s),e._free(o),e._vsc_buffer_delete(i)}}rotateKeys(n){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("updateToken",n);var r=n.length*n.BYTES_PER_ELEMENT;const o=e._malloc(r);e.HEAP8.set(n,o),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,o,r),r=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PRIVATE_KEY_LENGTH);const a=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PUBLIC_KEY_LENGTH);try{const o=e._vsce_phe_client_rotate_keys(this.ctxPtr,n,r,a);t.PheError.handleStatusCode(o);const c=e._vsc_buffer_bytes(r),s=e._vsc_buffer_len(r),i=e.HEAPU8.slice(c,c+s),_=e._vsc_buffer_bytes(a),u=e._vsc_buffer_len(a);return{newClientPrivateKey:i,newServerPublicKey:e.HEAPU8.slice(_,_+u)}}finally{e._free(o),e._free(n),e._vsc_buffer_delete(r),e._vsc_buffer_delete(a)}}updateEnrollmentRecord(n,r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("enrollmentRecord",n),precondition$1.ensureByteArray("updateToken",r);var o=n.length*n.BYTES_PER_ELEMENT;const a=e._malloc(o);e.HEAP8.set(n,a),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,a,o);var c=r.length*r.BYTES_PER_ELEMENT;o=e._malloc(c),e.HEAP8.set(r,o),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,o,c),c=this.enrollmentRecordLen(),c=e._vsc_buffer_new_with_capacity(c);try{const o=e._vsce_phe_client_update_enrollment_record(this.ctxPtr,n,r,c);t.PheError.handleStatusCode(o);const a=e._vsc_buffer_bytes(c),s=e._vsc_buffer_len(c);return e.HEAPU8.slice(a,a+s)}finally{e._free(a),e._free(n),e._free(o),e._free(r),e._vsc_buffer_delete(c)}}}return n};var PheClient=initPheClient;let initPheCipher=(e,t)=>{class n{constructor(t){this.name="PheCipher",this.ctxPtr=void 0===t?e._vsce_phe_cipher_new():t}static newAndUseCContext(t){return new n(e._vsce_phe_cipher_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vsce_phe_cipher_delete(this.ctxPtr),this.ctxPtr=null)}set random(n){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureImplementInterface("random",n,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_cipher_release_random(this.ctxPtr),e._vsce_phe_cipher_use_random(this.ctxPtr,n.ctxPtr)}setupDefaults(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=e._vsce_phe_cipher_setup_defaults(this.ctxPtr);t.PheError.handleStatusCode(n)}encryptLen(t){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureNumber("plainTextLen",t),e._vsce_phe_cipher_encrypt_len(this.ctxPtr,t)}decryptLen(t){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureNumber("cipherTextLen",t),e._vsce_phe_cipher_decrypt_len(this.ctxPtr,t)}encrypt(n,r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("plainText",n),precondition$1.ensureByteArray("accountKey",r);var o=n.length*n.BYTES_PER_ELEMENT;const a=e._malloc(o);e.HEAP8.set(n,a);var c=e._vsc_data_ctx_size();c=e._malloc(c),e._vsc_data(c,a,o);const s=r.length*r.BYTES_PER_ELEMENT;o=e._malloc(s),e.HEAP8.set(r,o),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,o,s),n=this.encryptLen(n.length),n=e._vsc_buffer_new_with_capacity(n);try{const o=e._vsce_phe_cipher_encrypt(this.ctxPtr,c,r,n);t.PheError.handleStatusCode(o);const a=e._vsc_buffer_bytes(n),s=e._vsc_buffer_len(n);return e.HEAPU8.slice(a,a+s)}finally{e._free(a),e._free(c),e._free(o),e._free(r),e._vsc_buffer_delete(n)}}decrypt(n,r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("cipherText",n),precondition$1.ensureByteArray("accountKey",r);var o=n.length*n.BYTES_PER_ELEMENT;const a=e._malloc(o);e.HEAP8.set(n,a);var c=e._vsc_data_ctx_size();c=e._malloc(c),e._vsc_data(c,a,o);const s=r.length*r.BYTES_PER_ELEMENT;o=e._malloc(s),e.HEAP8.set(r,o),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,o,s),n=this.decryptLen(n.length),n=e._vsc_buffer_new_with_capacity(n);try{const o=e._vsce_phe_cipher_decrypt(this.ctxPtr,c,r,n);t.PheError.handleStatusCode(o);const a=e._vsc_buffer_bytes(n),s=e._vsc_buffer_len(n);return e.HEAPU8.slice(a,a+s)}finally{e._free(a),e._free(c),e._free(o),e._free(r),e._vsc_buffer_delete(n)}}authEncrypt(n,r,o){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("plainText",n),precondition$1.ensureByteArray("additionalData",r),precondition$1.ensureByteArray("accountKey",o);var a=n.length*n.BYTES_PER_ELEMENT;const c=e._malloc(a);e.HEAP8.set(n,c);var s=e._vsc_data_ctx_size();s=e._malloc(s),e._vsc_data(s,c,a);var i=r.length*r.BYTES_PER_ELEMENT;a=e._malloc(i),e.HEAP8.set(r,a),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,a,i);const _=o.length*o.BYTES_PER_ELEMENT;i=e._malloc(_),e.HEAP8.set(o,i),o=e._vsc_data_ctx_size(),o=e._malloc(o),e._vsc_data(o,i,_),n=this.encryptLen(n.length),n=e._vsc_buffer_new_with_capacity(n);try{const a=e._vsce_phe_cipher_auth_encrypt(this.ctxPtr,s,r,o,n);t.PheError.handleStatusCode(a);const c=e._vsc_buffer_bytes(n),_=e._vsc_buffer_len(n);return e.HEAPU8.slice(c,c+_)}finally{e._free(a),e._free(s),e._free(c),e._free(r),e._free(i),e._free(o),e._vsc_buffer_delete(n)}}authDecrypt(n,r,o){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("cipherText",n),precondition$1.ensureByteArray("additionalData",r),precondition$1.ensureByteArray("accountKey",o);var a=n.length*n.BYTES_PER_ELEMENT;const c=e._malloc(a);e.HEAP8.set(n,c);var s=e._vsc_data_ctx_size();s=e._malloc(s),e._vsc_data(s,c,a);var i=r.length*r.BYTES_PER_ELEMENT;a=e._malloc(i),e.HEAP8.set(r,a),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,a,i);const _=o.length*o.BYTES_PER_ELEMENT;i=e._malloc(_),e.HEAP8.set(o,i),o=e._vsc_data_ctx_size(),o=e._malloc(o),e._vsc_data(o,i,_),n=this.decryptLen(n.length),n=e._vsc_buffer_new_with_capacity(n);try{const a=e._vsce_phe_cipher_auth_decrypt(this.ctxPtr,s,r,o,n);t.PheError.handleStatusCode(a);const c=e._vsc_buffer_bytes(n),_=e._vsc_buffer_len(n);return e.HEAPU8.slice(c,c+_)}finally{e._free(_),e._free(s),e._free(a),e._free(r),e._free(i),e._free(o),e._vsc_buffer_delete(n)}}}return n};var PheCipher=initPheCipher;let initProject=()=>{const e=new libphe;return new Promise((t,n)=>{e.onRuntimeInitialized=()=>{const n={};n.FoundationInterface=FoundationInterface(e,n),n.CtrDrbg=CtrDrbg(e,n),n.Hmac=Hmac(e,n),n.Hkdf=Hkdf(e,n),n.Sha512=Sha512(e,n),n.PheError=PheError(),n.PheCommon=PheCommon(),n.PheServer=PheServer(e,n),n.PheClient=PheClient(e,n),n.PheCipher=PheCipher(e,n),t(n)},e.onAbort=e=>{n(Error(e))}})};var phe=initProject;module.exports=phe;
