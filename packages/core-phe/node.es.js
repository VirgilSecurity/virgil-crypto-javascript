var e;e={exports:{}}.exports=function(e){function t(e,t,r){var n=t+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.subarray&&te)return te.decode(e.subarray(t,r));for(n="";t<r;){var a=e[t++];if(128&a){var s=63&e[t++];if(192==(224&a))n+=String.fromCharCode((31&a)<<6|s);else{var _=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|s<<6|_:(7&a)<<18|s<<12|_<<6|63&e[t++])?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else n+=String.fromCharCode(a)}return n}function r(e){return 0<e%65536&&(e+=65536-e%65536),e}function n(e){re=e,K.HEAP8=ne=new Int8Array(e),K.HEAP16=se=new Int16Array(e),K.HEAP32=_e=new Int32Array(e),K.HEAPU8=ae=new Uint8Array(e),K.HEAPU16=new Uint16Array(e),K.HEAPU32=new Uint32Array(e),K.HEAPF32=new Float32Array(e),K.HEAPF64=new Float64Array(e)}function a(e){for(;0<e.length;){var t=e.shift();if("function"==typeof t)t();else{var r=t.qc;"number"==typeof r?void 0===t.Qb?K.dynCall_v(r):K.dynCall_vi(r,t.Qb):r(void 0===t.Qb?null:t.Qb)}}}function s(){var e=K.preRun.shift();oe.unshift(e)}function _(){var e=ye;return String.prototype.startsWith?e.startsWith("data:application/octet-stream;base64,"):0===e.indexOf("data:application/octet-stream;base64,")}function c(e){function t(e){K.asm=e.exports,ve--,K.monitorRunDependencies&&K.monitorRunDependencies(ve),0==ve&&(null!==me&&(clearInterval(me),me=null),be&&(e=be,be=null,e()))}function r(e){t(e.instance)}function n(e){return new Promise((function(e){e:{try{if(Z){var t=new Uint8Array(Z);break e}if(X){t=X(ye);break e}throw"both async and sync fetching of the wasm failed"}catch(e){Y(e)}t=void 0}e(t)})).then((function(e){return WebAssembly.instantiate(e,a)})).then(e,(function(e){j("failed to asynchronously prepare wasm: "+e),Y(e)}))}var a={env:e,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:J};if(ve++,K.monitorRunDependencies&&K.monitorRunDependencies(ve),K.instantiateWasm)try{return K.instantiateWasm(a,t)}catch(e){return j("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(Z||"function"!=typeof WebAssembly.instantiateStreaming||_()||"function"!=typeof fetch)return n(r);fetch(ye,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,a).then(r,(function(e){j("wasm streaming compile failed: "+e),j("falling back to ArrayBuffer instantiation"),n(r)}))}))}(),{}}function o(e,t){for(var r=0,n=e.length-1;0<=n;n--){var a=e[n];"."===a?e.splice(n,1):".."===a?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e}function i(e){var t="/"===e.charAt(0),r="/"===e.substr(-1);return(e=o(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e}function u(e){var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],e||t?(t&&(t=t.substr(0,t.length-1)),e+t):"."}function l(e){if("/"===e)return"/";var t=e.lastIndexOf("/");return-1===t?e:e.substr(t+1)}function f(){return i(Array.prototype.slice.call(arguments,0).join("/"))}function h(e,t){return i(e+"/"+t)}function d(e){return K.___errno_location&&(_e[K.___errno_location()>>2]=e),e}function p(){for(var e="",t=!1,r=arguments.length-1;-1<=r&&!t;r--){if("string"!=typeof(t=0<=r?arguments[r]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t="/"===t.charAt(0)}return(t?"/":"")+(e=o(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."}function v(e,t){Ce[e]={input:[],output:[],Lb:t},g(e,Ie)}function m(e,t){if(t=t||{},!(e=p("/",e)))return{path:"",node:null};var r,n={ac:!0,Ub:0};for(r in n)void 0===t[r]&&(t[r]=n[r]);if(8<t.Ub)throw new Ye(40);e=o(e.split("/").filter((function(e){return!!e})),!1);var a=Le;for(n="/",r=0;r<e.length;r++){var s=r===e.length-1;if(s&&t.parent)break;if(a=E(a,e[r]),n=h(n,e[r]),a.Pb&&(!s||s&&t.ac)&&(a=a.Pb.root),!s||t.$b)for(s=0;40960==(61440&a.mode);)if(a=k(n),a=m(n=p(u(n),a),{Ub:t.Ub}).node,40<s++)throw new Ye(40)}return{path:n,node:a}}function b(e){for(var t;;){if(e===e.parent)return e=e.Eb.ec,t?"/"!==e[e.length-1]?e+"/"+t:e+t:e;t=t?e.name+"/"+t:e.name,e=e.parent}}function y(e,t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%De.length}function E(e,t){var r;if(r=(r=x(e,"x"))?r:e.Ab.lookup?0:13)throw new Ye(r,e);for(r=De[y(e.id,t)];r;r=r.kc){var n=r.name;if(r.parent.id===e.id&&n===t)return r}return e.Ab.lookup(e,t)}function P(e,t,r,n){return Te||((Te=function(e,t,r,n){e||(e=this),this.parent=e,this.Eb=e.Eb,this.Pb=null,this.id=ze++,this.name=t,this.mode=r,this.Ab={},this.Bb={},this.rdev=n}).prototype={},Object.defineProperties(Te.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}}})),function(e){var t=y(e.parent.id,e.name);e.kc=De[t],De[t]=e}(e=new Te(e,t,r,n)),e}function w(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t}function x(e,t){return Me?0:(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:13}function A(e,t){try{return E(e,t),17}catch(e){}return x(e,"wx")}function T(e,t){ge||((ge=function(){}).prototype={},Object.defineProperties(ge.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}}}));var r,n=new ge;for(r in e)n[r]=e[r];return e=n,t=function(e){for(e=e||0;4096>=e;e++)if(!Be[e])return e;throw new Ye(24)}(t),e.fd=t,Be[t]=e}function g(e,t){Fe[e]={Bb:t}}function N(e,t){var r="/"===t,n=!t;if(r&&Le)throw new Ye(16);if(!r&&!n){var a=m(t,{ac:!1});if(t=a.path,(a=a.node).Pb)throw new Ye(16);if(16384!=(61440&a.mode))throw new Ye(20)}t={type:e,Sb:{},ec:t,jc:[]},(e=e.Eb(t)).Eb=t,t.root=e,r?Le=e:a&&(a.Pb=t,a.Eb&&a.Eb.jc.push(t))}function C(e,t,r){var n=m(e,{parent:!0}).node;if(!(e=l(e))||"."===e||".."===e)throw new Ye(22);var a=A(n,e);if(a)throw new Ye(a);if(!n.Ab.Mb)throw new Ye(1);return n.Ab.Mb(n,e,t,r)}function I(e){C(e,16895,0)}function S(e,t,r){void 0===r&&(r=t,t=438),C(e,8192|t,r)}function R(e,t){if(!p(e))throw new Ye(2);var r=m(t,{parent:!0}).node;if(!r)throw new Ye(2);var n=A(r,t=l(t));if(n)throw new Ye(n);if(!r.Ab.symlink)throw new Ye(1);r.Ab.symlink(r,t,e)}function k(e){if(!(e=m(e).node))throw new Ye(2);if(!e.Ab.readlink)throw new Ye(22);return p(b(e.parent),e.Ab.readlink(e))}function H(e,t,r,n){if(""===e)throw new Ye(2);if("string"==typeof t){var a=Oe[t];if(void 0===a)throw Error("Unknown file open mode: "+t);t=a}if(r=64&t?4095&(void 0===r?438:r)|32768:0,"object"==typeof e)var s=e;else{e=i(e);try{s=m(e,{$b:!(131072&t)}).node}catch(e){}}if(a=!1,64&t)if(s){if(128&t)throw new Ye(17)}else s=C(e,r,0),a=!0;if(!s)throw new Ye(2);if(8192==(61440&s.mode)&&(t&=-513),65536&t&&16384!=(61440&s.mode))throw new Ye(20);if(!a&&(r=s?40960==(61440&s.mode)?40:16384==(61440&s.mode)&&("r"!==w(t)||512&t)?21:x(s,w(t)):2))throw new Ye(r);if(512&t){var _;if(!(_="string"==typeof(r=s)?m(r,{$b:!0}).node:r).Ab.Gb)throw new Ye(1);if(16384==(61440&_.mode))throw new Ye(21);if(32768!=(61440&_.mode))throw new Ye(22);if(r=x(_,"w"))throw new Ye(r);_.Ab.Gb(_,{size:0,timestamp:Date.now()})}t&=-641,(n=T({node:s,path:b(s),flags:t,seekable:!0,position:0,Bb:s.Bb,oc:[],error:!1},n)).Bb.open&&n.Bb.open(n),!K.logReadFiles||1&t||(Ne||(Ne={}),e in Ne||(Ne[e]=1,console.log("FS.trackingDelegate error on read file: "+e)));try{Ue.onOpenFile&&(s=0,1!=(2097155&t)&&(s|=1),0!=(2097155&t)&&(s|=2),Ue.onOpenFile(e,s))}catch(t){console.log("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+t.message)}return n}function L(e,t,r){if(null===e.fd)throw new Ye(9);if(!e.seekable||!e.Bb.Jb)throw new Ye(29);if(0!=r&&1!=r&&2!=r)throw new Ye(22);e.position=e.Bb.Jb(e,t,r),e.oc=[]}function F(){Ye||((Ye=function(e,t){this.node=t,this.mc=function(e){this.Cb=e},this.mc(e),this.message="FS error"}).prototype=Error(),Ye.prototype.constructor=Ye,[2].forEach((function(e){Ke[e]=new Ye(e),Ke[e].stack="<generic error, no stack>"})))}function B(e,t,r){e=h("/dev",e);var n=function(e,t){var r=0;return e&&(r|=365),t&&(r|=146),r}(!!t,!!r);Ae||(Ae=64);var a=Ae++<<8|0;g(a,{open:function(e){e.seekable=!1},close:function(){r&&r.buffer&&r.buffer.length&&r(10)},read:function(e,r,n,a){for(var s=0,_=0;_<a;_++){try{var c=t()}catch(e){throw new Ye(5)}if(void 0===c&&0===s)throw new Ye(11);if(null==c)break;s++,r[n+_]=c}return s&&(e.node.timestamp=Date.now()),s},write:function(e,t,n,a){for(var s=0;s<a;s++)try{r(t[n+s])}catch(e){throw new Ye(5)}return a&&(e.node.timestamp=Date.now()),s}}),S(e,n,a)}function z(){return _e[(We+=4)-4>>2]}function D(){var e=Be[z()];if(!e)throw new Ye(9);return e}function M(){return ne.length}function U(){function e(){if(!je&&(je=!0,!ee)){if(K.noFSInit||xe||(xe=!0,F(),K.stdin=K.stdin,K.stdout=K.stdout,K.stderr=K.stderr,K.stdin?B("stdin",K.stdin):R("/dev/tty","/dev/stdin"),K.stdout?B("stdout",null,K.stdout):R("/dev/tty","/dev/stdout"),K.stderr?B("stderr",null,K.stderr):R("/dev/tty1","/dev/stderr"),H("/dev/stdin","r"),H("/dev/stdout","w"),H("/dev/stderr","w")),a(ie),Me=!1,a(ue),K.onRuntimeInitialized&&K.onRuntimeInitialized(),K.postRun)for("function"==typeof K.postRun&&(K.postRun=[K.postRun]);K.postRun.length;){var e=K.postRun.shift();le.unshift(e)}a(le)}}if(!(0<ve)){if(K.preRun)for("function"==typeof K.preRun&&(K.preRun=[K.preRun]);K.preRun.length;)s();a(oe),0<ve||(K.setStatus?(K.setStatus("Running..."),setTimeout((function(){setTimeout((function(){K.setStatus("")}),1),e()}),1)):e())}}function Y(e){throw K.onAbort&&K.onAbort(e),q(e),j(e),ee=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}var K;e=e||{},K||(K=void 0!==e?e:{});var O,G,$,W,V={};for(O in K)K.hasOwnProperty(O)&&(V[O]=K[O]);G=__dirname+"/";var X=function(e){return(e=function(e){return $||($=require("fs")),W||(W=require("path")),e=W.normalize(e),$.readFileSync(e)}(e)).buffer||(e=new Uint8Array(e)),e.buffer||Y("Assertion failed: undefined"),e};1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){throw e})),process.on("unhandledRejection",Y),K.inspect=function(){return"[Emscripten Module object]"};var q=K.print||console.log.bind(console),j=K.printErr||console.warn.bind(console);for(O in V)V.hasOwnProperty(O)&&(K[O]=V[O]);V=null;var Z,J={"f64-rem":function(e,t){return e%t},debugger:function(){}};K.wasmBinary&&(Z=K.wasmBinary),"object"!=typeof WebAssembly&&j("no native wasm support detected");var Q,ee=!1,te="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var re,ne,ae,se,_e,ce=K.TOTAL_MEMORY||16777216;(Q=K.wasmMemory?K.wasmMemory:new WebAssembly.Memory({initial:ce/65536}))&&(re=Q.buffer),ce=re.byteLength,n(re),_e[8056]=5275136;var oe=[],ie=[],ue=[],le=[],fe=Math.abs,he=Math.ceil,de=Math.floor,pe=Math.min,ve=0,me=null,be=null;K.preloadedImages={},K.preloadedAudios={};var ye="libphe.wasm";if(!_()){var Ee=ye;ye=K.locateFile?K.locateFile(Ee,G):G+Ee}K.asm=function(e,t){return t.memory=Q,t.table=new WebAssembly.Table({initial:268,maximum:268,element:"anyfunc"}),t.__memory_base=1024,t.__table_base=0,c(t)};var Pe,we,xe,Ae,Te,ge,Ne,Ce=[],Ie={open:function(e){var t=Ce[e.node.rdev];if(!t)throw new Ye(19);e.tty=t,e.seekable=!1},close:function(e){e.tty.Lb.flush(e.tty)},flush:function(e){e.tty.Lb.flush(e.tty)},read:function(e,t,r,n){if(!e.tty||!e.tty.Lb.cc)throw new Ye(6);for(var a=0,s=0;s<n;s++){try{var _=e.tty.Lb.cc(e.tty)}catch(e){throw new Ye(5)}if(void 0===_&&0===a)throw new Ye(11);if(null==_)break;a++,t[r+s]=_}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,r,n){if(!e.tty||!e.tty.Lb.Tb)throw new Ye(6);try{for(var a=0;a<n;a++)e.tty.Lb.Tb(e.tty,t[r+a])}catch(e){throw new Ye(5)}return n&&(e.node.timestamp=Date.now()),a}},Se={cc:function(e){if(!e.input.length){var t=null,r=Buffer.gc?Buffer.gc(256):new Buffer(256),n=0,a=process.stdin.fd;if("win32"!=process.platform){var s=!1;try{a=Ve.openSync("/dev/stdin","r"),s=!0}catch(e){}}try{n=Ve.readSync(a,r,0,256,null)}catch(e){if(-1==e.toString().indexOf("EOF"))throw e;n=0}if(s&&Ve.closeSync(a),!(t=0<n?r.slice(0,n).toString("utf-8"):null))return null;for(n=r=0;n<t.length;++n)55296<=(a=t.charCodeAt(n))&&57343>=a&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++n)),127>=a?++r:r=2047>=a?r+2:65535>=a?r+3:r+4;if(n=0,0<(s=(r=Array(r+1)).length)){a=n,s=n+s-1;for(var _=0;_<t.length;++_){var c=t.charCodeAt(_);if(55296<=c&&57343>=c&&(c=65536+((1023&c)<<10)|1023&t.charCodeAt(++_)),127>=c){if(n>=s)break;r[n++]=c}else{if(2047>=c){if(n+1>=s)break;r[n++]=192|c>>6}else{if(65535>=c){if(n+2>=s)break;r[n++]=224|c>>12}else{if(n+3>=s)break;r[n++]=240|c>>18,r[n++]=128|c>>12&63}r[n++]=128|c>>6&63}r[n++]=128|63&c}}r[n]=0,t=n-a}else t=0;r.length=t,e.input=r}return e.input.shift()},Tb:function(e,r){null===r||10===r?(q(t(e.output,0)),e.output=[]):0!=r&&e.output.push(r)},flush:function(e){e.output&&0<e.output.length&&(q(t(e.output,0)),e.output=[])}},Re={Tb:function(e,r){null===r||10===r?(j(t(e.output,0)),e.output=[]):0!=r&&e.output.push(r)},flush:function(e){e.output&&0<e.output.length&&(j(t(e.output,0)),e.output=[])}},ke={Hb:null,Eb:function(){return ke.createNode(null,"/",16895,0)},createNode:function(e,t,r,n){if(24576==(61440&r)||4096==(61440&r))throw new Ye(1);return ke.Hb||(ke.Hb={dir:{node:{Ib:ke.Ab.Ib,Gb:ke.Ab.Gb,lookup:ke.Ab.lookup,Mb:ke.Ab.Mb,rename:ke.Ab.rename,unlink:ke.Ab.unlink,rmdir:ke.Ab.rmdir,readdir:ke.Ab.readdir,symlink:ke.Ab.symlink},stream:{Jb:ke.Bb.Jb}},file:{node:{Ib:ke.Ab.Ib,Gb:ke.Ab.Gb},stream:{Jb:ke.Bb.Jb,read:ke.Bb.read,write:ke.Bb.write,Vb:ke.Bb.Vb,dc:ke.Bb.dc,fc:ke.Bb.fc}},link:{node:{Ib:ke.Ab.Ib,Gb:ke.Ab.Gb,readlink:ke.Ab.readlink},stream:{}},Xb:{node:{Ib:ke.Ab.Ib,Gb:ke.Ab.Gb},stream:Ge}}),16384==(61440&(r=P(e,t,r,n)).mode)?(r.Ab=ke.Hb.dir.node,r.Bb=ke.Hb.dir.stream,r.zb={}):32768==(61440&r.mode)?(r.Ab=ke.Hb.file.node,r.Bb=ke.Hb.file.stream,r.Db=0,r.zb=null):40960==(61440&r.mode)?(r.Ab=ke.Hb.link.node,r.Bb=ke.Hb.link.stream):8192==(61440&r.mode)&&(r.Ab=ke.Hb.Xb.node,r.Bb=ke.Hb.Xb.stream),r.timestamp=Date.now(),e&&(e.zb[t]=r),r},rc:function(e){if(e.zb&&e.zb.subarray){for(var t=[],r=0;r<e.Db;++r)t.push(e.zb[r]);return t}return e.zb},sc:function(e){return e.zb?e.zb.subarray?e.zb.subarray(0,e.Db):new Uint8Array(e.zb):new Uint8Array},Yb:function(e,t){var r=e.zb?e.zb.length:0;r>=t||(t=Math.max(t,r*(1048576>r?2:1.125)|0),0!=r&&(t=Math.max(t,256)),r=e.zb,e.zb=new Uint8Array(t),0<e.Db&&e.zb.set(r.subarray(0,e.Db),0))},lc:function(e,t){if(e.Db!=t)if(0==t)e.zb=null,e.Db=0;else{if(!e.zb||e.zb.subarray){var r=e.zb;e.zb=new Uint8Array(new ArrayBuffer(t)),r&&e.zb.set(r.subarray(0,Math.min(t,e.Db)))}else if(e.zb||(e.zb=[]),e.zb.length>t)e.zb.length=t;else for(;e.zb.length<t;)e.zb.push(0);e.Db=t}},Ab:{Ib:function(e){var t={};return t.dev=8192==(61440&e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,16384==(61440&e.mode)?t.size=4096:32768==(61440&e.mode)?t.size=e.Db:40960==(61440&e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.Kb=4096,t.blocks=Math.ceil(t.size/t.Kb),t},Gb:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&ke.lc(e,t.size)},lookup:function(){throw Ke[2]},Mb:function(e,t,r,n){return ke.createNode(e,t,r,n)},rename:function(e,t,r){if(16384==(61440&e.mode)){try{var n=E(t,r)}catch(e){}if(n)for(var a in n.zb)throw new Ye(39)}delete e.parent.zb[e.name],e.name=r,t.zb[r]=e,e.parent=t},unlink:function(e,t){delete e.zb[t]},rmdir:function(e,t){var r,n=E(e,t);for(r in n.zb)throw new Ye(39);delete e.zb[t]},readdir:function(e){var t,r=[".",".."];for(t in e.zb)e.zb.hasOwnProperty(t)&&r.push(t);return r},symlink:function(e,t,r){return(e=ke.createNode(e,t,41471,0)).link=r,e},readlink:function(e){if(40960!=(61440&e.mode))throw new Ye(22);return e.link}},Bb:{read:function(e,t,r,n,a){var s=e.node.zb;if(a>=e.node.Db)return 0;if(8<(e=Math.min(e.node.Db-a,n))&&s.subarray)t.set(s.subarray(a,a+e),r);else for(n=0;n<e;n++)t[r+n]=s[a+n];return e},write:function(e,t,r,n,a,s){if(s=!1,!n)return 0;if((e=e.node).timestamp=Date.now(),t.subarray&&(!e.zb||e.zb.subarray)){if(s)return e.zb=t.subarray(r,r+n),e.Db=n;if(0===e.Db&&0===a)return e.zb=new Uint8Array(t.subarray(r,r+n)),e.Db=n;if(a+n<=e.Db)return e.zb.set(t.subarray(r,r+n),a),n}if(ke.Yb(e,a+n),e.zb.subarray&&t.subarray)e.zb.set(t.subarray(r,r+n),a);else for(s=0;s<n;s++)e.zb[a+s]=t[r+s];return e.Db=Math.max(e.Db,a+n),n},Jb:function(e,t,r){if(1===r?t+=e.position:2===r&&32768==(61440&e.node.mode)&&(t+=e.node.Db),0>t)throw new Ye(22);return t},Vb:function(e,t,r){ke.Yb(e.node,t+r),e.node.Db=Math.max(e.node.Db,t+r)},dc:function(e,t,r,n,a,s,_){if(32768!=(61440&e.node.mode))throw new Ye(19);if(r=e.node.zb,2&_||r.buffer!==t&&r.buffer!==t.buffer){if((0<a||a+n<e.node.Db)&&(r=r.subarray?r.subarray(a,a+n):Array.prototype.slice.call(r,a,a+n)),e=!0,a=t.buffer==ne.buffer,!(n=Ze(n)))throw new Ye(12);(a?ne:t).set(r,n)}else e=!1,n=r.byteOffset;return{tc:n,pc:e}},fc:function(e,t,r,n,a){if(32768!=(61440&e.node.mode))throw new Ye(19);return 2&a?0:(ke.Bb.write(e,t,0,n,r,!1),0)}}},He={Ob:!1,nc:function(){He.Ob=!!process.platform.match(/^win/);var e=process.binding("constants");e.fs&&(e=e.fs),He.Zb={1024:e.O_APPEND,64:e.O_CREAT,128:e.O_EXCL,0:e.O_RDONLY,2:e.O_RDWR,4096:e.O_SYNC,512:e.O_TRUNC,1:e.O_WRONLY}},Wb:function(e){return Buffer.gc?Buffer.from(e):new Buffer(e)},Eb:function(e){return He.createNode(null,"/",He.bc(e.Sb.root),0)},createNode:function(e,t,r){if(16384!=(61440&r)&&32768!=(61440&r)&&40960!=(61440&r))throw new Ye(22);return(e=P(e,t,r)).Ab=He.Ab,e.Bb=He.Bb,e},bc:function(e){try{var t=Ve.lstatSync(e);He.Ob&&(t.mode|=(292&t.mode)>>2)}catch(e){if(!e.code)throw e;throw new Ye(-e.Cb)}return t.mode},Fb:function(e){for(var t=[];e.parent!==e;)t.push(e.name),e=e.parent;return t.push(e.Eb.Sb.root),t.reverse(),f.apply(null,t)},hc:function(e){e&=-2656257;var t,r=0;for(t in He.Zb)e&t&&(r|=He.Zb[t],e^=t);if(e)throw new Ye(22);return r},Ab:{Ib:function(e){e=He.Fb(e);try{var t=Ve.lstatSync(e)}catch(e){if(!e.code)throw e;throw new Ye(-e.Cb)}return He.Ob&&!t.Kb&&(t.Kb=4096),He.Ob&&!t.blocks&&(t.blocks=(t.size+t.Kb-1)/t.Kb|0),{dev:t.dev,ino:t.ino,mode:t.mode,nlink:t.nlink,uid:t.uid,gid:t.gid,rdev:t.rdev,size:t.size,atime:t.atime,mtime:t.mtime,ctime:t.ctime,Kb:t.Kb,blocks:t.blocks}},Gb:function(e,t){var r=He.Fb(e);try{void 0!==t.mode&&(Ve.chmodSync(r,t.mode),e.mode=t.mode),void 0!==t.size&&Ve.truncateSync(r,t.size)}catch(e){if(!e.code)throw e;throw new Ye(-e.Cb)}},lookup:function(e,t){var r=h(He.Fb(e),t);return r=He.bc(r),He.createNode(e,t,r)},Mb:function(e,t,r,n){e=He.createNode(e,t,r,n),t=He.Fb(e);try{16384==(61440&e.mode)?Ve.mkdirSync(t,e.mode):Ve.writeFileSync(t,"",{mode:e.mode})}catch(e){if(!e.code)throw e;throw new Ye(-e.Cb)}return e},rename:function(e,t,r){e=He.Fb(e),t=h(He.Fb(t),r);try{Ve.renameSync(e,t)}catch(e){if(!e.code)throw e;throw new Ye(-e.Cb)}},unlink:function(e,t){e=h(He.Fb(e),t);try{Ve.unlinkSync(e)}catch(e){if(!e.code)throw e;throw new Ye(-e.Cb)}},rmdir:function(e,t){e=h(He.Fb(e),t);try{Ve.rmdirSync(e)}catch(e){if(!e.code)throw e;throw new Ye(-e.Cb)}},readdir:function(e){e=He.Fb(e);try{return Ve.readdirSync(e)}catch(e){if(!e.code)throw e;throw new Ye(-e.Cb)}},symlink:function(e,t,r){e=h(He.Fb(e),t);try{Ve.symlinkSync(r,e)}catch(e){if(!e.code)throw e;throw new Ye(-e.Cb)}},readlink:function(e){var t=He.Fb(e);try{return t=Ve.readlinkSync(t),Xe.relative(Xe.resolve(e.Eb.Sb.root),t)}catch(e){if(!e.code)throw e;throw new Ye(-e.Cb)}}},Bb:{open:function(e){var t=He.Fb(e.node);try{32768==(61440&e.node.mode)&&(e.Nb=Ve.openSync(t,He.hc(e.flags)))}catch(e){if(!e.code)throw e;throw new Ye(-e.Cb)}},close:function(e){try{32768==(61440&e.node.mode)&&e.Nb&&Ve.closeSync(e.Nb)}catch(e){if(!e.code)throw e;throw new Ye(-e.Cb)}},read:function(e,t,r,n,a){if(0===n)return 0;try{return Ve.readSync(e.Nb,He.Wb(t.buffer),r,n,a)}catch(e){throw new Ye(-e.Cb)}},write:function(e,t,r,n,a){try{return Ve.writeSync(e.Nb,He.Wb(t.buffer),r,n,a)}catch(e){throw new Ye(-e.Cb)}},Jb:function(e,t,r){if(1===r)t+=e.position;else if(2===r&&32768==(61440&e.node.mode))try{t+=Ve.fstatSync(e.Nb).size}catch(e){throw new Ye(-e.Cb)}if(0>t)throw new Ye(22);return t}}},Le=null,Fe={},Be=[],ze=1,De=null,Me=!0,Ue={},Ye=null,Ke={},Oe={r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},Ge={open:function(e){e.Bb=Fe[e.node.rdev].Bb,e.Bb.open&&e.Bb.open(e)},Jb:function(){throw new Ye(29)}},$e={},We=0;F(),De=Array(4096),N(ke,"/"),I("/tmp"),I("/home"),I("/home/web_user"),function(){if(I("/dev"),g(259,{read:function(){return 0},write:function(e,t,r,n){return n}}),S("/dev/null",259),v(1280,Se),v(1536,Re),S("/dev/tty",1280),S("/dev/tty1",1536),"object"==typeof crypto&&"function"==typeof crypto.getRandomValues)var e=new Uint8Array(1),t=function(){return crypto.getRandomValues(e),e[0]};else try{var r=require("crypto");t=function(){return r.randomBytes(1)[0]}}catch(e){}t||(t=function(){Y("random_device")}),B("random",t),B("urandom",t),I("/dev/shm"),I("/dev/shm/tmp")}(),I("/proc"),I("/proc/self"),I("/proc/self/fd"),N({Eb:function(){var e=P("/proc/self","fd",16895,73);return e.Ab={lookup:function(e,t){var r=Be[+t];if(!r)throw new Ye(9);return(e={parent:null,Eb:{ec:"fake"},Ab:{readlink:function(){return r.path}}}).parent=e}},e}},"/proc/self/fd");var Ve=require("fs"),Xe=require("path");He.nc();var qe=K.asm({},{b:Y,d:function(){},i:d,m:function(e,t){We=t;try{var r=D(),n=z(),a=z(),s=z(),_=z();return-9007199254740992>=(e=4294967296*n+(a>>>0))||9007199254740992<=e?-75:(L(r,e,_),we=[r.position>>>0,(Pe=r.position,1<=+fe(Pe)?0<Pe?(0|pe(+de(Pe/4294967296),4294967295))>>>0:~~+he((Pe-+(~~Pe>>>0))/4294967296)>>>0:0)],_e[s>>2]=we[0],_e[s+4>>2]=we[1],r.Rb&&0===e&&0===_&&(r.Rb=null),0)}catch(e){return void 0!==$e&&e instanceof Ye||Y(e),-e.Cb}},l:function(e,t){We=t;try{var r=D(),n=z();e:{var a=z();for(t=e=0;t<a;t++){var s=_e[n+(8*t+4)>>2],_=r,c=_e[n+8*t>>2],o=s,i=void 0,u=ne;if(0>o||0>i)throw new Ye(22);if(null===_.fd)throw new Ye(9);if(1==(2097155&_.flags))throw new Ye(9);if(16384==(61440&_.node.mode))throw new Ye(21);if(!_.Bb.read)throw new Ye(22);var l=void 0!==i;if(l){if(!_.seekable)throw new Ye(29)}else i=_.position;var f=_.Bb.read(_,u,c,o,i);if(l||(_.position+=f),0>(_=f)){var h=-1;break e}if(e+=_,_<s)break}h=e}return h}catch(e){return void 0!==$e&&e instanceof Ye||Y(e),-e.Cb}},h:function(e,t){We=t;try{var r=D(),n=z();e:{var a=z();for(t=e=0;t<a;t++){var s=r,_=_e[n+8*t>>2],c=_e[n+(8*t+4)>>2],o=void 0,i=ne;if(0>c||0>o)throw new Ye(22);if(null===s.fd)throw new Ye(9);if(0==(2097155&s.flags))throw new Ye(9);if(16384==(61440&s.node.mode))throw new Ye(21);if(!s.Bb.write)throw new Ye(22);1024&s.flags&&L(s,0,2);var u=void 0!==o;if(u){if(!s.seekable)throw new Ye(29)}else o=s.position;var l=s.Bb.write(s,i,_,c,o,void 0);u||(s.position+=l);try{s.path&&Ue.onWriteToFile&&Ue.onWriteToFile(s.path)}catch(e){console.log("FS.trackingDelegate['onWriteToFile']('"+s.path+"') threw an exception: "+e.message)}if(0>(s=l)){var f=-1;break e}e+=s}f=e}return f}catch(e){return void 0!==$e&&e instanceof Ye||Y(e),-e.Cb}},g:function(e,t){We=t;try{var r=D();switch(z()){case 0:var n=z();return 0>n?-22:H(r.path,r.flags,0,n).fd;case 1:case 2:return 0;case 3:return r.flags;case 4:return n=z(),r.flags|=n,0;case 12:return n=z(),se[n+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-22;case 9:return d(22),-1;default:return-22}}catch(e){return void 0!==$e&&e instanceof Ye||Y(e),-e.Cb}},k:function(e,r){We=r;try{var n=z();return H(n?t(ae,n,void 0):"",z(),z()).fd}catch(e){return void 0!==$e&&e instanceof Ye||Y(e),-e.Cb}},f:function(e,t){We=t;try{var r=D(),n=z();switch(n){case 21509:case 21505:return r.tty?0:-25;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return r.tty?0:-25;case 21519:if(!r.tty)return-25;var a=z();return _e[a>>2]=0;case 21520:return r.tty?-22:-25;case 21531:if(e=z(),!r.Bb.ic)throw new Ye(25);return r.Bb.ic(r,n,e);case 21523:case 21524:return r.tty?0:-25;default:Y("bad ioctl syscall "+n)}}catch(e){return void 0!==$e&&e instanceof Ye||Y(e),-e.Cb}},e:function(e,t){We=t;try{var r=D();if(null===r.fd)throw new Ye(9);r.Rb&&(r.Rb=null);try{r.Bb.close&&r.Bb.close(r)}catch(e){throw e}finally{Be[r.fd]=null}return r.fd=null,0}catch(e){return void 0!==$e&&e instanceof Ye||Y(e),-e.Cb}},c:function(){},r:function(){K.abort()},q:M,p:function(e,t,r){ae.set(ae.subarray(t,t+r),e)},o:function(e){if(2147418112<e)return!1;for(var t=Math.max(M(),16777216);t<e;)t=536870912>=t?r(2*t):Math.min(r((3*t+2147483648)/4),2147418112);e:{try{Q.grow(t-re.byteLength+65535>>16),n(Q.buffer),e=1;break e}catch(e){}e=void 0}return!!e},j:function(e){var t=Date.now();return _e[e>>2]=t/1e3|0,_e[e+4>>2]=t%1e3*1e3|0,0},n:function(){Y("OOM")},a:32224},re);K.asm=qe,K.___errno_location=function(){return K.asm.s.apply(null,arguments)},K._free=function(){return K.asm.t.apply(null,arguments)};var je,Ze=K._malloc=function(){return K.asm.u.apply(null,arguments)};if(K._vsc_buffer_bytes=function(){return K.asm.v.apply(null,arguments)},K._vsc_buffer_data=function(){return K.asm.w.apply(null,arguments)},K._vsc_buffer_delete=function(){return K.asm.x.apply(null,arguments)},K._vsc_buffer_len=function(){return K.asm.y.apply(null,arguments)},K._vsc_buffer_make_secure=function(){return K.asm.z.apply(null,arguments)},K._vsc_buffer_new=function(){return K.asm.A.apply(null,arguments)},K._vsc_buffer_new_with_capacity=function(){return K.asm.B.apply(null,arguments)},K._vsc_data=function(){return K.asm.C.apply(null,arguments)},K._vsc_data_bytes=function(){return K.asm.D.apply(null,arguments)},K._vsc_data_ctx_size=function(){return K.asm.E.apply(null,arguments)},K._vsc_data_len=function(){return K.asm.F.apply(null,arguments)},K._vsce_error_ctx_size=function(){return K.asm.G.apply(null,arguments)},K._vsce_error_reset=function(){return K.asm.H.apply(null,arguments)},K._vsce_error_status=function(){return K.asm.I.apply(null,arguments)},K._vsce_phe_cipher_auth_decrypt=function(){return K.asm.J.apply(null,arguments)},K._vsce_phe_cipher_auth_encrypt=function(){return K.asm.K.apply(null,arguments)},K._vsce_phe_cipher_decrypt=function(){return K.asm.L.apply(null,arguments)},K._vsce_phe_cipher_decrypt_len=function(){return K.asm.M.apply(null,arguments)},K._vsce_phe_cipher_delete=function(){return K.asm.N.apply(null,arguments)},K._vsce_phe_cipher_encrypt=function(){return K.asm.O.apply(null,arguments)},K._vsce_phe_cipher_encrypt_len=function(){return K.asm.P.apply(null,arguments)},K._vsce_phe_cipher_new=function(){return K.asm.Q.apply(null,arguments)},K._vsce_phe_cipher_release_random=function(){return K.asm.R.apply(null,arguments)},K._vsce_phe_cipher_setup_defaults=function(){return K.asm.S.apply(null,arguments)},K._vsce_phe_cipher_shallow_copy=function(){return K.asm.T.apply(null,arguments)},K._vsce_phe_cipher_use_random=function(){return K.asm.U.apply(null,arguments)},K._vsce_phe_client_check_response_and_decrypt=function(){return K.asm.V.apply(null,arguments)},K._vsce_phe_client_create_verify_password_request=function(){return K.asm.W.apply(null,arguments)},K._vsce_phe_client_delete=function(){return K.asm.X.apply(null,arguments)},K._vsce_phe_client_enroll_account=function(){return K.asm.Y.apply(null,arguments)},K._vsce_phe_client_enrollment_record_len=function(){return K.asm.Z.apply(null,arguments)},K._vsce_phe_client_generate_client_private_key=function(){return K.asm._.apply(null,arguments)},K._vsce_phe_client_new=function(){return K.asm.$.apply(null,arguments)},K._vsce_phe_client_release_operation_random=function(){return K.asm.aa.apply(null,arguments)},K._vsce_phe_client_release_random=function(){return K.asm.ba.apply(null,arguments)},K._vsce_phe_client_rotate_keys=function(){return K.asm.ca.apply(null,arguments)},K._vsce_phe_client_set_keys=function(){return K.asm.da.apply(null,arguments)},K._vsce_phe_client_setup_defaults=function(){return K.asm.ea.apply(null,arguments)},K._vsce_phe_client_shallow_copy=function(){return K.asm.fa.apply(null,arguments)},K._vsce_phe_client_update_enrollment_record=function(){return K.asm.ga.apply(null,arguments)},K._vsce_phe_client_use_operation_random=function(){return K.asm.ha.apply(null,arguments)},K._vsce_phe_client_use_random=function(){return K.asm.ia.apply(null,arguments)},K._vsce_phe_client_verify_password_request_len=function(){return K.asm.ja.apply(null,arguments)},K._vsce_phe_server_delete=function(){return K.asm.ka.apply(null,arguments)},K._vsce_phe_server_enrollment_response_len=function(){return K.asm.la.apply(null,arguments)},K._vsce_phe_server_generate_server_key_pair=function(){return K.asm.ma.apply(null,arguments)},K._vsce_phe_server_get_enrollment=function(){return K.asm.na.apply(null,arguments)},K._vsce_phe_server_new=function(){return K.asm.oa.apply(null,arguments)},K._vsce_phe_server_release_operation_random=function(){return K.asm.pa.apply(null,arguments)},K._vsce_phe_server_release_random=function(){return K.asm.qa.apply(null,arguments)},K._vsce_phe_server_rotate_keys=function(){return K.asm.ra.apply(null,arguments)},K._vsce_phe_server_setup_defaults=function(){return K.asm.sa.apply(null,arguments)},K._vsce_phe_server_shallow_copy=function(){return K.asm.ta.apply(null,arguments)},K._vsce_phe_server_update_token_len=function(){return K.asm.ua.apply(null,arguments)},K._vsce_phe_server_use_operation_random=function(){return K.asm.va.apply(null,arguments)},K._vsce_phe_server_use_random=function(){return K.asm.wa.apply(null,arguments)},K._vsce_phe_server_verify_password=function(){return K.asm.xa.apply(null,arguments)},K._vsce_phe_server_verify_password_response_len=function(){return K.asm.ya.apply(null,arguments)},K._vscf_ctr_drbg_delete=function(){return K.asm.za.apply(null,arguments)},K._vscf_ctr_drbg_enable_prediction_resistance=function(){return K.asm.Aa.apply(null,arguments)},K._vscf_ctr_drbg_new=function(){return K.asm.Ba.apply(null,arguments)},K._vscf_ctr_drbg_random=function(){return K.asm.Ca.apply(null,arguments)},K._vscf_ctr_drbg_release_entropy_source=function(){return K.asm.Da.apply(null,arguments)},K._vscf_ctr_drbg_reseed=function(){return K.asm.Ea.apply(null,arguments)},K._vscf_ctr_drbg_set_entropy_len=function(){return K.asm.Fa.apply(null,arguments)},K._vscf_ctr_drbg_set_reseed_interval=function(){return K.asm.Ga.apply(null,arguments)},K._vscf_ctr_drbg_setup_defaults=function(){return K.asm.Ha.apply(null,arguments)},K._vscf_ctr_drbg_shallow_copy=function(){return K.asm.Ia.apply(null,arguments)},K._vscf_ctr_drbg_use_entropy_source=function(){return K.asm.Ja.apply(null,arguments)},K._vscf_error_ctx_size=function(){return K.asm.Ka.apply(null,arguments)},K._vscf_error_reset=function(){return K.asm.La.apply(null,arguments)},K._vscf_error_status=function(){return K.asm.Ma.apply(null,arguments)},K._vscf_hkdf_alg_id=function(){return K.asm.Na.apply(null,arguments)},K._vscf_hkdf_delete=function(){return K.asm.Oa.apply(null,arguments)},K._vscf_hkdf_derive=function(){return K.asm.Pa.apply(null,arguments)},K._vscf_hkdf_new=function(){return K.asm.Qa.apply(null,arguments)},K._vscf_hkdf_produce_alg_info=function(){return K.asm.Ra.apply(null,arguments)},K._vscf_hkdf_release_hash=function(){return K.asm.Sa.apply(null,arguments)},K._vscf_hkdf_reset=function(){return K.asm.Ta.apply(null,arguments)},K._vscf_hkdf_restore_alg_info=function(){return K.asm.Ua.apply(null,arguments)},K._vscf_hkdf_set_info=function(){return K.asm.Va.apply(null,arguments)},K._vscf_hkdf_shallow_copy=function(){return K.asm.Wa.apply(null,arguments)},K._vscf_hkdf_use_hash=function(){return K.asm.Xa.apply(null,arguments)},K._vscf_hmac_alg_id=function(){return K.asm.Ya.apply(null,arguments)},K._vscf_hmac_delete=function(){return K.asm.Za.apply(null,arguments)},K._vscf_hmac_digest_len=function(){return K.asm._a.apply(null,arguments)},K._vscf_hmac_finish=function(){return K.asm.$a.apply(null,arguments)},K._vscf_hmac_mac=function(){return K.asm.ab.apply(null,arguments)},K._vscf_hmac_new=function(){return K.asm.bb.apply(null,arguments)},K._vscf_hmac_produce_alg_info=function(){return K.asm.cb.apply(null,arguments)},K._vscf_hmac_release_hash=function(){return K.asm.db.apply(null,arguments)},K._vscf_hmac_reset=function(){return K.asm.eb.apply(null,arguments)},K._vscf_hmac_restore_alg_info=function(){return K.asm.fb.apply(null,arguments)},K._vscf_hmac_shallow_copy=function(){return K.asm.gb.apply(null,arguments)},K._vscf_hmac_start=function(){return K.asm.hb.apply(null,arguments)},K._vscf_hmac_update=function(){return K.asm.ib.apply(null,arguments)},K._vscf_hmac_use_hash=function(){return K.asm.jb.apply(null,arguments)},K._vscf_impl_api=function(){return K.asm.kb.apply(null,arguments)},K._vscf_impl_shallow_copy=function(){return K.asm.lb.apply(null,arguments)},K._vscf_impl_tag=function(){return K.asm.mb.apply(null,arguments)},K._vscf_sha512_alg_id=function(){return K.asm.nb.apply(null,arguments)},K._vscf_sha512_delete=function(){return K.asm.ob.apply(null,arguments)},K._vscf_sha512_finish=function(){return K.asm.pb.apply(null,arguments)},K._vscf_sha512_hash=function(){return K.asm.qb.apply(null,arguments)},K._vscf_sha512_new=function(){return K.asm.rb.apply(null,arguments)},K._vscf_sha512_produce_alg_info=function(){return K.asm.sb.apply(null,arguments)},K._vscf_sha512_restore_alg_info=function(){return K.asm.tb.apply(null,arguments)},K._vscf_sha512_shallow_copy=function(){return K.asm.ub.apply(null,arguments)},K._vscf_sha512_start=function(){return K.asm.vb.apply(null,arguments)},K._vscf_sha512_update=function(){return K.asm.wb.apply(null,arguments)},K.stackAlloc=function(){return K.asm.yb.apply(null,arguments)},K.dynCall_vi=function(){return K.asm.xb.apply(null,arguments)},K.asm=qe,K.then=function(e){if(je)e(K);else{var t=K.onRuntimeInitialized;K.onRuntimeInitialized=function(){t&&t(),e(K)}}return K},be=function e(){je||U(),je||(be=e)},K.run=U,K.abort=Y,K.preInit)for("function"==typeof K.preInit&&(K.preInit=[K.preInit]);0<K.preInit.length;)K.preInit.pop()();return U(),e};function t(e,t){if(!("number"==typeof t||t instanceof Number))throw new TypeError(`'${e}' is not a number`);if(Number.isNaN(t))throw new TypeError(`'${e}' is NaN`);if(1/0===t)throw new TypeError(`'${e}' is Infinity`);if(-1/0===t)throw new TypeError(`'${e}' is -Infinity`)}function r(e,r){if(t(e,r),0==r)throw new TypeError(`'${e}' is NULL`)}var n={ensureNumber:t,ensureString:function(e,t){if(!("string"==typeof t||t instanceof String))throw new TypeError(`'${e}' is not a string`)},ensureBoolean:function(e,t){if("boolean"!=typeof t)throw new TypeError(`'${e}' is not a boolean`)},ensureByteArray:function(e,t){if(!(t instanceof Uint8Array))throw new TypeError(`'${e}' is not an Uint8Array`)},ensureClass:function(e,t,n){if(!(t instanceof n))throw new TypeError(`'${e}' is not an instance of the class ${n.name}`);r(e,t.ctxPtr)},ensureNotNull:r,ensureImplementInterface:function(e,t,n,a,s){if(r(e,t.ctxPtr),!s.isImplemented(t.ctxPtr,a))throw new TypeError(`'${e}' does not implement interface '${n}'`)}},a=(e,t)=>{class r{static get RESEED_INTERVAL(){return 1e4}get RESEED_INTERVAL(){return r.RESEED_INTERVAL}static get ENTROPY_LEN(){return 48}get ENTROPY_LEN(){return r.ENTROPY_LEN}constructor(t){this.name="CtrDrbg",this.ctxPtr=void 0===t?e._vscf_ctr_drbg_new():t}static newAndUseCContext(t){return new r(e._vscf_ctr_drbg_shallow_copy(t))}static newAndTakeCContext(e){return new r(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vscf_ctr_drbg_delete(this.ctxPtr),this.ctxPtr=null)}set entropySource(r){n.ensureNotNull("this.ctxPtr",this.ctxPtr),n.ensureImplementInterface("entropySource",r,"Foundation.EntropySource",t.FoundationInterfaceTag.ENTROPY_SOURCE,t.FoundationInterface),e._vscf_ctr_drbg_release_entropy_source(this.ctxPtr),r=e._vscf_ctr_drbg_use_entropy_source(this.ctxPtr,r.ctxPtr),t.FoundationError.handleStatusCode(r)}random(r){n.ensureNotNull("this.ctxPtr",this.ctxPtr),n.ensureNumber("dataLen",r);const a=e._vsc_buffer_new_with_capacity(r);try{const n=e._vscf_ctr_drbg_random(this.ctxPtr,r,a);t.FoundationError.handleStatusCode(n);const s=e._vsc_buffer_bytes(a),_=e._vsc_buffer_len(a);return e.HEAPU8.slice(s,s+_)}finally{e._vsc_buffer_delete(a)}}reseed(){n.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=e._vscf_ctr_drbg_reseed(this.ctxPtr);t.FoundationError.handleStatusCode(r)}setupDefaults(){n.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=e._vscf_ctr_drbg_setup_defaults(this.ctxPtr);t.FoundationError.handleStatusCode(r)}enablePredictionResistance(){n.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_ctr_drbg_enable_prediction_resistance(this.ctxPtr)}setReseedInterval(t){n.ensureNotNull("this.ctxPtr",this.ctxPtr),n.ensureNumber("interval",t),e._vscf_ctr_drbg_set_reseed_interval(this.ctxPtr,t)}setEntropyLen(t){n.ensureNotNull("this.ctxPtr",this.ctxPtr),n.ensureNumber("len",t),e._vscf_ctr_drbg_set_entropy_len(this.ctxPtr,t)}}return r},s=(e,t)=>{class r{constructor(t){this.name="Hmac",this.ctxPtr=void 0===t?e._vscf_hmac_new():t}static newAndUseCContext(t){return new r(e._vscf_hmac_shallow_copy(t))}static newAndTakeCContext(e){return new r(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vscf_hmac_delete(this.ctxPtr),this.ctxPtr=null)}set hash(r){n.ensureNotNull("this.ctxPtr",this.ctxPtr),n.ensureImplementInterface("hash",r,"Foundation.Hash",t.FoundationInterfaceTag.HASH,t.FoundationInterface),e._vscf_hmac_release_hash(this.ctxPtr),e._vscf_hmac_use_hash(this.ctxPtr,r.ctxPtr)}algId(){return n.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_hmac_alg_id(this.ctxPtr)}produceAlgInfo(){let r;return n.ensureNotNull("this.ctxPtr",this.ctxPtr),r=e._vscf_hmac_produce_alg_info(this.ctxPtr),t.FoundationInterface.newAndTakeCContext(r)}restoreAlgInfo(r){n.ensureNotNull("this.ctxPtr",this.ctxPtr),n.ensureImplementInterface("algInfo",r,"Foundation.AlgInfo",t.FoundationInterfaceTag.ALG_INFO,t.FoundationInterface),r=e._vscf_hmac_restore_alg_info(this.ctxPtr,r.ctxPtr),t.FoundationError.handleStatusCode(r)}digestLen(){return n.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_hmac_digest_len(this.ctxPtr)}mac(t,r){n.ensureNotNull("this.ctxPtr",this.ctxPtr),n.ensureByteArray("key",t),n.ensureByteArray("data",r);var a=t.length*t.BYTES_PER_ELEMENT;const s=e._malloc(a);e.HEAP8.set(t,s),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,s,a);var _=r.length*r.BYTES_PER_ELEMENT;a=e._malloc(_),e.HEAP8.set(r,a),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,a,_),_=this.digestLen(),_=e._vsc_buffer_new_with_capacity(_);try{e._vscf_hmac_mac(this.ctxPtr,t,r,_);const n=e._vsc_buffer_bytes(_),a=e._vsc_buffer_len(_);return e.HEAPU8.slice(n,n+a)}finally{e._free(s),e._free(t),e._free(n),e._free(r),e._vsc_buffer_delete(_)}}start(t){n.ensureNotNull("this.ctxPtr",this.ctxPtr),n.ensureByteArray("key",t);const r=t.length*t.BYTES_PER_ELEMENT,a=e._malloc(r);e.HEAP8.set(t,a),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,a,r);try{e._vscf_hmac_start(this.ctxPtr,t)}finally{e._free(a),e._free(t)}}update(t){n.ensureNotNull("this.ctxPtr",this.ctxPtr),n.ensureByteArray("data",t);const r=t.length*t.BYTES_PER_ELEMENT,a=e._malloc(r);e.HEAP8.set(t,a),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,a,r);try{e._vscf_hmac_update(this.ctxPtr,t)}finally{e._free(a),e._free(t)}}finish(){n.ensureNotNull("this.ctxPtr",this.ctxPtr);var t=this.digestLen();t=e._vsc_buffer_new_with_capacity(t);try{e._vscf_hmac_finish(this.ctxPtr,t);const r=e._vsc_buffer_bytes(t),n=e._vsc_buffer_len(t);return e.HEAPU8.slice(r,r+n)}finally{e._vsc_buffer_delete(t)}}reset(){n.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_hmac_reset(this.ctxPtr)}}return r},_=(e,t)=>{class r{constructor(t){this.name="Hkdf",this.ctxPtr=void 0===t?e._vscf_hkdf_new():t}static newAndUseCContext(t){return new r(e._vscf_hkdf_shallow_copy(t))}static newAndTakeCContext(e){return new r(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vscf_hkdf_delete(this.ctxPtr),this.ctxPtr=null)}set hash(r){n.ensureNotNull("this.ctxPtr",this.ctxPtr),n.ensureImplementInterface("hash",r,"Foundation.Hash",t.FoundationInterfaceTag.HASH,t.FoundationInterface),e._vscf_hkdf_release_hash(this.ctxPtr),e._vscf_hkdf_use_hash(this.ctxPtr,r.ctxPtr)}algId(){return n.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_hkdf_alg_id(this.ctxPtr)}produceAlgInfo(){let r;return n.ensureNotNull("this.ctxPtr",this.ctxPtr),r=e._vscf_hkdf_produce_alg_info(this.ctxPtr),t.FoundationInterface.newAndTakeCContext(r)}restoreAlgInfo(r){n.ensureNotNull("this.ctxPtr",this.ctxPtr),n.ensureImplementInterface("algInfo",r,"Foundation.AlgInfo",t.FoundationInterfaceTag.ALG_INFO,t.FoundationInterface),r=e._vscf_hkdf_restore_alg_info(this.ctxPtr,r.ctxPtr),t.FoundationError.handleStatusCode(r)}derive(t,r){n.ensureNotNull("this.ctxPtr",this.ctxPtr),n.ensureByteArray("data",t),n.ensureNumber("keyLen",r);var a=t.length*t.BYTES_PER_ELEMENT;const s=e._malloc(a);e.HEAP8.set(t,s),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,s,a),a=e._vsc_buffer_new_with_capacity(r);try{e._vscf_hkdf_derive(this.ctxPtr,t,r,a);const n=e._vsc_buffer_bytes(a),s=e._vsc_buffer_len(a);return e.HEAPU8.slice(n,n+s)}finally{e._free(s),e._free(t),e._vsc_buffer_delete(a)}}reset(t,r){n.ensureNotNull("this.ctxPtr",this.ctxPtr),n.ensureByteArray("salt",t),n.ensureNumber("iterationCount",r);const a=t.length*t.BYTES_PER_ELEMENT,s=e._malloc(a);e.HEAP8.set(t,s),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,s,a);try{e._vscf_hkdf_reset(this.ctxPtr,t,r)}finally{e._free(s),e._free(t)}}setInfo(t){n.ensureNotNull("this.ctxPtr",this.ctxPtr),n.ensureByteArray("info",t);const r=t.length*t.BYTES_PER_ELEMENT,a=e._malloc(r);e.HEAP8.set(t,a),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,a,r);try{e._vscf_hkdf_set_info(this.ctxPtr,t)}finally{e._free(a),e._free(t)}}}return r},c=(e,t)=>{class r{static get DIGEST_LEN(){return 64}get DIGEST_LEN(){return r.DIGEST_LEN}static get BLOCK_LEN(){return 128}get BLOCK_LEN(){return r.BLOCK_LEN}constructor(t){this.name="Sha512",this.ctxPtr=void 0===t?e._vscf_sha512_new():t}static newAndUseCContext(t){return new r(e._vscf_sha512_shallow_copy(t))}static newAndTakeCContext(e){return new r(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vscf_sha512_delete(this.ctxPtr),this.ctxPtr=null)}algId(){return n.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_sha512_alg_id(this.ctxPtr)}produceAlgInfo(){let r;return n.ensureNotNull("this.ctxPtr",this.ctxPtr),r=e._vscf_sha512_produce_alg_info(this.ctxPtr),t.FoundationInterface.newAndTakeCContext(r)}restoreAlgInfo(r){n.ensureNotNull("this.ctxPtr",this.ctxPtr),n.ensureImplementInterface("algInfo",r,"Foundation.AlgInfo",t.FoundationInterfaceTag.ALG_INFO,t.FoundationInterface),r=e._vscf_sha512_restore_alg_info(this.ctxPtr,r.ctxPtr),t.FoundationError.handleStatusCode(r)}hash(t){n.ensureByteArray("data",t);var r=t.length*t.BYTES_PER_ELEMENT;const a=e._malloc(r);e.HEAP8.set(t,a),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,a,r),r=e._vsc_buffer_new_with_capacity(this.DIGEST_LEN);try{e._vscf_sha512_hash(t,r);const n=e._vsc_buffer_bytes(r),a=e._vsc_buffer_len(r);return e.HEAPU8.slice(n,n+a)}finally{e._free(a),e._free(t),e._vsc_buffer_delete(r)}}start(){n.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_sha512_start(this.ctxPtr)}update(t){n.ensureNotNull("this.ctxPtr",this.ctxPtr),n.ensureByteArray("data",t);const r=t.length*t.BYTES_PER_ELEMENT,a=e._malloc(r);e.HEAP8.set(t,a),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,a,r);try{e._vscf_sha512_update(this.ctxPtr,t)}finally{e._free(a),e._free(t)}}finish(){n.ensureNotNull("this.ctxPtr",this.ctxPtr);const t=e._vsc_buffer_new_with_capacity(this.DIGEST_LEN);try{e._vscf_sha512_finish(this.ctxPtr,t);const r=e._vsc_buffer_bytes(t),n=e._vsc_buffer_len(t);return e.HEAPU8.slice(r,r+n)}finally{e._vsc_buffer_delete(t)}}}return r},o=()=>{class e extends Error{constructor(e){super(e),this.name="PheError",this.message=e}static handleStatusCode(t){if(0!=t){if(-1==t)throw new e("Success proof check failed.");if(-2==t)throw new e("Failure proof check failed.");if(-3==t)throw new e("RNG returned error.");if(-4==t)throw new e("Protobuf decode failed.");if(-5==t)throw new e("Invalid public key.");if(-6==t)throw new e("Invalid private key.");if(-7==t)throw new e("AES error occurred.");throw new e("Unexpected status code:"+t)}}}return e};function i(e,t){if(!("number"==typeof t||t instanceof Number))throw new TypeError(`'${e}' is not a number`);if(Number.isNaN(t))throw new TypeError(`'${e}' is NaN`);if(1/0===t)throw new TypeError(`'${e}' is Infinity`);if(-1/0===t)throw new TypeError(`'${e}' is -Infinity`)}function u(e,t){if(i(e,t),0==t)throw new TypeError(`'${e}' is NULL`)}var l={ensureNumber:i,ensureString:function(e,t){if(!("string"==typeof t||t instanceof String))throw new TypeError(`'${e}' is not a string`)},ensureBoolean:function(e,t){if("boolean"!=typeof t)throw new TypeError(`'${e}' is not a boolean`)},ensureByteArray:function(e,t){if(!(t instanceof Uint8Array))throw new TypeError(`'${e}' is not an Uint8Array`)},ensureClass:function(e,t,r){if(!(t instanceof r))throw new TypeError(`'${e}' is not an instance of the class ${r.name}`);u(e,t.ctxPtr)},ensureNotNull:u,ensureImplementInterface:function(e,t,r,n,a){if(u(e,t.ctxPtr),!a.isImplemented(t.ctxPtr,n))throw new TypeError(`'${e}' does not implement interface '${r}'`)}},f=(e,t)=>{class r{constructor(t){this.name="PheServer",this.ctxPtr=void 0===t?e._vsce_phe_server_new():t}static newAndUseCContext(t){return new r(e._vsce_phe_server_shallow_copy(t))}static newAndTakeCContext(e){return new r(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vsce_phe_server_delete(this.ctxPtr),this.ctxPtr=null)}set random(r){l.ensureNotNull("this.ctxPtr",this.ctxPtr),l.ensureImplementInterface("random",r,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_server_release_random(this.ctxPtr),e._vsce_phe_server_use_random(this.ctxPtr,r.ctxPtr)}set operationRandom(r){l.ensureNotNull("this.ctxPtr",this.ctxPtr),l.ensureImplementInterface("operationRandom",r,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_server_release_operation_random(this.ctxPtr),e._vsce_phe_server_use_operation_random(this.ctxPtr,r.ctxPtr)}setupDefaults(){l.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=e._vsce_phe_server_setup_defaults(this.ctxPtr);t.PheError.handleStatusCode(r)}generateServerKeyPair(){l.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PRIVATE_KEY_LENGTH),n=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PUBLIC_KEY_LENGTH);try{const a=e._vsce_phe_server_generate_server_key_pair(this.ctxPtr,r,n);t.PheError.handleStatusCode(a);const s=e._vsc_buffer_bytes(r),_=e._vsc_buffer_len(r),c=e.HEAPU8.slice(s,s+_),o=e._vsc_buffer_bytes(n),i=e._vsc_buffer_len(n);return{serverPrivateKey:c,serverPublicKey:e.HEAPU8.slice(o,o+i)}}finally{e._vsc_buffer_delete(r),e._vsc_buffer_delete(n)}}enrollmentResponseLen(){return l.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vsce_phe_server_enrollment_response_len(this.ctxPtr)}getEnrollment(r,n){l.ensureNotNull("this.ctxPtr",this.ctxPtr),l.ensureByteArray("serverPrivateKey",r),l.ensureByteArray("serverPublicKey",n);var a=r.length*r.BYTES_PER_ELEMENT;const s=e._malloc(a);e.HEAP8.set(r,s),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,s,a);var _=n.length*n.BYTES_PER_ELEMENT;a=e._malloc(_),e.HEAP8.set(n,a),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,a,_),_=this.enrollmentResponseLen(),_=e._vsc_buffer_new_with_capacity(_);try{const a=e._vsce_phe_server_get_enrollment(this.ctxPtr,r,n,_);t.PheError.handleStatusCode(a);const s=e._vsc_buffer_bytes(_),c=e._vsc_buffer_len(_);return e.HEAPU8.slice(s,s+c)}finally{e._free(s),e._free(r),e._free(a),e._free(n),e._vsc_buffer_delete(_)}}verifyPasswordResponseLen(){return l.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vsce_phe_server_verify_password_response_len(this.ctxPtr)}verifyPassword(r,n,a){l.ensureNotNull("this.ctxPtr",this.ctxPtr),l.ensureByteArray("serverPrivateKey",r),l.ensureByteArray("serverPublicKey",n),l.ensureByteArray("verifyPasswordRequest",a);var s=r.length*r.BYTES_PER_ELEMENT;const _=e._malloc(s);e.HEAP8.set(r,_),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,_,s);var c=n.length*n.BYTES_PER_ELEMENT;s=e._malloc(c),e.HEAP8.set(n,s),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,s,c);var o=a.length*a.BYTES_PER_ELEMENT;c=e._malloc(o),e.HEAP8.set(a,c),a=e._vsc_data_ctx_size(),a=e._malloc(a),e._vsc_data(a,c,o),o=this.verifyPasswordResponseLen(),o=e._vsc_buffer_new_with_capacity(o);try{const s=e._vsce_phe_server_verify_password(this.ctxPtr,r,n,a,o);t.PheError.handleStatusCode(s);const _=e._vsc_buffer_bytes(o),c=e._vsc_buffer_len(o);return e.HEAPU8.slice(_,_+c)}finally{e._free(s),e._free(r),e._free(_),e._free(n),e._free(c),e._free(a),e._vsc_buffer_delete(o)}}updateTokenLen(){return l.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vsce_phe_server_update_token_len(this.ctxPtr)}rotateKeys(r){l.ensureNotNull("this.ctxPtr",this.ctxPtr),l.ensureByteArray("serverPrivateKey",r);var n=r.length*r.BYTES_PER_ELEMENT;const a=e._malloc(n);e.HEAP8.set(r,a),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,a,n),n=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PRIVATE_KEY_LENGTH);const s=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PUBLIC_KEY_LENGTH);var _=this.updateTokenLen();_=e._vsc_buffer_new_with_capacity(_);try{const a=e._vsce_phe_server_rotate_keys(this.ctxPtr,r,n,s,_);t.PheError.handleStatusCode(a);const c=e._vsc_buffer_bytes(n),o=e._vsc_buffer_len(n),i=e.HEAPU8.slice(c,c+o),u=e._vsc_buffer_bytes(s),l=e._vsc_buffer_len(s),f=e.HEAPU8.slice(u,u+l),h=e._vsc_buffer_bytes(_),d=e._vsc_buffer_len(_);return{newServerPrivateKey:i,newServerPublicKey:f,updateToken:e.HEAPU8.slice(h,h+d)}}finally{e._free(a),e._free(r),e._vsc_buffer_delete(n),e._vsc_buffer_delete(s),e._vsc_buffer_delete(_)}}}return r},h=(e,t)=>{class r{constructor(t){this.name="PheClient",this.ctxPtr=void 0===t?e._vsce_phe_client_new():t}static newAndUseCContext(t){return new r(e._vsce_phe_client_shallow_copy(t))}static newAndTakeCContext(e){return new r(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vsce_phe_client_delete(this.ctxPtr),this.ctxPtr=null)}set random(r){l.ensureNotNull("this.ctxPtr",this.ctxPtr),l.ensureImplementInterface("random",r,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_client_release_random(this.ctxPtr),e._vsce_phe_client_use_random(this.ctxPtr,r.ctxPtr)}set operationRandom(r){l.ensureNotNull("this.ctxPtr",this.ctxPtr),l.ensureImplementInterface("operationRandom",r,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_client_release_operation_random(this.ctxPtr),e._vsce_phe_client_use_operation_random(this.ctxPtr,r.ctxPtr)}setupDefaults(){l.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=e._vsce_phe_client_setup_defaults(this.ctxPtr);t.PheError.handleStatusCode(r)}setKeys(r,n){l.ensureNotNull("this.ctxPtr",this.ctxPtr),l.ensureByteArray("clientPrivateKey",r),l.ensureByteArray("serverPublicKey",n);var a=r.length*r.BYTES_PER_ELEMENT;const s=e._malloc(a);e.HEAP8.set(r,s),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,s,a),a=n.length*n.BYTES_PER_ELEMENT;const _=e._malloc(a);e.HEAP8.set(n,_),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,_,a);try{const a=e._vsce_phe_client_set_keys(this.ctxPtr,r,n);t.PheError.handleStatusCode(a)}finally{e._free(s),e._free(r),e._free(_),e._free(n)}}generateClientPrivateKey(){l.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PRIVATE_KEY_LENGTH);try{const n=e._vsce_phe_client_generate_client_private_key(this.ctxPtr,r);t.PheError.handleStatusCode(n);const a=e._vsc_buffer_bytes(r),s=e._vsc_buffer_len(r);return e.HEAPU8.slice(a,a+s)}finally{e._vsc_buffer_delete(r)}}enrollmentRecordLen(){return l.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vsce_phe_client_enrollment_record_len(this.ctxPtr)}enrollAccount(r,n){l.ensureNotNull("this.ctxPtr",this.ctxPtr),l.ensureByteArray("enrollmentResponse",r),l.ensureByteArray("password",n);var a=r.length*r.BYTES_PER_ELEMENT;const s=e._malloc(a);e.HEAP8.set(r,s),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,s,a);var _=n.length*n.BYTES_PER_ELEMENT;a=e._malloc(_),e.HEAP8.set(n,a),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,a,_),_=this.enrollmentRecordLen(),_=e._vsc_buffer_new_with_capacity(_);const c=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_ACCOUNT_KEY_LENGTH);try{const a=e._vsce_phe_client_enroll_account(this.ctxPtr,r,n,_,c);t.PheError.handleStatusCode(a);const s=e._vsc_buffer_bytes(_),o=e._vsc_buffer_len(_),i=e.HEAPU8.slice(s,s+o),u=e._vsc_buffer_bytes(c),l=e._vsc_buffer_len(c);return{enrollmentRecord:i,accountKey:e.HEAPU8.slice(u,u+l)}}finally{e._free(s),e._free(r),e._free(a),e._free(n),e._vsc_buffer_delete(_),e._vsc_buffer_delete(c)}}verifyPasswordRequestLen(){return l.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vsce_phe_client_verify_password_request_len(this.ctxPtr)}createVerifyPasswordRequest(r,n){l.ensureNotNull("this.ctxPtr",this.ctxPtr),l.ensureByteArray("password",r),l.ensureByteArray("enrollmentRecord",n);var a=r.length*r.BYTES_PER_ELEMENT;const s=e._malloc(a);e.HEAP8.set(r,s),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,s,a);var _=n.length*n.BYTES_PER_ELEMENT;a=e._malloc(_),e.HEAP8.set(n,a),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,a,_),_=this.verifyPasswordRequestLen(),_=e._vsc_buffer_new_with_capacity(_);try{const a=e._vsce_phe_client_create_verify_password_request(this.ctxPtr,r,n,_);t.PheError.handleStatusCode(a);const s=e._vsc_buffer_bytes(_),c=e._vsc_buffer_len(_);return e.HEAPU8.slice(s,s+c)}finally{e._free(s),e._free(r),e._free(a),e._free(n),e._vsc_buffer_delete(_)}}checkResponseAndDecrypt(r,n,a){l.ensureNotNull("this.ctxPtr",this.ctxPtr),l.ensureByteArray("password",r),l.ensureByteArray("enrollmentRecord",n),l.ensureByteArray("verifyPasswordResponse",a);var s=r.length*r.BYTES_PER_ELEMENT;const _=e._malloc(s);e.HEAP8.set(r,_),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,_,s);var c=n.length*n.BYTES_PER_ELEMENT;s=e._malloc(c),e.HEAP8.set(n,s),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,s,c);var o=a.length*a.BYTES_PER_ELEMENT;c=e._malloc(o),e.HEAP8.set(a,c),a=e._vsc_data_ctx_size(),a=e._malloc(a),e._vsc_data(a,c,o),o=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_ACCOUNT_KEY_LENGTH);try{const s=e._vsce_phe_client_check_response_and_decrypt(this.ctxPtr,r,n,a,o);t.PheError.handleStatusCode(s);const _=e._vsc_buffer_bytes(o),c=e._vsc_buffer_len(o);return e.HEAPU8.slice(_,_+c)}finally{e._free(s),e._free(r),e._free(_),e._free(n),e._free(c),e._free(a),e._vsc_buffer_delete(o)}}rotateKeys(r){l.ensureNotNull("this.ctxPtr",this.ctxPtr),l.ensureByteArray("updateToken",r);var n=r.length*r.BYTES_PER_ELEMENT;const a=e._malloc(n);e.HEAP8.set(r,a),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,a,n),n=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PRIVATE_KEY_LENGTH);const s=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PUBLIC_KEY_LENGTH);try{const a=e._vsce_phe_client_rotate_keys(this.ctxPtr,r,n,s);t.PheError.handleStatusCode(a);const _=e._vsc_buffer_bytes(n),c=e._vsc_buffer_len(n),o=e.HEAPU8.slice(_,_+c),i=e._vsc_buffer_bytes(s),u=e._vsc_buffer_len(s);return{newClientPrivateKey:o,newServerPublicKey:e.HEAPU8.slice(i,i+u)}}finally{e._free(a),e._free(r),e._vsc_buffer_delete(n),e._vsc_buffer_delete(s)}}updateEnrollmentRecord(r,n){l.ensureNotNull("this.ctxPtr",this.ctxPtr),l.ensureByteArray("enrollmentRecord",r),l.ensureByteArray("updateToken",n);var a=r.length*r.BYTES_PER_ELEMENT;const s=e._malloc(a);e.HEAP8.set(r,s),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,s,a);var _=n.length*n.BYTES_PER_ELEMENT;a=e._malloc(_),e.HEAP8.set(n,a),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,a,_),_=this.enrollmentRecordLen(),_=e._vsc_buffer_new_with_capacity(_);try{const a=e._vsce_phe_client_update_enrollment_record(this.ctxPtr,r,n,_);t.PheError.handleStatusCode(a);const s=e._vsc_buffer_bytes(_),c=e._vsc_buffer_len(_);return e.HEAPU8.slice(s,s+c)}finally{e._free(s),e._free(r),e._free(a),e._free(n),e._vsc_buffer_delete(_)}}}return r},d=(e,t)=>{class r{constructor(t){this.name="PheCipher",this.ctxPtr=void 0===t?e._vsce_phe_cipher_new():t}static newAndUseCContext(t){return new r(e._vsce_phe_cipher_shallow_copy(t))}static newAndTakeCContext(e){return new r(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vsce_phe_cipher_delete(this.ctxPtr),this.ctxPtr=null)}set random(r){l.ensureNotNull("this.ctxPtr",this.ctxPtr),l.ensureImplementInterface("random",r,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_cipher_release_random(this.ctxPtr),e._vsce_phe_cipher_use_random(this.ctxPtr,r.ctxPtr)}setupDefaults(){l.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=e._vsce_phe_cipher_setup_defaults(this.ctxPtr);t.PheError.handleStatusCode(r)}encryptLen(t){return l.ensureNotNull("this.ctxPtr",this.ctxPtr),l.ensureNumber("plainTextLen",t),e._vsce_phe_cipher_encrypt_len(this.ctxPtr,t)}decryptLen(t){return l.ensureNotNull("this.ctxPtr",this.ctxPtr),l.ensureNumber("cipherTextLen",t),e._vsce_phe_cipher_decrypt_len(this.ctxPtr,t)}encrypt(r,n){l.ensureNotNull("this.ctxPtr",this.ctxPtr),l.ensureByteArray("plainText",r),l.ensureByteArray("accountKey",n);var a=r.length*r.BYTES_PER_ELEMENT;const s=e._malloc(a);e.HEAP8.set(r,s);var _=e._vsc_data_ctx_size();_=e._malloc(_),e._vsc_data(_,s,a);const c=n.length*n.BYTES_PER_ELEMENT;a=e._malloc(c),e.HEAP8.set(n,a),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,a,c),r=this.encryptLen(r.length),r=e._vsc_buffer_new_with_capacity(r);try{const a=e._vsce_phe_cipher_encrypt(this.ctxPtr,_,n,r);t.PheError.handleStatusCode(a);const s=e._vsc_buffer_bytes(r),c=e._vsc_buffer_len(r);return e.HEAPU8.slice(s,s+c)}finally{e._free(s),e._free(_),e._free(a),e._free(n),e._vsc_buffer_delete(r)}}decrypt(r,n){l.ensureNotNull("this.ctxPtr",this.ctxPtr),l.ensureByteArray("cipherText",r),l.ensureByteArray("accountKey",n);var a=r.length*r.BYTES_PER_ELEMENT;const s=e._malloc(a);e.HEAP8.set(r,s);var _=e._vsc_data_ctx_size();_=e._malloc(_),e._vsc_data(_,s,a);const c=n.length*n.BYTES_PER_ELEMENT;a=e._malloc(c),e.HEAP8.set(n,a),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,a,c),r=this.decryptLen(r.length),r=e._vsc_buffer_new_with_capacity(r);try{const a=e._vsce_phe_cipher_decrypt(this.ctxPtr,_,n,r);t.PheError.handleStatusCode(a);const s=e._vsc_buffer_bytes(r),c=e._vsc_buffer_len(r);return e.HEAPU8.slice(s,s+c)}finally{e._free(s),e._free(_),e._free(a),e._free(n),e._vsc_buffer_delete(r)}}authEncrypt(r,n,a){l.ensureNotNull("this.ctxPtr",this.ctxPtr),l.ensureByteArray("plainText",r),l.ensureByteArray("additionalData",n),l.ensureByteArray("accountKey",a);var s=r.length*r.BYTES_PER_ELEMENT;const _=e._malloc(s);e.HEAP8.set(r,_);var c=e._vsc_data_ctx_size();c=e._malloc(c),e._vsc_data(c,_,s);var o=n.length*n.BYTES_PER_ELEMENT;s=e._malloc(o),e.HEAP8.set(n,s),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,s,o);const i=a.length*a.BYTES_PER_ELEMENT;o=e._malloc(i),e.HEAP8.set(a,o),a=e._vsc_data_ctx_size(),a=e._malloc(a),e._vsc_data(a,o,i),r=this.encryptLen(r.length),r=e._vsc_buffer_new_with_capacity(r);try{const s=e._vsce_phe_cipher_auth_encrypt(this.ctxPtr,c,n,a,r);t.PheError.handleStatusCode(s);const _=e._vsc_buffer_bytes(r),o=e._vsc_buffer_len(r);return e.HEAPU8.slice(_,_+o)}finally{e._free(_),e._free(c),e._free(s),e._free(n),e._free(o),e._free(a),e._vsc_buffer_delete(r)}}authDecrypt(r,n,a){l.ensureNotNull("this.ctxPtr",this.ctxPtr),l.ensureByteArray("cipherText",r),l.ensureByteArray("additionalData",n),l.ensureByteArray("accountKey",a);var s=r.length*r.BYTES_PER_ELEMENT;const _=e._malloc(s);e.HEAP8.set(r,_);var c=e._vsc_data_ctx_size();c=e._malloc(c),e._vsc_data(c,_,s);var o=n.length*n.BYTES_PER_ELEMENT;s=e._malloc(o),e.HEAP8.set(n,s),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,s,o);const i=a.length*a.BYTES_PER_ELEMENT;o=e._malloc(i),e.HEAP8.set(a,o),a=e._vsc_data_ctx_size(),a=e._malloc(a),e._vsc_data(a,o,i),r=this.decryptLen(r.length),r=e._vsc_buffer_new_with_capacity(r);try{const s=e._vsce_phe_cipher_auth_decrypt(this.ctxPtr,c,n,a,r);t.PheError.handleStatusCode(s);const _=e._vsc_buffer_bytes(r),o=e._vsc_buffer_len(r);return e.HEAPU8.slice(_,_+o)}finally{e._free(_),e._free(c),e._free(s),e._free(n),e._free(o),e._free(a),e._vsc_buffer_delete(r)}}}return r};export default()=>{const t=new e;return new Promise((e,r)=>{t.onRuntimeInitialized=()=>{const r={};r.FoundationInterface=((e,t)=>{return class{static newAndTakeCContext(r){const n=e._vscf_impl_tag(r);switch(n){case t.FoundationImplTag.SHA224:return t.Sha224.newAndTakeCContext(r);case t.FoundationImplTag.SHA256:return t.Sha256.newAndTakeCContext(r);case t.FoundationImplTag.SHA384:return t.Sha384.newAndTakeCContext(r);case t.FoundationImplTag.SHA512:return t.Sha512.newAndTakeCContext(r);case t.FoundationImplTag.AES256_GCM:return t.Aes256Gcm.newAndTakeCContext(r);case t.FoundationImplTag.AES256_CBC:return t.Aes256Cbc.newAndTakeCContext(r);case t.FoundationImplTag.ASN1RD:return t.Asn1rd.newAndTakeCContext(r);case t.FoundationImplTag.ASN1WR:return t.Asn1wr.newAndTakeCContext(r);case t.FoundationImplTag.RSA_PUBLIC_KEY:return t.RsaPublicKey.newAndTakeCContext(r);case t.FoundationImplTag.RSA_PRIVATE_KEY:return t.RsaPrivateKey.newAndTakeCContext(r);case t.FoundationImplTag.RSA:return t.Rsa.newAndTakeCContext(r);case t.FoundationImplTag.ECC_PUBLIC_KEY:return t.EccPublicKey.newAndTakeCContext(r);case t.FoundationImplTag.ECC_PRIVATE_KEY:return t.EccPrivateKey.newAndTakeCContext(r);case t.FoundationImplTag.ECC:return t.Ecc.newAndTakeCContext(r);case t.FoundationImplTag.ENTROPY_ACCUMULATOR:return t.EntropyAccumulator.newAndTakeCContext(r);case t.FoundationImplTag.CTR_DRBG:return t.CtrDrbg.newAndTakeCContext(r);case t.FoundationImplTag.HMAC:return t.Hmac.newAndTakeCContext(r);case t.FoundationImplTag.HKDF:return t.Hkdf.newAndTakeCContext(r);case t.FoundationImplTag.KDF1:return t.Kdf1.newAndTakeCContext(r);case t.FoundationImplTag.KDF2:return t.Kdf2.newAndTakeCContext(r);case t.FoundationImplTag.FAKE_RANDOM:return t.FakeRandom.newAndTakeCContext(r);case t.FoundationImplTag.PKCS5_PBKDF2:return t.Pkcs5Pbkdf2.newAndTakeCContext(r);case t.FoundationImplTag.PKCS5_PBES2:return t.Pkcs5Pbes2.newAndTakeCContext(r);case t.FoundationImplTag.SEED_ENTROPY_SOURCE:return t.SeedEntropySource.newAndTakeCContext(r);case t.FoundationImplTag.KEY_MATERIAL_RNG:return t.KeyMaterialRng.newAndTakeCContext(r);case t.FoundationImplTag.RAW_PUBLIC_KEY:return t.RawPublicKey.newAndTakeCContext(r);case t.FoundationImplTag.RAW_PRIVATE_KEY:return t.RawPrivateKey.newAndTakeCContext(r);case t.FoundationImplTag.PKCS8_SERIALIZER:return t.Pkcs8Serializer.newAndTakeCContext(r);case t.FoundationImplTag.SEC1_SERIALIZER:return t.Sec1Serializer.newAndTakeCContext(r);case t.FoundationImplTag.KEY_ASN1_SERIALIZER:return t.KeyAsn1Serializer.newAndTakeCContext(r);case t.FoundationImplTag.KEY_ASN1_DESERIALIZER:return t.KeyAsn1Deserializer.newAndTakeCContext(r);case t.FoundationImplTag.ED25519:return t.Ed25519.newAndTakeCContext(r);case t.FoundationImplTag.CURVE25519:return t.Curve25519.newAndTakeCContext(r);case t.FoundationImplTag.SIMPLE_ALG_INFO:return t.SimpleAlgInfo.newAndTakeCContext(r);case t.FoundationImplTag.HASH_BASED_ALG_INFO:return t.HashBasedAlgInfo.newAndTakeCContext(r);case t.FoundationImplTag.CIPHER_ALG_INFO:return t.CipherAlgInfo.newAndTakeCContext(r);case t.FoundationImplTag.SALTED_KDF_ALG_INFO:return t.SaltedKdfAlgInfo.newAndTakeCContext(r);case t.FoundationImplTag.PBE_ALG_INFO:return t.PbeAlgInfo.newAndTakeCContext(r);case t.FoundationImplTag.ECC_ALG_INFO:return t.EccAlgInfo.newAndTakeCContext(r);case t.FoundationImplTag.ALG_INFO_DER_SERIALIZER:return t.AlgInfoDerSerializer.newAndTakeCContext(r);case t.FoundationImplTag.ALG_INFO_DER_DESERIALIZER:return t.AlgInfoDerDeserializer.newAndTakeCContext(r);case t.FoundationImplTag.MESSAGE_INFO_DER_SERIALIZER:return t.MessageInfoDerSerializer.newAndTakeCContext(r);default:throw Error("Unexpected implementation tag found: "+n)}}static newAndUseCContext(r){return new t.FoundationInterface.newAndTakeCContext(e._vscf_impl_shallow_copy(r))}static isImplemented(t,r){return 0!=e._vscf_impl_api(t,r)}}})(t,r),r.CtrDrbg=a(t,r),r.Hmac=s(t,r),r.Hkdf=_(t,r),r.Sha512=c(t,r),r.PheError=o(),r.PheCommon=(()=>{class e{static get PHE_POINT_LENGTH(){return 65}get PHE_POINT_LENGTH(){return e.PHE_POINT_LENGTH}static get PHE_MAX_PASSWORD_LENGTH(){return 128}get PHE_MAX_PASSWORD_LENGTH(){return e.PHE_MAX_PASSWORD_LENGTH}static get PHE_SERVER_IDENTIFIER_LENGTH(){return 32}get PHE_SERVER_IDENTIFIER_LENGTH(){return e.PHE_SERVER_IDENTIFIER_LENGTH}static get PHE_CLIENT_IDENTIFIER_LENGTH(){return 32}get PHE_CLIENT_IDENTIFIER_LENGTH(){return e.PHE_CLIENT_IDENTIFIER_LENGTH}static get PHE_ACCOUNT_KEY_LENGTH(){return 32}get PHE_ACCOUNT_KEY_LENGTH(){return e.PHE_ACCOUNT_KEY_LENGTH}static get PHE_PRIVATE_KEY_LENGTH(){return 32}get PHE_PRIVATE_KEY_LENGTH(){return e.PHE_PRIVATE_KEY_LENGTH}static get PHE_PUBLIC_KEY_LENGTH(){return 65}get PHE_PUBLIC_KEY_LENGTH(){return e.PHE_PUBLIC_KEY_LENGTH}static get PHE_HASH_LEN(){return 32}get PHE_HASH_LEN(){return e.PHE_HASH_LEN}static get PHE_MAX_ENCRYPT_LEN(){return 1048512}get PHE_MAX_ENCRYPT_LEN(){return e.PHE_MAX_ENCRYPT_LEN}static get PHE_MAX_DECRYPT_LEN(){return 1048576}get PHE_MAX_DECRYPT_LEN(){return e.PHE_MAX_DECRYPT_LEN}static get PHE_MAX_AUTH_LEN(){return 1024}get PHE_MAX_AUTH_LEN(){return e.PHE_MAX_AUTH_LEN}}return e})(),r.PheServer=f(t,r),r.PheClient=h(t,r),r.PheCipher=d(t,r),e(r)},t.onAbort=e=>{r(Error(e))}})};
