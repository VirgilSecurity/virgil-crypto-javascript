var e,t,n,r;n=t={exports:{}},r=function(){var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return function(t){function n(e,t,n){var r=t+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.subarray&&ee)return ee.decode(e.subarray(t,n));for(r="";t<n;){var a=e[t++];if(128&a){var s=63&e[t++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|s);else{var _=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|s<<6|_:(7&a)<<18|s<<12|_<<6|63&e[t++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function r(e){return 0<e%65536&&(e+=65536-e%65536),e}function a(e){te=e,Y.HEAP8=ne=new Int8Array(e),Y.HEAP16=ae=new Int16Array(e),Y.HEAP32=se=new Int32Array(e),Y.HEAPU8=re=new Uint8Array(e),Y.HEAPU16=new Uint16Array(e),Y.HEAPU32=new Uint32Array(e),Y.HEAPF32=new Float32Array(e),Y.HEAPF64=new Float64Array(e)}function s(e){for(;0<e.length;){var t=e.shift();if("function"==typeof t)t();else{var n=t.sc;"number"==typeof n?void 0===t.Qb?Y.dynCall_v(n):Y.dynCall_vi(n,t.Qb):n(void 0===t.Qb?null:t.Qb)}}}function _(){var e=Y.preRun.shift();ce.unshift(e)}function c(e){throw Y.onAbort&&Y.onAbort(e),W(e),X(e),Q=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}function o(){var e=ye;return String.prototype.startsWith?e.startsWith("data:application/octet-stream;base64,"):0===e.indexOf("data:application/octet-stream;base64,")}function i(){try{if(j)return new Uint8Array(j);if(V)return V(ye);throw"both async and sync fetching of the wasm failed"}catch(e){c(e)}}function u(e,t){for(var n=0,r=e.length-1;0<=r;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e}function l(e){var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=u(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function f(e){var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],e||t?(t&&(t=t.substr(0,t.length-1)),e+t):"."}function h(e){if("/"===e)return"/";var t=e.lastIndexOf("/");return-1===t?e:e.substr(t+1)}function d(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){if("string"!=typeof(t=0<=n?arguments[n]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t="/"===t.charAt(0)}return(t?"/":"")+(e=u(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."}function p(e,t){ge[e]={input:[],Bb:[],Jb:t},T(e,Ce)}function v(e,t){if(t=t||{},!(e=d("/",e)))return{path:"",node:null};var n,r={Yb:!0,Tb:0};for(n in r)void 0===t[n]&&(t[n]=r[n]);if(8<t.Tb)throw new ze(32);e=u(e.split("/").filter((function(e){return!!e})),!1);var a=Se;for(r="/",n=0;n<e.length;n++){var s=n===e.length-1;if(s&&t.parent)break;if(a=m(a,e[n]),r=l(r+"/"+e[n]),a.Nb&&(!s||s&&t.Yb)&&(a=a.Nb.root),!s||t.Xb)for(s=0;40960==(61440&a.mode);)if(a=H(r),a=v(r=d(f(r),a),{Tb:t.Tb}).node,40<s++)throw new ze(32)}return{path:r,node:a}}function b(e){for(var t;;){if(e===e.parent)return e=e.Eb.ac,t?"/"!==e[e.length-1]?e+"/"+t:e+t:e;t=t?e.name+"/"+t:e.name,e=e.parent}}function y(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%Be.length}function m(e,t){var n;if(n=(n=w(e,"x"))?n:e.xb.Kb?0:2)throw new ze(n,e);for(n=Be[y(e.id,t)];n;n=n.jc){var r=n.name;if(n.parent.id===e.id&&r===t)return n}return e.xb.Kb(e,t)}function E(e,t,n,r){return Ae||((Ae=function(e,t,n,r){e||(e=this),this.parent=e,this.Eb=e.Eb,this.Nb=null,this.id=Fe++,this.name=t,this.mode=n,this.xb={},this.yb={},this.Ob=r}).prototype={},Object.defineProperties(Ae.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}}})),function(e){var t=y(e.parent.id,e.name);e.jc=Be[t],Be[t]=e}(e=new Ae(e,t,n,r)),e}function P(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t}function w(e,t){return De?0:(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:2}function x(e,t){try{return m(e,t),20}catch(e){}return w(e,"wx")}function A(e,t){Te||((Te=function(){}).prototype={},Object.defineProperties(Te.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}}}));var n,r=new Te;for(n in e)r[n]=e[n];return e=r,t=function(e){for(e=e||0;4096>=e;e++)if(!ke[e])return e;throw new ze(33)}(t),e.Fb=t,ke[t]=e}function T(e,t){Le[e]={yb:t}}function N(e,t){var n="/"===t,r=!t;if(n&&Se)throw new ze(10);if(!n&&!r){var a=v(t,{Yb:!1});if(t=a.path,(a=a.node).Nb)throw new ze(10);if(16384!=(61440&a.mode))throw new ze(54)}t={type:e,zc:{},ac:t,ic:[]},(e=e.Eb(t)).Eb=t,t.root=e,n?Se=e:a&&(a.Nb=t,a.Eb&&a.Eb.ic.push(t))}function g(e,t,n){var r=v(e,{parent:!0}).node;if(!(e=h(e))||"."===e||".."===e)throw new ze(28);var a=x(r,e);if(a)throw new ze(a);if(!r.xb.Mb)throw new ze(63);return r.xb.Mb(r,e,t,n)}function C(e){g(e,16895,0)}function I(e,t,n){void 0===n&&(n=t,t=438),g(e,8192|t,n)}function R(e,t){if(!d(e))throw new ze(44);var n=v(t,{parent:!0}).node;if(!n)throw new ze(44);var r=x(n,t=h(t));if(r)throw new ze(r);if(!n.xb.Pb)throw new ze(63);n.xb.Pb(n,t,e)}function H(e){if(!(e=v(e).node))throw new ze(44);if(!e.xb.Lb)throw new ze(28);return d(b(e.parent),e.xb.Lb(e))}function S(e,t,n,r){if(""===e)throw new ze(44);if("string"==typeof t){var a=Ke[t];if(void 0===a)throw Error("Unknown file open mode: "+t);t=a}if(n=64&t?4095&(void 0===n?438:n)|32768:0,"object"==typeof e)var s=e;else{e=l(e);try{s=v(e,{Xb:!(131072&t)}).node}catch(e){}}if(a=!1,64&t)if(s){if(128&t)throw new ze(20)}else s=g(e,n,0),a=!0;if(!s)throw new ze(44);if(8192==(61440&s.mode)&&(t&=-513),65536&t&&16384!=(61440&s.mode))throw new ze(54);if(!a&&(n=s?40960==(61440&s.mode)?32:16384==(61440&s.mode)&&("r"!==P(t)||512&t)?31:w(s,P(t)):44))throw new ze(n);if(512&t){var _;if(!(_="string"==typeof(n=s)?v(n,{Xb:!0}).node:n).xb.Db)throw new ze(63);if(16384==(61440&_.mode))throw new ze(31);if(32768!=(61440&_.mode))throw new ze(28);if(n=w(_,"w"))throw new ze(n);_.xb.Db(_,{size:0,timestamp:Date.now()})}t&=-641,(r=A({node:s,path:b(s),flags:t,seekable:!0,position:0,yb:s.yb,mc:[],error:!1},r)).yb.open&&r.yb.open(r),!Y.logReadFiles||1&t||(Ne||(Ne={}),e in Ne||(Ne[e]=1,console.log("FS.trackingDelegate error on read file: "+e)));try{Me.onOpenFile&&(s=0,1!=(2097155&t)&&(s|=1),0!=(2097155&t)&&(s|=2),Me.onOpenFile(e,s))}catch(t){console.log("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+t.message)}return r}function L(e,t,n){if(null===e.Fb)throw new ze(8);if(!e.seekable||!e.yb.Ib)throw new ze(70);if(0!=n&&1!=n&&2!=n)throw new ze(28);e.position=e.yb.Ib(e,t,n),e.mc=[]}function k(){ze||((ze=function(e,t){this.node=t,this.lc=function(e){this.Hb=e},this.lc(e),this.message="FS error"}).prototype=Error(),ze.prototype.constructor=ze,[44].forEach((function(e){Ue[e]=new ze(e),Ue[e].stack="<generic error, no stack>"})))}function F(e,t,n){e=l("/dev/"+e);var r=function(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n}(!!t,!!n);xe||(xe=64);var a=xe++<<8|0;T(a,{open:function(e){e.seekable=!1},close:function(){n&&n.buffer&&n.buffer.length&&n(10)},read:function(e,n,r,a){for(var s=0,_=0;_<a;_++){try{var c=t()}catch(e){throw new ze(29)}if(void 0===c&&0===s)throw new ze(6);if(null==c)break;s++,n[r+_]=c}return s&&(e.node.timestamp=Date.now()),s},write:function(e,t,r,a){for(var s=0;s<a;s++)try{n(t[r+s])}catch(e){throw new ze(29)}return a&&(e.node.timestamp=Date.now()),s}}),I(e,r,a)}function B(){return se[(Ge+=4)-4>>2]}function D(e){if(e||(e=B()),!(e=ke[e]))throw new ze(8);return e}function M(e){try{var t=D(e);if(null===t.Fb)throw new ze(8);t.Rb&&(t.Rb=null);try{t.yb.close&&t.yb.close(t)}catch(e){throw e}finally{ke[t.Fb]=null}return t.Fb=null,0}catch(e){return void 0!==Oe&&e instanceof ze||c(e),e.Hb}}function z(e,t,n,r){try{e:{for(var a=D(e),s=e=0;s<n;s++){var _=a,o=se[t+8*s>>2],i=se[t+(8*s+4)>>2],u=void 0,l=ne;if(0>i||0>u)throw new ze(28);if(null===_.Fb)throw new ze(8);if(0==(2097155&_.flags))throw new ze(8);if(16384==(61440&_.node.mode))throw new ze(31);if(!_.yb.write)throw new ze(28);1024&_.flags&&L(_,0,2);var f=void 0!==u;if(f){if(!_.seekable)throw new ze(70)}else u=_.position;var h=_.yb.write(_,l,o,i,u,void 0);f||(_.position+=h);try{_.path&&Me.onWriteToFile&&Me.onWriteToFile(_.path)}catch(e){console.log("FS.trackingDelegate['onWriteToFile']('"+_.path+"') threw an exception: "+e.message)}if(0>(_=h)){var d=-1;break e}e+=_}d=e}return se[r>>2]=d,0}catch(e){return void 0!==Oe&&e instanceof ze||c(e),e.Hb}}function U(){return ne.length}function K(){function e(){if(!We&&(We=!0,!Q)){if(Y.noFSInit||we||(we=!0,k(),Y.stdin=Y.stdin,Y.stdout=Y.stdout,Y.stderr=Y.stderr,Y.stdin?F("stdin",Y.stdin):R("/dev/tty","/dev/stdin"),Y.stdout?F("stdout",null,Y.stdout):R("/dev/tty","/dev/stdout"),Y.stderr?F("stderr",null,Y.stderr):R("/dev/tty1","/dev/stderr"),S("/dev/stdin","r"),S("/dev/stdout","w"),S("/dev/stderr","w")),s(oe),De=!1,s(ie),Y.onRuntimeInitialized&&Y.onRuntimeInitialized(),Y.postRun)for("function"==typeof Y.postRun&&(Y.postRun=[Y.postRun]);Y.postRun.length;){var e=Y.postRun.shift();ue.unshift(e)}s(ue)}}if(!(0<pe)){if(Y.preRun)for("function"==typeof Y.preRun&&(Y.preRun=[Y.preRun]);Y.preRun.length;)_();s(ce),0<pe||(Y.setStatus?(Y.setStatus("Running..."),setTimeout((function(){setTimeout((function(){Y.setStatus("")}),1),e()}),1)):e())}}var Y;t=t||{},Y||(Y=void 0!==t?t:{});var O,G={};for(O in Y)Y.hasOwnProperty(O)&&(G[O]=Y[O]);var $="";$=self.location.href,e&&($=e),$=0!==$.indexOf("blob:")?$.substr(0,$.lastIndexOf("/")+1):"";var V=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)},W=Y.print||console.log.bind(console),X=Y.printErr||console.warn.bind(console);for(O in G)G.hasOwnProperty(O)&&(Y[O]=G[O]);G=null;var j,q={"f64-rem":function(e,t){return e%t},debugger:function(){}};Y.wasmBinary&&(j=Y.wasmBinary),"object"!=typeof WebAssembly&&X("no native wasm support detected");var Z,J=new WebAssembly.Table({initial:286,maximum:286,element:"anyfunc"}),Q=!1,ee="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var te,ne,re,ae,se,_e=Y.TOTAL_MEMORY||16777216;(Z=Y.wasmMemory?Y.wasmMemory:new WebAssembly.Memory({initial:_e/65536}))&&(te=Z.buffer),_e=te.byteLength,a(te),se[7868]=5274560;var ce=[],oe=[],ie=[],ue=[],le=Math.abs,fe=Math.ceil,he=Math.floor,de=Math.min,pe=0,ve=null,be=null;Y.preloadedImages={},Y.preloadedAudios={};var ye="libphe.worker.wasm";if(!o()){var me=ye;ye=Y.locateFile?Y.locateFile(me,$):$+me}Y.asm=function(){function e(e){Y.asm=e.exports,pe--,Y.monitorRunDependencies&&Y.monitorRunDependencies(pe),0==pe&&(null!==ve&&(clearInterval(ve),ve=null),be&&(e=be,be=null,e()))}function t(t){e(t.instance)}function n(e){return(j||"function"!=typeof fetch?new Promise((function(e){e(i())})):fetch(ye,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ye+"'";return e.arrayBuffer()})).catch((function(){return i()}))).then((function(e){return WebAssembly.instantiate(e,r)})).then(e,(function(e){X("failed to asynchronously prepare wasm: "+e),c(e)}))}var r={env:$e,wasi_unstable:$e,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:q};if(pe++,Y.monitorRunDependencies&&Y.monitorRunDependencies(pe),Y.instantiateWasm)try{return Y.instantiateWasm(r,e)}catch(e){return X("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(j||"function"!=typeof WebAssembly.instantiateStreaming||o()||"function"!=typeof fetch)return n(t);fetch(ye,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,r).then(t,(function(e){X("wasm streaming compile failed: "+e),X("falling back to ArrayBuffer instantiation"),n(t)}))}))}(),{}};var Ee,Pe,we,xe,Ae,Te,Ne,ge=[],Ce={open:function(e){var t=ge[e.node.Ob];if(!t)throw new ze(43);e.Ab=t,e.seekable=!1},close:function(e){e.Ab.Jb.flush(e.Ab)},flush:function(e){e.Ab.Jb.flush(e.Ab)},read:function(e,t,n,r){if(!e.Ab||!e.Ab.Jb.Zb)throw new ze(60);for(var a=0,s=0;s<r;s++){try{var _=e.Ab.Jb.Zb(e.Ab)}catch(e){throw new ze(29)}if(void 0===_&&0===a)throw new ze(6);if(null==_)break;a++,t[n+s]=_}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,n,r){if(!e.Ab||!e.Ab.Jb.Sb)throw new ze(60);try{for(var a=0;a<r;a++)e.Ab.Jb.Sb(e.Ab,t[n+a])}catch(e){throw new ze(29)}return r&&(e.node.timestamp=Date.now()),a}},Ie={Zb:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;for(var n=0,r=0;r<t.length;++r){var a=t.charCodeAt(r);55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++r)),127>=a?++n:n=2047>=a?n+2:65535>=a?n+3:n+4}var s=(n=Array(n+1)).length;if(r=0,0<s){a=r,s=r+s-1;for(var _=0;_<t.length;++_){var c=t.charCodeAt(_);if(55296<=c&&57343>=c&&(c=65536+((1023&c)<<10)|1023&t.charCodeAt(++_)),127>=c){if(r>=s)break;n[r++]=c}else{if(2047>=c){if(r+1>=s)break;n[r++]=192|c>>6}else{if(65535>=c){if(r+2>=s)break;n[r++]=224|c>>12}else{if(r+3>=s)break;n[r++]=240|c>>18,n[r++]=128|c>>12&63}n[r++]=128|c>>6&63}n[r++]=128|63&c}}n[r]=0,t=r-a}else t=0;n.length=t,e.input=n}return e.input.shift()},Sb:function(e,t){null===t||10===t?(W(n(e.Bb,0)),e.Bb=[]):0!=t&&e.Bb.push(t)},flush:function(e){e.Bb&&0<e.Bb.length&&(W(n(e.Bb,0)),e.Bb=[])}},Re={Sb:function(e,t){null===t||10===t?(X(n(e.Bb,0)),e.Bb=[]):0!=t&&e.Bb.push(t)},flush:function(e){e.Bb&&0<e.Bb.length&&(X(n(e.Bb,0)),e.Bb=[])}},He={Cb:null,Eb:function(){return He.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(24576==(61440&n)||4096==(61440&n))throw new ze(63);return He.Cb||(He.Cb={dir:{node:{Gb:He.xb.Gb,Db:He.xb.Db,Kb:He.xb.Kb,Mb:He.xb.Mb,dc:He.xb.dc,fc:He.xb.fc,ec:He.xb.ec,cc:He.xb.cc,Pb:He.xb.Pb},stream:{Ib:He.yb.Ib}},file:{node:{Gb:He.xb.Gb,Db:He.xb.Db},stream:{Ib:He.yb.Ib,read:He.yb.read,write:He.yb.write,Ub:He.yb.Ub,$b:He.yb.$b,bc:He.yb.bc}},link:{node:{Gb:He.xb.Gb,Db:He.xb.Db,Lb:He.xb.Lb},stream:{}},Vb:{node:{Gb:He.xb.Gb,Db:He.xb.Db},stream:Ye}}),16384==(61440&(n=E(e,t,n,r)).mode)?(n.xb=He.Cb.dir.node,n.yb=He.Cb.dir.stream,n.wb={}):32768==(61440&n.mode)?(n.xb=He.Cb.file.node,n.yb=He.Cb.file.stream,n.zb=0,n.wb=null):40960==(61440&n.mode)?(n.xb=He.Cb.link.node,n.yb=He.Cb.link.stream):8192==(61440&n.mode)&&(n.xb=He.Cb.Vb.node,n.yb=He.Cb.Vb.stream),n.timestamp=Date.now(),e&&(e.wb[t]=n),n},tc:function(e){if(e.wb&&e.wb.subarray){for(var t=[],n=0;n<e.zb;++n)t.push(e.wb[n]);return t}return e.wb},uc:function(e){return e.wb?e.wb.subarray?e.wb.subarray(0,e.zb):new Uint8Array(e.wb):new Uint8Array},Wb:function(e,t){var n=e.wb?e.wb.length:0;n>=t||(t=Math.max(t,n*(1048576>n?2:1.125)|0),0!=n&&(t=Math.max(t,256)),n=e.wb,e.wb=new Uint8Array(t),0<e.zb&&e.wb.set(n.subarray(0,e.zb),0))},kc:function(e,t){if(e.zb!=t)if(0==t)e.wb=null,e.zb=0;else{if(!e.wb||e.wb.subarray){var n=e.wb;e.wb=new Uint8Array(new ArrayBuffer(t)),n&&e.wb.set(n.subarray(0,Math.min(t,e.zb)))}else if(e.wb||(e.wb=[]),e.wb.length>t)e.wb.length=t;else for(;e.wb.length<t;)e.wb.push(0);e.zb=t}},xb:{Gb:function(e){var t={};return t.rc=8192==(61440&e.mode)?e.id:1,t.wc=e.id,t.mode=e.mode,t.yc=1,t.uid=0,t.vc=0,t.Ob=e.Ob,16384==(61440&e.mode)?t.size=4096:32768==(61440&e.mode)?t.size=e.zb:40960==(61440&e.mode)?t.size=e.link.length:t.size=0,t.oc=new Date(e.timestamp),t.xc=new Date(e.timestamp),t.qc=new Date(e.timestamp),t.gc=4096,t.pc=Math.ceil(t.size/t.gc),t},Db:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&He.kc(e,t.size)},Kb:function(){throw Ue[44]},Mb:function(e,t,n,r){return He.createNode(e,t,n,r)},dc:function(e,t,n){if(16384==(61440&e.mode)){try{var r=m(t,n)}catch(e){}if(r)for(var a in r.wb)throw new ze(55)}delete e.parent.wb[e.name],e.name=n,t.wb[n]=e,e.parent=t},fc:function(e,t){delete e.wb[t]},ec:function(e,t){var n,r=m(e,t);for(n in r.wb)throw new ze(55);delete e.wb[t]},cc:function(e){var t,n=[".",".."];for(t in e.wb)e.wb.hasOwnProperty(t)&&n.push(t);return n},Pb:function(e,t,n){return(e=He.createNode(e,t,41471,0)).link=n,e},Lb:function(e){if(40960!=(61440&e.mode))throw new ze(28);return e.link}},yb:{read:function(e,t,n,r,a){var s=e.node.wb;if(a>=e.node.zb)return 0;if(8<(e=Math.min(e.node.zb-a,r))&&s.subarray)t.set(s.subarray(a,a+e),n);else for(r=0;r<e;r++)t[n+r]=s[a+r];return e},write:function(e,t,n,r,a,s){if(s=!1,!r)return 0;if((e=e.node).timestamp=Date.now(),t.subarray&&(!e.wb||e.wb.subarray)){if(s)return e.wb=t.subarray(n,n+r),e.zb=r;if(0===e.zb&&0===a)return e.wb=new Uint8Array(t.subarray(n,n+r)),e.zb=r;if(a+r<=e.zb)return e.wb.set(t.subarray(n,n+r),a),r}if(He.Wb(e,a+r),e.wb.subarray&&t.subarray)e.wb.set(t.subarray(n,n+r),a);else for(s=0;s<r;s++)e.wb[a+s]=t[n+s];return e.zb=Math.max(e.zb,a+r),r},Ib:function(e,t,n){if(1===n?t+=e.position:2===n&&32768==(61440&e.node.mode)&&(t+=e.node.zb),0>t)throw new ze(28);return t},Ub:function(e,t,n){He.Wb(e.node,t+n),e.node.zb=Math.max(e.node.zb,t+n)},$b:function(e,t,n,r,a,s,_){if(32768!=(61440&e.node.mode))throw new ze(43);if(n=e.node.wb,2&_||n.buffer!==t&&n.buffer!==t.buffer){if((0<a||a+r<e.node.zb)&&(n=n.subarray?n.subarray(a,a+r):Array.prototype.slice.call(n,a,a+r)),e=!0,a=t.buffer==ne.buffer,!(r=Xe(r)))throw new ze(48);(a?ne:t).set(n,r)}else e=!1,r=n.byteOffset;return{Ac:r,nc:e}},bc:function(e,t,n,r,a){if(32768!=(61440&e.node.mode))throw new ze(43);return 2&a?0:(He.yb.write(e,t,0,r,n,!1),0)}}},Se=null,Le={},ke=[],Fe=1,Be=null,De=!0,Me={},ze=null,Ue={},Ke={r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},Ye={open:function(e){e.yb=Le[e.node.Ob].yb,e.yb.open&&e.yb.open(e)},Ib:function(){throw new ze(70)}},Oe={},Ge=0;k(),Be=Array(4096),N(He,"/"),C("/tmp"),C("/home"),C("/home/web_user"),function(){if(C("/dev"),T(259,{read:function(){return 0},write:function(e,t,n,r){return r}}),I("/dev/null",259),p(1280,Ie),p(1536,Re),I("/dev/tty",1280),I("/dev/tty1",1536),"object"==typeof crypto&&"function"==typeof crypto.getRandomValues)var e=new Uint8Array(1),t=function(){return crypto.getRandomValues(e),e[0]};t||(t=function(){c("random_device")}),F("random",t),F("urandom",t),C("/dev/shm"),C("/dev/shm/tmp")}(),C("/proc"),C("/proc/self"),C("/proc/self/fd"),N({Eb:function(){var e=E("/proc/self","fd",16895,73);return e.xb={Kb:function(e,t){var n=ke[+t];if(!n)throw new ze(8);return(e={parent:null,Eb:{ac:"fake"},xb:{Lb:function(){return n.path}}}).parent=e}},e}},"/proc/self/fd");var $e={c:function(){},k:function(e,t){Ge=t;try{var n=D(),r=B(),a=B(),s=B(),_=B();return-9007199254740992>=(e=4294967296*r+(a>>>0))||9007199254740992<=e?-61:(L(n,e,_),Pe=[n.position>>>0,(Ee=n.position,1<=+le(Ee)?0<Ee?(0|de(+he(Ee/4294967296),4294967295))>>>0:~~+fe((Ee-+(~~Ee>>>0))/4294967296)>>>0:0)],se[s>>2]=Pe[0],se[s+4>>2]=Pe[1],n.Rb&&0===e&&0===_&&(n.Rb=null),0)}catch(e){return void 0!==Oe&&e instanceof ze||c(e),-e.Hb}},j:function(e,t){Ge=t;try{var n=D(),r=B();e:{var a=B();for(t=e=0;t<a;t++){var s=se[r+(8*t+4)>>2],_=n,o=se[r+8*t>>2],i=s,u=void 0,l=ne;if(0>i||0>u)throw new ze(28);if(null===_.Fb)throw new ze(8);if(1==(2097155&_.flags))throw new ze(8);if(16384==(61440&_.node.mode))throw new ze(31);if(!_.yb.read)throw new ze(28);var f=void 0!==u;if(f){if(!_.seekable)throw new ze(70)}else u=_.position;var h=_.yb.read(_,l,o,i,u);if(f||(_.position+=h),0>(_=h)){var d=-1;break e}if(e+=_,_<s)break}d=e}return d}catch(e){return void 0!==Oe&&e instanceof ze||c(e),-e.Hb}},e:function(e,t){Ge=t;try{var n=D();switch(B()){case 0:var r=B();return 0>r?-28:S(n.path,n.flags,0,r).Fb;case 1:case 2:return 0;case 3:return n.flags;case 4:return r=B(),n.flags|=r,0;case 12:return r=B(),ae[r+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return Y.___errno_location&&(se[Y.___errno_location()>>2]=28),-1;default:return-28}}catch(e){return void 0!==Oe&&e instanceof ze||c(e),-e.Hb}},i:function(e,t){Ge=t;try{var r=B();return S(r?n(re,r,void 0):"",B(),B()).Fb}catch(e){return void 0!==Oe&&e instanceof ze||c(e),-e.Hb}},h:function(e,t){Ge=t;try{var n=D(),r=B();switch(r){case 21509:case 21505:return n.Ab?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return n.Ab?0:-59;case 21519:if(!n.Ab)return-59;var a=B();return se[a>>2]=0;case 21520:return n.Ab?-28:-59;case 21531:if(e=B(),!n.yb.hc)throw new ze(59);return n.yb.hc(n,r,e);case 21523:case 21524:return n.Ab?0:-59;default:c("bad ioctl syscall "+r)}}catch(e){return void 0!==Oe&&e instanceof ze||c(e),-e.Hb}},b:function(){},d:function(){return M.apply(null,arguments)},g:function(){return z.apply(null,arguments)},__memory_base:1024,__table_base:0,o:function(){c()},n:U,m:function(e,t,n){re.set(re.subarray(t,t+n),e)},l:function(e){if(2147418112<e)return!1;for(var t=Math.max(U(),16777216);t<e;)t=536870912>=t?r(2*t):Math.min(r((3*t+2147483648)/4),2147418112);e:{try{Z.grow(t-te.byteLength+65535>>16),a(Z.buffer),e=1;break e}catch(e){}e=void 0}return!!e},f:function(e){var t=Date.now();return se[e>>2]=t/1e3|0,se[e+4>>2]=t%1e3*1e3|0,0},a:c,memory:Z,table:J},Ve=Y.asm({},$e,te);Y.asm=Ve,Y.___errno_location=function(){return Y.asm.p.apply(null,arguments)},Y._free=function(){return Y.asm.q.apply(null,arguments)};var We,Xe=Y._malloc=function(){return Y.asm.r.apply(null,arguments)};if(Y._vsc_buffer_bytes=function(){return Y.asm.s.apply(null,arguments)},Y._vsc_buffer_data=function(){return Y.asm.t.apply(null,arguments)},Y._vsc_buffer_delete=function(){return Y.asm.u.apply(null,arguments)},Y._vsc_buffer_len=function(){return Y.asm.v.apply(null,arguments)},Y._vsc_buffer_make_secure=function(){return Y.asm.w.apply(null,arguments)},Y._vsc_buffer_new=function(){return Y.asm.x.apply(null,arguments)},Y._vsc_buffer_new_with_capacity=function(){return Y.asm.y.apply(null,arguments)},Y._vsc_data=function(){return Y.asm.z.apply(null,arguments)},Y._vsc_data_bytes=function(){return Y.asm.A.apply(null,arguments)},Y._vsc_data_ctx_size=function(){return Y.asm.B.apply(null,arguments)},Y._vsc_data_len=function(){return Y.asm.C.apply(null,arguments)},Y._vsce_error_ctx_size=function(){return Y.asm.D.apply(null,arguments)},Y._vsce_error_reset=function(){return Y.asm.E.apply(null,arguments)},Y._vsce_error_status=function(){return Y.asm.F.apply(null,arguments)},Y._vsce_phe_cipher_auth_decrypt=function(){return Y.asm.G.apply(null,arguments)},Y._vsce_phe_cipher_auth_encrypt=function(){return Y.asm.H.apply(null,arguments)},Y._vsce_phe_cipher_decrypt=function(){return Y.asm.I.apply(null,arguments)},Y._vsce_phe_cipher_decrypt_len=function(){return Y.asm.J.apply(null,arguments)},Y._vsce_phe_cipher_delete=function(){return Y.asm.K.apply(null,arguments)},Y._vsce_phe_cipher_encrypt=function(){return Y.asm.L.apply(null,arguments)},Y._vsce_phe_cipher_encrypt_len=function(){return Y.asm.M.apply(null,arguments)},Y._vsce_phe_cipher_new=function(){return Y.asm.N.apply(null,arguments)},Y._vsce_phe_cipher_release_random=function(){return Y.asm.O.apply(null,arguments)},Y._vsce_phe_cipher_setup_defaults=function(){return Y.asm.P.apply(null,arguments)},Y._vsce_phe_cipher_shallow_copy=function(){return Y.asm.Q.apply(null,arguments)},Y._vsce_phe_cipher_use_random=function(){return Y.asm.R.apply(null,arguments)},Y._vsce_phe_client_check_response_and_decrypt=function(){return Y.asm.S.apply(null,arguments)},Y._vsce_phe_client_create_verify_password_request=function(){return Y.asm.T.apply(null,arguments)},Y._vsce_phe_client_delete=function(){return Y.asm.U.apply(null,arguments)},Y._vsce_phe_client_enroll_account=function(){return Y.asm.V.apply(null,arguments)},Y._vsce_phe_client_enrollment_record_len=function(){return Y.asm.W.apply(null,arguments)},Y._vsce_phe_client_generate_client_private_key=function(){return Y.asm.X.apply(null,arguments)},Y._vsce_phe_client_new=function(){return Y.asm.Y.apply(null,arguments)},Y._vsce_phe_client_release_operation_random=function(){return Y.asm.Z.apply(null,arguments)},Y._vsce_phe_client_release_random=function(){return Y.asm._.apply(null,arguments)},Y._vsce_phe_client_rotate_keys=function(){return Y.asm.$.apply(null,arguments)},Y._vsce_phe_client_set_keys=function(){return Y.asm.aa.apply(null,arguments)},Y._vsce_phe_client_setup_defaults=function(){return Y.asm.ba.apply(null,arguments)},Y._vsce_phe_client_shallow_copy=function(){return Y.asm.ca.apply(null,arguments)},Y._vsce_phe_client_update_enrollment_record=function(){return Y.asm.da.apply(null,arguments)},Y._vsce_phe_client_use_operation_random=function(){return Y.asm.ea.apply(null,arguments)},Y._vsce_phe_client_use_random=function(){return Y.asm.fa.apply(null,arguments)},Y._vsce_phe_client_verify_password_request_len=function(){return Y.asm.ga.apply(null,arguments)},Y._vsce_phe_server_delete=function(){return Y.asm.ha.apply(null,arguments)},Y._vsce_phe_server_enrollment_response_len=function(){return Y.asm.ia.apply(null,arguments)},Y._vsce_phe_server_generate_server_key_pair=function(){return Y.asm.ja.apply(null,arguments)},Y._vsce_phe_server_get_enrollment=function(){return Y.asm.ka.apply(null,arguments)},Y._vsce_phe_server_new=function(){return Y.asm.la.apply(null,arguments)},Y._vsce_phe_server_release_operation_random=function(){return Y.asm.ma.apply(null,arguments)},Y._vsce_phe_server_release_random=function(){return Y.asm.na.apply(null,arguments)},Y._vsce_phe_server_rotate_keys=function(){return Y.asm.oa.apply(null,arguments)},Y._vsce_phe_server_setup_defaults=function(){return Y.asm.pa.apply(null,arguments)},Y._vsce_phe_server_shallow_copy=function(){return Y.asm.qa.apply(null,arguments)},Y._vsce_phe_server_update_token_len=function(){return Y.asm.ra.apply(null,arguments)},Y._vsce_phe_server_use_operation_random=function(){return Y.asm.sa.apply(null,arguments)},Y._vsce_phe_server_use_random=function(){return Y.asm.ta.apply(null,arguments)},Y._vsce_phe_server_verify_password=function(){return Y.asm.ua.apply(null,arguments)},Y._vsce_phe_server_verify_password_response_len=function(){return Y.asm.va.apply(null,arguments)},Y._vscf_ctr_drbg_delete=function(){return Y.asm.wa.apply(null,arguments)},Y._vscf_ctr_drbg_enable_prediction_resistance=function(){return Y.asm.xa.apply(null,arguments)},Y._vscf_ctr_drbg_new=function(){return Y.asm.ya.apply(null,arguments)},Y._vscf_ctr_drbg_random=function(){return Y.asm.za.apply(null,arguments)},Y._vscf_ctr_drbg_release_entropy_source=function(){return Y.asm.Aa.apply(null,arguments)},Y._vscf_ctr_drbg_reseed=function(){return Y.asm.Ba.apply(null,arguments)},Y._vscf_ctr_drbg_set_entropy_len=function(){return Y.asm.Ca.apply(null,arguments)},Y._vscf_ctr_drbg_set_reseed_interval=function(){return Y.asm.Da.apply(null,arguments)},Y._vscf_ctr_drbg_setup_defaults=function(){return Y.asm.Ea.apply(null,arguments)},Y._vscf_ctr_drbg_shallow_copy=function(){return Y.asm.Fa.apply(null,arguments)},Y._vscf_ctr_drbg_use_entropy_source=function(){return Y.asm.Ga.apply(null,arguments)},Y._vscf_error_ctx_size=function(){return Y.asm.Ha.apply(null,arguments)},Y._vscf_error_reset=function(){return Y.asm.Ia.apply(null,arguments)},Y._vscf_error_status=function(){return Y.asm.Ja.apply(null,arguments)},Y._vscf_hkdf_alg_id=function(){return Y.asm.Ka.apply(null,arguments)},Y._vscf_hkdf_delete=function(){return Y.asm.La.apply(null,arguments)},Y._vscf_hkdf_derive=function(){return Y.asm.Ma.apply(null,arguments)},Y._vscf_hkdf_new=function(){return Y.asm.Na.apply(null,arguments)},Y._vscf_hkdf_produce_alg_info=function(){return Y.asm.Oa.apply(null,arguments)},Y._vscf_hkdf_release_hash=function(){return Y.asm.Pa.apply(null,arguments)},Y._vscf_hkdf_reset=function(){return Y.asm.Qa.apply(null,arguments)},Y._vscf_hkdf_restore_alg_info=function(){return Y.asm.Ra.apply(null,arguments)},Y._vscf_hkdf_set_info=function(){return Y.asm.Sa.apply(null,arguments)},Y._vscf_hkdf_shallow_copy=function(){return Y.asm.Ta.apply(null,arguments)},Y._vscf_hkdf_use_hash=function(){return Y.asm.Ua.apply(null,arguments)},Y._vscf_hmac_alg_id=function(){return Y.asm.Va.apply(null,arguments)},Y._vscf_hmac_delete=function(){return Y.asm.Wa.apply(null,arguments)},Y._vscf_hmac_digest_len=function(){return Y.asm.Xa.apply(null,arguments)},Y._vscf_hmac_finish=function(){return Y.asm.Ya.apply(null,arguments)},Y._vscf_hmac_mac=function(){return Y.asm.Za.apply(null,arguments)},Y._vscf_hmac_new=function(){return Y.asm._a.apply(null,arguments)},Y._vscf_hmac_produce_alg_info=function(){return Y.asm.$a.apply(null,arguments)},Y._vscf_hmac_release_hash=function(){return Y.asm.ab.apply(null,arguments)},Y._vscf_hmac_reset=function(){return Y.asm.bb.apply(null,arguments)},Y._vscf_hmac_restore_alg_info=function(){return Y.asm.cb.apply(null,arguments)},Y._vscf_hmac_shallow_copy=function(){return Y.asm.db.apply(null,arguments)},Y._vscf_hmac_start=function(){return Y.asm.eb.apply(null,arguments)},Y._vscf_hmac_update=function(){return Y.asm.fb.apply(null,arguments)},Y._vscf_hmac_use_hash=function(){return Y.asm.gb.apply(null,arguments)},Y._vscf_impl_api=function(){return Y.asm.hb.apply(null,arguments)},Y._vscf_impl_shallow_copy=function(){return Y.asm.ib.apply(null,arguments)},Y._vscf_impl_tag=function(){return Y.asm.jb.apply(null,arguments)},Y._vscf_sha512_alg_id=function(){return Y.asm.kb.apply(null,arguments)},Y._vscf_sha512_delete=function(){return Y.asm.lb.apply(null,arguments)},Y._vscf_sha512_finish=function(){return Y.asm.mb.apply(null,arguments)},Y._vscf_sha512_hash=function(){return Y.asm.nb.apply(null,arguments)},Y._vscf_sha512_new=function(){return Y.asm.ob.apply(null,arguments)},Y._vscf_sha512_produce_alg_info=function(){return Y.asm.pb.apply(null,arguments)},Y._vscf_sha512_restore_alg_info=function(){return Y.asm.qb.apply(null,arguments)},Y._vscf_sha512_shallow_copy=function(){return Y.asm.rb.apply(null,arguments)},Y._vscf_sha512_start=function(){return Y.asm.sb.apply(null,arguments)},Y._vscf_sha512_update=function(){return Y.asm.tb.apply(null,arguments)},Y.stackAlloc=function(){return Y.asm.vb.apply(null,arguments)},Y.dynCall_vi=function(){return Y.asm.ub.apply(null,arguments)},Y.asm=Ve,Y.then=function(e){if(We)e(Y);else{var t=Y.onRuntimeInitialized;Y.onRuntimeInitialized=function(){t&&t(),e(Y)}}return Y},be=function e(){We||K(),We||(be=e)},Y.run=K,Y.preInit)for("function"==typeof Y.preInit&&(Y.preInit=[Y.preInit]);0<Y.preInit.length;)Y.preInit.pop()();return K(),t}}(),n.exports=r,e=t.exports;function a(e,t){if(!("number"==typeof t||t instanceof Number))throw new TypeError(`'${e}' is not a number`);if(Number.isNaN(t))throw new TypeError(`'${e}' is NaN`);if(1/0===t)throw new TypeError(`'${e}' is Infinity`);if(-1/0===t)throw new TypeError(`'${e}' is -Infinity`)}function s(e,t){if(a(e,t),0==t)throw new TypeError(`'${e}' is NULL`)}var _={ensureNumber:a,ensureString:function(e,t){if(!("string"==typeof t||t instanceof String))throw new TypeError(`'${e}' is not a string`)},ensureBoolean:function(e,t){if("boolean"!=typeof t)throw new TypeError(`'${e}' is not a boolean`)},ensureByteArray:function(e,t){if(!(t instanceof Uint8Array))throw new TypeError(`'${e}' is not an Uint8Array`)},ensureClass:function(e,t,n){if(!(t instanceof n))throw new TypeError(`'${e}' is not an instance of the class ${n.name}`);s(e,t.ctxPtr)},ensureNotNull:s,ensureImplementInterface:function(e,t,n,r,a){if(s(e,t.ctxPtr),!a.isImplemented(t.ctxPtr,r))throw new TypeError(`'${e}' does not implement interface '${n}'`)}},c=(e,t)=>{class n{static get RESEED_INTERVAL(){return 1e4}get RESEED_INTERVAL(){return n.RESEED_INTERVAL}static get ENTROPY_LEN(){return 48}get ENTROPY_LEN(){return n.ENTROPY_LEN}constructor(t){this.name="CtrDrbg",this.ctxPtr=void 0===t?e._vscf_ctr_drbg_new():t}static newAndUseCContext(t){return new n(e._vscf_ctr_drbg_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vscf_ctr_drbg_delete(this.ctxPtr),this.ctxPtr=null)}set entropySource(n){_.ensureNotNull("this.ctxPtr",this.ctxPtr),_.ensureImplementInterface("entropySource",n,"Foundation.EntropySource",t.FoundationInterfaceTag.ENTROPY_SOURCE,t.FoundationInterface),e._vscf_ctr_drbg_release_entropy_source(this.ctxPtr),n=e._vscf_ctr_drbg_use_entropy_source(this.ctxPtr,n.ctxPtr),t.FoundationError.handleStatusCode(n)}random(n){_.ensureNotNull("this.ctxPtr",this.ctxPtr),_.ensureNumber("dataLen",n);const r=e._vsc_buffer_new_with_capacity(n);try{const a=e._vscf_ctr_drbg_random(this.ctxPtr,n,r);t.FoundationError.handleStatusCode(a);const s=e._vsc_buffer_bytes(r),_=e._vsc_buffer_len(r);return e.HEAPU8.slice(s,s+_)}finally{e._vsc_buffer_delete(r)}}reseed(){_.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=e._vscf_ctr_drbg_reseed(this.ctxPtr);t.FoundationError.handleStatusCode(n)}setupDefaults(){_.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=e._vscf_ctr_drbg_setup_defaults(this.ctxPtr);t.FoundationError.handleStatusCode(n)}enablePredictionResistance(){_.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_ctr_drbg_enable_prediction_resistance(this.ctxPtr)}setReseedInterval(t){_.ensureNotNull("this.ctxPtr",this.ctxPtr),_.ensureNumber("interval",t),e._vscf_ctr_drbg_set_reseed_interval(this.ctxPtr,t)}setEntropyLen(t){_.ensureNotNull("this.ctxPtr",this.ctxPtr),_.ensureNumber("len",t),e._vscf_ctr_drbg_set_entropy_len(this.ctxPtr,t)}}return n},o=(e,t)=>{class n{constructor(t){this.name="Hmac",this.ctxPtr=void 0===t?e._vscf_hmac_new():t}static newAndUseCContext(t){return new n(e._vscf_hmac_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vscf_hmac_delete(this.ctxPtr),this.ctxPtr=null)}set hash(n){_.ensureNotNull("this.ctxPtr",this.ctxPtr),_.ensureImplementInterface("hash",n,"Foundation.Hash",t.FoundationInterfaceTag.HASH,t.FoundationInterface),e._vscf_hmac_release_hash(this.ctxPtr),e._vscf_hmac_use_hash(this.ctxPtr,n.ctxPtr)}algId(){return _.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_hmac_alg_id(this.ctxPtr)}produceAlgInfo(){let n;return _.ensureNotNull("this.ctxPtr",this.ctxPtr),n=e._vscf_hmac_produce_alg_info(this.ctxPtr),t.FoundationInterface.newAndTakeCContext(n)}restoreAlgInfo(n){_.ensureNotNull("this.ctxPtr",this.ctxPtr),_.ensureImplementInterface("algInfo",n,"Foundation.AlgInfo",t.FoundationInterfaceTag.ALG_INFO,t.FoundationInterface),n=e._vscf_hmac_restore_alg_info(this.ctxPtr,n.ctxPtr),t.FoundationError.handleStatusCode(n)}digestLen(){return _.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_hmac_digest_len(this.ctxPtr)}mac(t,n){_.ensureNotNull("this.ctxPtr",this.ctxPtr),_.ensureByteArray("key",t),_.ensureByteArray("data",n);var r=t.length*t.BYTES_PER_ELEMENT;const a=e._malloc(r);e.HEAP8.set(t,a),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,a,r);var s=n.length*n.BYTES_PER_ELEMENT;r=e._malloc(s),e.HEAP8.set(n,r),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,r,s),s=this.digestLen(),s=e._vsc_buffer_new_with_capacity(s);try{e._vscf_hmac_mac(this.ctxPtr,t,n,s);const r=e._vsc_buffer_bytes(s),_=e._vsc_buffer_len(s);return e.HEAPU8.slice(r,r+_)}finally{e._free(a),e._free(t),e._free(r),e._free(n),e._vsc_buffer_delete(s)}}start(t){_.ensureNotNull("this.ctxPtr",this.ctxPtr),_.ensureByteArray("key",t);const n=t.length*t.BYTES_PER_ELEMENT,r=e._malloc(n);e.HEAP8.set(t,r),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,r,n);try{e._vscf_hmac_start(this.ctxPtr,t)}finally{e._free(r),e._free(t)}}update(t){_.ensureNotNull("this.ctxPtr",this.ctxPtr),_.ensureByteArray("data",t);const n=t.length*t.BYTES_PER_ELEMENT,r=e._malloc(n);e.HEAP8.set(t,r),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,r,n);try{e._vscf_hmac_update(this.ctxPtr,t)}finally{e._free(r),e._free(t)}}finish(){_.ensureNotNull("this.ctxPtr",this.ctxPtr);var t=this.digestLen();t=e._vsc_buffer_new_with_capacity(t);try{e._vscf_hmac_finish(this.ctxPtr,t);const n=e._vsc_buffer_bytes(t),r=e._vsc_buffer_len(t);return e.HEAPU8.slice(n,n+r)}finally{e._vsc_buffer_delete(t)}}reset(){_.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_hmac_reset(this.ctxPtr)}}return n},i=(e,t)=>{class n{constructor(t){this.name="Hkdf",this.ctxPtr=void 0===t?e._vscf_hkdf_new():t}static newAndUseCContext(t){return new n(e._vscf_hkdf_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vscf_hkdf_delete(this.ctxPtr),this.ctxPtr=null)}set hash(n){_.ensureNotNull("this.ctxPtr",this.ctxPtr),_.ensureImplementInterface("hash",n,"Foundation.Hash",t.FoundationInterfaceTag.HASH,t.FoundationInterface),e._vscf_hkdf_release_hash(this.ctxPtr),e._vscf_hkdf_use_hash(this.ctxPtr,n.ctxPtr)}algId(){return _.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_hkdf_alg_id(this.ctxPtr)}produceAlgInfo(){let n;return _.ensureNotNull("this.ctxPtr",this.ctxPtr),n=e._vscf_hkdf_produce_alg_info(this.ctxPtr),t.FoundationInterface.newAndTakeCContext(n)}restoreAlgInfo(n){_.ensureNotNull("this.ctxPtr",this.ctxPtr),_.ensureImplementInterface("algInfo",n,"Foundation.AlgInfo",t.FoundationInterfaceTag.ALG_INFO,t.FoundationInterface),n=e._vscf_hkdf_restore_alg_info(this.ctxPtr,n.ctxPtr),t.FoundationError.handleStatusCode(n)}derive(t,n){_.ensureNotNull("this.ctxPtr",this.ctxPtr),_.ensureByteArray("data",t),_.ensureNumber("keyLen",n);var r=t.length*t.BYTES_PER_ELEMENT;const a=e._malloc(r);e.HEAP8.set(t,a),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,a,r),r=e._vsc_buffer_new_with_capacity(n);try{e._vscf_hkdf_derive(this.ctxPtr,t,n,r);const a=e._vsc_buffer_bytes(r),s=e._vsc_buffer_len(r);return e.HEAPU8.slice(a,a+s)}finally{e._free(s),e._free(t),e._vsc_buffer_delete(r)}}reset(t,n){_.ensureNotNull("this.ctxPtr",this.ctxPtr),_.ensureByteArray("salt",t),_.ensureNumber("iterationCount",n);const r=t.length*t.BYTES_PER_ELEMENT,a=e._malloc(r);e.HEAP8.set(t,a),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,a,r);try{e._vscf_hkdf_reset(this.ctxPtr,t,n)}finally{e._free(a),e._free(t)}}setInfo(t){_.ensureNotNull("this.ctxPtr",this.ctxPtr),_.ensureByteArray("info",t);const n=t.length*t.BYTES_PER_ELEMENT,r=e._malloc(n);e.HEAP8.set(t,r),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,r,n);try{e._vscf_hkdf_set_info(this.ctxPtr,t)}finally{e._free(r),e._free(t)}}}return n},u=(e,t)=>{class n{static get DIGEST_LEN(){return 64}get DIGEST_LEN(){return n.DIGEST_LEN}static get BLOCK_LEN(){return 128}get BLOCK_LEN(){return n.BLOCK_LEN}constructor(t){this.name="Sha512",this.ctxPtr=void 0===t?e._vscf_sha512_new():t}static newAndUseCContext(t){return new n(e._vscf_sha512_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vscf_sha512_delete(this.ctxPtr),this.ctxPtr=null)}algId(){return _.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_sha512_alg_id(this.ctxPtr)}produceAlgInfo(){let n;return _.ensureNotNull("this.ctxPtr",this.ctxPtr),n=e._vscf_sha512_produce_alg_info(this.ctxPtr),t.FoundationInterface.newAndTakeCContext(n)}restoreAlgInfo(n){_.ensureNotNull("this.ctxPtr",this.ctxPtr),_.ensureImplementInterface("algInfo",n,"Foundation.AlgInfo",t.FoundationInterfaceTag.ALG_INFO,t.FoundationInterface),n=e._vscf_sha512_restore_alg_info(this.ctxPtr,n.ctxPtr),t.FoundationError.handleStatusCode(n)}hash(t){_.ensureByteArray("data",t);var n=t.length*t.BYTES_PER_ELEMENT;const r=e._malloc(n);e.HEAP8.set(t,r),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,r,n),n=e._vsc_buffer_new_with_capacity(this.DIGEST_LEN);try{e._vscf_sha512_hash(t,n);const r=e._vsc_buffer_bytes(n),a=e._vsc_buffer_len(n);return e.HEAPU8.slice(r,r+a)}finally{e._free(a),e._free(t),e._vsc_buffer_delete(n)}}start(){_.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vscf_sha512_start(this.ctxPtr)}update(t){_.ensureNotNull("this.ctxPtr",this.ctxPtr),_.ensureByteArray("data",t);const n=t.length*t.BYTES_PER_ELEMENT,r=e._malloc(n);e.HEAP8.set(t,r),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,r,n);try{e._vscf_sha512_update(this.ctxPtr,t)}finally{e._free(r),e._free(t)}}finish(){_.ensureNotNull("this.ctxPtr",this.ctxPtr);const t=e._vsc_buffer_new_with_capacity(this.DIGEST_LEN);try{e._vscf_sha512_finish(this.ctxPtr,t);const n=e._vsc_buffer_bytes(t),r=e._vsc_buffer_len(t);return e.HEAPU8.slice(n,n+r)}finally{e._vsc_buffer_delete(t)}}}return n},l=()=>{class e extends Error{constructor(e){super(e),this.name="PheError",this.message=e}static handleStatusCode(t){if(0!=t){if(-1==t)throw new e("Success proof check failed.");if(-2==t)throw new e("Failure proof check failed.");if(-3==t)throw new e("RNG returned error.");if(-4==t)throw new e("Protobuf decode failed.");if(-5==t)throw new e("Invalid public key.");if(-6==t)throw new e("Invalid private key.");if(-7==t)throw new e("AES error occurred.");throw new e("Unexpected status code:"+t)}}}return e};function f(e,t){if(!("number"==typeof t||t instanceof Number))throw new TypeError(`'${e}' is not a number`);if(Number.isNaN(t))throw new TypeError(`'${e}' is NaN`);if(1/0===t)throw new TypeError(`'${e}' is Infinity`);if(-1/0===t)throw new TypeError(`'${e}' is -Infinity`)}function h(e,t){if(f(e,t),0==t)throw new TypeError(`'${e}' is NULL`)}var d={ensureNumber:f,ensureString:function(e,t){if(!("string"==typeof t||t instanceof String))throw new TypeError(`'${e}' is not a string`)},ensureBoolean:function(e,t){if("boolean"!=typeof t)throw new TypeError(`'${e}' is not a boolean`)},ensureByteArray:function(e,t){if(!(t instanceof Uint8Array))throw new TypeError(`'${e}' is not an Uint8Array`)},ensureClass:function(e,t,n){if(!(t instanceof n))throw new TypeError(`'${e}' is not an instance of the class ${n.name}`);h(e,t.ctxPtr)},ensureNotNull:h,ensureImplementInterface:function(e,t,n,r,a){if(h(e,t.ctxPtr),!a.isImplemented(t.ctxPtr,r))throw new TypeError(`'${e}' does not implement interface '${n}'`)}},p=(e,t)=>{class n{constructor(t){this.name="PheServer",this.ctxPtr=void 0===t?e._vsce_phe_server_new():t}static newAndUseCContext(t){return new n(e._vsce_phe_server_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vsce_phe_server_delete(this.ctxPtr),this.ctxPtr=null)}set random(n){d.ensureNotNull("this.ctxPtr",this.ctxPtr),d.ensureImplementInterface("random",n,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_server_release_random(this.ctxPtr),e._vsce_phe_server_use_random(this.ctxPtr,n.ctxPtr)}set operationRandom(n){d.ensureNotNull("this.ctxPtr",this.ctxPtr),d.ensureImplementInterface("operationRandom",n,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_server_release_operation_random(this.ctxPtr),e._vsce_phe_server_use_operation_random(this.ctxPtr,n.ctxPtr)}setupDefaults(){d.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=e._vsce_phe_server_setup_defaults(this.ctxPtr);t.PheError.handleStatusCode(n)}generateServerKeyPair(){d.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PRIVATE_KEY_LENGTH),r=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PUBLIC_KEY_LENGTH);try{const a=e._vsce_phe_server_generate_server_key_pair(this.ctxPtr,n,r);t.PheError.handleStatusCode(a);const s=e._vsc_buffer_bytes(n),_=e._vsc_buffer_len(n),c=e.HEAPU8.slice(s,s+_),o=e._vsc_buffer_bytes(r),i=e._vsc_buffer_len(r);return{serverPrivateKey:c,serverPublicKey:e.HEAPU8.slice(o,o+i)}}finally{e._vsc_buffer_delete(n),e._vsc_buffer_delete(r)}}enrollmentResponseLen(){return d.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vsce_phe_server_enrollment_response_len(this.ctxPtr)}getEnrollment(n,r){d.ensureNotNull("this.ctxPtr",this.ctxPtr),d.ensureByteArray("serverPrivateKey",n),d.ensureByteArray("serverPublicKey",r);var a=n.length*n.BYTES_PER_ELEMENT;const s=e._malloc(a);e.HEAP8.set(n,s),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,s,a);var _=r.length*r.BYTES_PER_ELEMENT;a=e._malloc(_),e.HEAP8.set(r,a),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,a,_),_=this.enrollmentResponseLen(),_=e._vsc_buffer_new_with_capacity(_);try{const a=e._vsce_phe_server_get_enrollment(this.ctxPtr,n,r,_);t.PheError.handleStatusCode(a);const s=e._vsc_buffer_bytes(_),c=e._vsc_buffer_len(_);return e.HEAPU8.slice(s,s+c)}finally{e._free(s),e._free(n),e._free(a),e._free(r),e._vsc_buffer_delete(_)}}verifyPasswordResponseLen(){return d.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vsce_phe_server_verify_password_response_len(this.ctxPtr)}verifyPassword(n,r,a){d.ensureNotNull("this.ctxPtr",this.ctxPtr),d.ensureByteArray("serverPrivateKey",n),d.ensureByteArray("serverPublicKey",r),d.ensureByteArray("verifyPasswordRequest",a);var s=n.length*n.BYTES_PER_ELEMENT;const _=e._malloc(s);e.HEAP8.set(n,_),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,_,s);var c=r.length*r.BYTES_PER_ELEMENT;s=e._malloc(c),e.HEAP8.set(r,s),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,s,c);var o=a.length*a.BYTES_PER_ELEMENT;c=e._malloc(o),e.HEAP8.set(a,c),a=e._vsc_data_ctx_size(),a=e._malloc(a),e._vsc_data(a,c,o),o=this.verifyPasswordResponseLen(),o=e._vsc_buffer_new_with_capacity(o);try{const s=e._vsce_phe_server_verify_password(this.ctxPtr,n,r,a,o);t.PheError.handleStatusCode(s);const _=e._vsc_buffer_bytes(o),c=e._vsc_buffer_len(o);return e.HEAPU8.slice(_,_+c)}finally{e._free(s),e._free(n),e._free(_),e._free(r),e._free(c),e._free(a),e._vsc_buffer_delete(o)}}updateTokenLen(){return d.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vsce_phe_server_update_token_len(this.ctxPtr)}rotateKeys(n){d.ensureNotNull("this.ctxPtr",this.ctxPtr),d.ensureByteArray("serverPrivateKey",n);var r=n.length*n.BYTES_PER_ELEMENT;const a=e._malloc(r);e.HEAP8.set(n,a),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,a,r),r=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PRIVATE_KEY_LENGTH);const s=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PUBLIC_KEY_LENGTH);var _=this.updateTokenLen();_=e._vsc_buffer_new_with_capacity(_);try{const a=e._vsce_phe_server_rotate_keys(this.ctxPtr,n,r,s,_);t.PheError.handleStatusCode(a);const c=e._vsc_buffer_bytes(r),o=e._vsc_buffer_len(r),i=e.HEAPU8.slice(c,c+o),u=e._vsc_buffer_bytes(s),l=e._vsc_buffer_len(s),f=e.HEAPU8.slice(u,u+l),h=e._vsc_buffer_bytes(_),d=e._vsc_buffer_len(_);return{newServerPrivateKey:i,newServerPublicKey:f,updateToken:e.HEAPU8.slice(h,h+d)}}finally{e._free(a),e._free(n),e._vsc_buffer_delete(r),e._vsc_buffer_delete(s),e._vsc_buffer_delete(_)}}}return n},v=(e,t)=>{class n{constructor(t){this.name="PheClient",this.ctxPtr=void 0===t?e._vsce_phe_client_new():t}static newAndUseCContext(t){return new n(e._vsce_phe_client_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vsce_phe_client_delete(this.ctxPtr),this.ctxPtr=null)}set random(n){d.ensureNotNull("this.ctxPtr",this.ctxPtr),d.ensureImplementInterface("random",n,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_client_release_random(this.ctxPtr),e._vsce_phe_client_use_random(this.ctxPtr,n.ctxPtr)}set operationRandom(n){d.ensureNotNull("this.ctxPtr",this.ctxPtr),d.ensureImplementInterface("operationRandom",n,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_client_release_operation_random(this.ctxPtr),e._vsce_phe_client_use_operation_random(this.ctxPtr,n.ctxPtr)}setupDefaults(){d.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=e._vsce_phe_client_setup_defaults(this.ctxPtr);t.PheError.handleStatusCode(n)}setKeys(n,r){d.ensureNotNull("this.ctxPtr",this.ctxPtr),d.ensureByteArray("clientPrivateKey",n),d.ensureByteArray("serverPublicKey",r);var a=n.length*n.BYTES_PER_ELEMENT;const s=e._malloc(a);e.HEAP8.set(n,s),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,s,a),a=r.length*r.BYTES_PER_ELEMENT;const _=e._malloc(a);e.HEAP8.set(r,_),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,_,a);try{const a=e._vsce_phe_client_set_keys(this.ctxPtr,n,r);t.PheError.handleStatusCode(a)}finally{e._free(s),e._free(n),e._free(_),e._free(r)}}generateClientPrivateKey(){d.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PRIVATE_KEY_LENGTH);try{const r=e._vsce_phe_client_generate_client_private_key(this.ctxPtr,n);t.PheError.handleStatusCode(r);const a=e._vsc_buffer_bytes(n),s=e._vsc_buffer_len(n);return e.HEAPU8.slice(a,a+s)}finally{e._vsc_buffer_delete(n)}}enrollmentRecordLen(){return d.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vsce_phe_client_enrollment_record_len(this.ctxPtr)}enrollAccount(n,r){d.ensureNotNull("this.ctxPtr",this.ctxPtr),d.ensureByteArray("enrollmentResponse",n),d.ensureByteArray("password",r);var a=n.length*n.BYTES_PER_ELEMENT;const s=e._malloc(a);e.HEAP8.set(n,s),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,s,a);var _=r.length*r.BYTES_PER_ELEMENT;a=e._malloc(_),e.HEAP8.set(r,a),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,a,_),_=this.enrollmentRecordLen(),_=e._vsc_buffer_new_with_capacity(_);const c=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_ACCOUNT_KEY_LENGTH);try{const a=e._vsce_phe_client_enroll_account(this.ctxPtr,n,r,_,c);t.PheError.handleStatusCode(a);const s=e._vsc_buffer_bytes(_),o=e._vsc_buffer_len(_),i=e.HEAPU8.slice(s,s+o),u=e._vsc_buffer_bytes(c),l=e._vsc_buffer_len(c);return{enrollmentRecord:i,accountKey:e.HEAPU8.slice(u,u+l)}}finally{e._free(s),e._free(n),e._free(a),e._free(r),e._vsc_buffer_delete(_),e._vsc_buffer_delete(c)}}verifyPasswordRequestLen(){return d.ensureNotNull("this.ctxPtr",this.ctxPtr),e._vsce_phe_client_verify_password_request_len(this.ctxPtr)}createVerifyPasswordRequest(n,r){d.ensureNotNull("this.ctxPtr",this.ctxPtr),d.ensureByteArray("password",n),d.ensureByteArray("enrollmentRecord",r);var a=n.length*n.BYTES_PER_ELEMENT;const s=e._malloc(a);e.HEAP8.set(n,s),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,s,a);var _=r.length*r.BYTES_PER_ELEMENT;a=e._malloc(_),e.HEAP8.set(r,a),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,a,_),_=this.verifyPasswordRequestLen(),_=e._vsc_buffer_new_with_capacity(_);try{const a=e._vsce_phe_client_create_verify_password_request(this.ctxPtr,n,r,_);t.PheError.handleStatusCode(a);const s=e._vsc_buffer_bytes(_),c=e._vsc_buffer_len(_);return e.HEAPU8.slice(s,s+c)}finally{e._free(s),e._free(n),e._free(a),e._free(r),e._vsc_buffer_delete(_)}}checkResponseAndDecrypt(n,r,a){d.ensureNotNull("this.ctxPtr",this.ctxPtr),d.ensureByteArray("password",n),d.ensureByteArray("enrollmentRecord",r),d.ensureByteArray("verifyPasswordResponse",a);var s=n.length*n.BYTES_PER_ELEMENT;const _=e._malloc(s);e.HEAP8.set(n,_),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,_,s);var c=r.length*r.BYTES_PER_ELEMENT;s=e._malloc(c),e.HEAP8.set(r,s),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,s,c);var o=a.length*a.BYTES_PER_ELEMENT;c=e._malloc(o),e.HEAP8.set(a,c),a=e._vsc_data_ctx_size(),a=e._malloc(a),e._vsc_data(a,c,o),o=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_ACCOUNT_KEY_LENGTH);try{const s=e._vsce_phe_client_check_response_and_decrypt(this.ctxPtr,n,r,a,o);t.PheError.handleStatusCode(s);const _=e._vsc_buffer_bytes(o),c=e._vsc_buffer_len(o);return e.HEAPU8.slice(_,_+c)}finally{e._free(s),e._free(n),e._free(_),e._free(r),e._free(c),e._free(a),e._vsc_buffer_delete(o)}}rotateKeys(n){d.ensureNotNull("this.ctxPtr",this.ctxPtr),d.ensureByteArray("updateToken",n);var r=n.length*n.BYTES_PER_ELEMENT;const a=e._malloc(r);e.HEAP8.set(n,a),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,a,r),r=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PRIVATE_KEY_LENGTH);const s=e._vsc_buffer_new_with_capacity(t.PheCommon.PHE_PUBLIC_KEY_LENGTH);try{const a=e._vsce_phe_client_rotate_keys(this.ctxPtr,n,r,s);t.PheError.handleStatusCode(a);const _=e._vsc_buffer_bytes(r),c=e._vsc_buffer_len(r),o=e.HEAPU8.slice(_,_+c),i=e._vsc_buffer_bytes(s),u=e._vsc_buffer_len(s);return{newClientPrivateKey:o,newServerPublicKey:e.HEAPU8.slice(i,i+u)}}finally{e._free(a),e._free(n),e._vsc_buffer_delete(r),e._vsc_buffer_delete(s)}}updateEnrollmentRecord(n,r){d.ensureNotNull("this.ctxPtr",this.ctxPtr),d.ensureByteArray("enrollmentRecord",n),d.ensureByteArray("updateToken",r);var a=n.length*n.BYTES_PER_ELEMENT;const s=e._malloc(a);e.HEAP8.set(n,s),n=e._vsc_data_ctx_size(),n=e._malloc(n),e._vsc_data(n,s,a);var _=r.length*r.BYTES_PER_ELEMENT;a=e._malloc(_),e.HEAP8.set(r,a),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,a,_),_=this.enrollmentRecordLen(),_=e._vsc_buffer_new_with_capacity(_);try{const a=e._vsce_phe_client_update_enrollment_record(this.ctxPtr,n,r,_);t.PheError.handleStatusCode(a);const s=e._vsc_buffer_bytes(_),c=e._vsc_buffer_len(_);return e.HEAPU8.slice(s,s+c)}finally{e._free(s),e._free(n),e._free(a),e._free(r),e._vsc_buffer_delete(_)}}}return n},b=(e,t)=>{class n{constructor(t){this.name="PheCipher",this.ctxPtr=void 0===t?e._vsce_phe_cipher_new():t}static newAndUseCContext(t){return new n(e._vsce_phe_cipher_shallow_copy(t))}static newAndTakeCContext(e){return new n(e)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(e._vsce_phe_cipher_delete(this.ctxPtr),this.ctxPtr=null)}set random(n){d.ensureNotNull("this.ctxPtr",this.ctxPtr),d.ensureImplementInterface("random",n,"Foundation.Random",t.FoundationInterfaceTag.RANDOM,t.FoundationInterface),e._vsce_phe_cipher_release_random(this.ctxPtr),e._vsce_phe_cipher_use_random(this.ctxPtr,n.ctxPtr)}setupDefaults(){d.ensureNotNull("this.ctxPtr",this.ctxPtr);const n=e._vsce_phe_cipher_setup_defaults(this.ctxPtr);t.PheError.handleStatusCode(n)}encryptLen(t){return d.ensureNotNull("this.ctxPtr",this.ctxPtr),d.ensureNumber("plainTextLen",t),e._vsce_phe_cipher_encrypt_len(this.ctxPtr,t)}decryptLen(t){return d.ensureNotNull("this.ctxPtr",this.ctxPtr),d.ensureNumber("cipherTextLen",t),e._vsce_phe_cipher_decrypt_len(this.ctxPtr,t)}encrypt(n,r){d.ensureNotNull("this.ctxPtr",this.ctxPtr),d.ensureByteArray("plainText",n),d.ensureByteArray("accountKey",r);var a=n.length*n.BYTES_PER_ELEMENT;const s=e._malloc(a);e.HEAP8.set(n,s);var _=e._vsc_data_ctx_size();_=e._malloc(_),e._vsc_data(_,s,a);const c=r.length*r.BYTES_PER_ELEMENT;a=e._malloc(c),e.HEAP8.set(r,a),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,a,c),n=this.encryptLen(n.length),n=e._vsc_buffer_new_with_capacity(n);try{const a=e._vsce_phe_cipher_encrypt(this.ctxPtr,_,r,n);t.PheError.handleStatusCode(a);const s=e._vsc_buffer_bytes(n),c=e._vsc_buffer_len(n);return e.HEAPU8.slice(s,s+c)}finally{e._free(s),e._free(_),e._free(a),e._free(r),e._vsc_buffer_delete(n)}}decrypt(n,r){d.ensureNotNull("this.ctxPtr",this.ctxPtr),d.ensureByteArray("cipherText",n),d.ensureByteArray("accountKey",r);var a=n.length*n.BYTES_PER_ELEMENT;const s=e._malloc(a);e.HEAP8.set(n,s);var _=e._vsc_data_ctx_size();_=e._malloc(_),e._vsc_data(_,s,a);const c=r.length*r.BYTES_PER_ELEMENT;a=e._malloc(c),e.HEAP8.set(r,a),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,a,c),n=this.decryptLen(n.length),n=e._vsc_buffer_new_with_capacity(n);try{const a=e._vsce_phe_cipher_decrypt(this.ctxPtr,_,r,n);t.PheError.handleStatusCode(a);const s=e._vsc_buffer_bytes(n),c=e._vsc_buffer_len(n);return e.HEAPU8.slice(s,s+c)}finally{e._free(s),e._free(_),e._free(a),e._free(r),e._vsc_buffer_delete(n)}}authEncrypt(n,r,a){d.ensureNotNull("this.ctxPtr",this.ctxPtr),d.ensureByteArray("plainText",n),d.ensureByteArray("additionalData",r),d.ensureByteArray("accountKey",a);var s=n.length*n.BYTES_PER_ELEMENT;const _=e._malloc(s);e.HEAP8.set(n,_);var c=e._vsc_data_ctx_size();c=e._malloc(c),e._vsc_data(c,_,s);var o=r.length*r.BYTES_PER_ELEMENT;s=e._malloc(o),e.HEAP8.set(r,s),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,s,o);const i=a.length*a.BYTES_PER_ELEMENT;o=e._malloc(i),e.HEAP8.set(a,o),a=e._vsc_data_ctx_size(),a=e._malloc(a),e._vsc_data(a,o,i),n=this.encryptLen(n.length),n=e._vsc_buffer_new_with_capacity(n);try{const s=e._vsce_phe_cipher_auth_encrypt(this.ctxPtr,c,r,a,n);t.PheError.handleStatusCode(s);const _=e._vsc_buffer_bytes(n),o=e._vsc_buffer_len(n);return e.HEAPU8.slice(_,_+o)}finally{e._free(s),e._free(c),e._free(_),e._free(r),e._free(o),e._free(a),e._vsc_buffer_delete(n)}}authDecrypt(n,r,a){d.ensureNotNull("this.ctxPtr",this.ctxPtr),d.ensureByteArray("cipherText",n),d.ensureByteArray("additionalData",r),d.ensureByteArray("accountKey",a);var s=n.length*n.BYTES_PER_ELEMENT;const _=e._malloc(s);e.HEAP8.set(n,_);var c=e._vsc_data_ctx_size();c=e._malloc(c),e._vsc_data(c,_,s);var o=r.length*r.BYTES_PER_ELEMENT;s=e._malloc(o),e.HEAP8.set(r,s),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,s,o);const i=a.length*a.BYTES_PER_ELEMENT;o=e._malloc(i),e.HEAP8.set(a,o),a=e._vsc_data_ctx_size(),a=e._malloc(a),e._vsc_data(a,o,i),n=this.decryptLen(n.length),n=e._vsc_buffer_new_with_capacity(n);try{const s=e._vsce_phe_cipher_auth_decrypt(this.ctxPtr,c,r,a,n);t.PheError.handleStatusCode(s);const _=e._vsc_buffer_bytes(n),o=e._vsc_buffer_len(n);return e.HEAPU8.slice(_,_+o)}finally{e._free(_),e._free(c),e._free(s),e._free(r),e._free(o),e._free(a),e._vsc_buffer_delete(n)}}}return n};export default()=>{const t=new e;return new Promise((e,n)=>{t.onRuntimeInitialized=()=>{const n={};n.FoundationInterface=((e,t)=>{return class{static newAndTakeCContext(n){const r=e._vscf_impl_tag(n);switch(r){case t.FoundationImplTag.SHA224:return t.Sha224.newAndTakeCContext(n);case t.FoundationImplTag.SHA256:return t.Sha256.newAndTakeCContext(n);case t.FoundationImplTag.SHA384:return t.Sha384.newAndTakeCContext(n);case t.FoundationImplTag.SHA512:return t.Sha512.newAndTakeCContext(n);case t.FoundationImplTag.AES256_GCM:return t.Aes256Gcm.newAndTakeCContext(n);case t.FoundationImplTag.AES256_CBC:return t.Aes256Cbc.newAndTakeCContext(n);case t.FoundationImplTag.ASN1RD:return t.Asn1rd.newAndTakeCContext(n);case t.FoundationImplTag.ASN1WR:return t.Asn1wr.newAndTakeCContext(n);case t.FoundationImplTag.RSA_PUBLIC_KEY:return t.RsaPublicKey.newAndTakeCContext(n);case t.FoundationImplTag.RSA_PRIVATE_KEY:return t.RsaPrivateKey.newAndTakeCContext(n);case t.FoundationImplTag.RSA:return t.Rsa.newAndTakeCContext(n);case t.FoundationImplTag.ECC_PUBLIC_KEY:return t.EccPublicKey.newAndTakeCContext(n);case t.FoundationImplTag.ECC_PRIVATE_KEY:return t.EccPrivateKey.newAndTakeCContext(n);case t.FoundationImplTag.ECC:return t.Ecc.newAndTakeCContext(n);case t.FoundationImplTag.ENTROPY_ACCUMULATOR:return t.EntropyAccumulator.newAndTakeCContext(n);case t.FoundationImplTag.CTR_DRBG:return t.CtrDrbg.newAndTakeCContext(n);case t.FoundationImplTag.HMAC:return t.Hmac.newAndTakeCContext(n);case t.FoundationImplTag.HKDF:return t.Hkdf.newAndTakeCContext(n);case t.FoundationImplTag.KDF1:return t.Kdf1.newAndTakeCContext(n);case t.FoundationImplTag.KDF2:return t.Kdf2.newAndTakeCContext(n);case t.FoundationImplTag.FAKE_RANDOM:return t.FakeRandom.newAndTakeCContext(n);case t.FoundationImplTag.PKCS5_PBKDF2:return t.Pkcs5Pbkdf2.newAndTakeCContext(n);case t.FoundationImplTag.PKCS5_PBES2:return t.Pkcs5Pbes2.newAndTakeCContext(n);case t.FoundationImplTag.SEED_ENTROPY_SOURCE:return t.SeedEntropySource.newAndTakeCContext(n);case t.FoundationImplTag.KEY_MATERIAL_RNG:return t.KeyMaterialRng.newAndTakeCContext(n);case t.FoundationImplTag.RAW_PUBLIC_KEY:return t.RawPublicKey.newAndTakeCContext(n);case t.FoundationImplTag.RAW_PRIVATE_KEY:return t.RawPrivateKey.newAndTakeCContext(n);case t.FoundationImplTag.PKCS8_SERIALIZER:return t.Pkcs8Serializer.newAndTakeCContext(n);case t.FoundationImplTag.SEC1_SERIALIZER:return t.Sec1Serializer.newAndTakeCContext(n);case t.FoundationImplTag.KEY_ASN1_SERIALIZER:return t.KeyAsn1Serializer.newAndTakeCContext(n);case t.FoundationImplTag.KEY_ASN1_DESERIALIZER:return t.KeyAsn1Deserializer.newAndTakeCContext(n);case t.FoundationImplTag.ED25519:return t.Ed25519.newAndTakeCContext(n);case t.FoundationImplTag.CURVE25519:return t.Curve25519.newAndTakeCContext(n);case t.FoundationImplTag.SIMPLE_ALG_INFO:return t.SimpleAlgInfo.newAndTakeCContext(n);case t.FoundationImplTag.HASH_BASED_ALG_INFO:return t.HashBasedAlgInfo.newAndTakeCContext(n);case t.FoundationImplTag.CIPHER_ALG_INFO:return t.CipherAlgInfo.newAndTakeCContext(n);case t.FoundationImplTag.SALTED_KDF_ALG_INFO:return t.SaltedKdfAlgInfo.newAndTakeCContext(n);case t.FoundationImplTag.PBE_ALG_INFO:return t.PbeAlgInfo.newAndTakeCContext(n);case t.FoundationImplTag.ECC_ALG_INFO:return t.EccAlgInfo.newAndTakeCContext(n);case t.FoundationImplTag.ALG_INFO_DER_SERIALIZER:return t.AlgInfoDerSerializer.newAndTakeCContext(n);case t.FoundationImplTag.ALG_INFO_DER_DESERIALIZER:return t.AlgInfoDerDeserializer.newAndTakeCContext(n);case t.FoundationImplTag.MESSAGE_INFO_DER_SERIALIZER:return t.MessageInfoDerSerializer.newAndTakeCContext(n);default:throw Error("Unexpected implementation tag found: "+r)}}static newAndUseCContext(n){return new t.FoundationInterface.newAndTakeCContext(e._vscf_impl_shallow_copy(n))}static isImplemented(t,n){return 0!=e._vscf_impl_api(t,n)}}})(t,n),n.CtrDrbg=c(t,n),n.Hmac=o(t,n),n.Hkdf=i(t,n),n.Sha512=u(t,n),n.PheError=l(),n.PheCommon=(()=>{class e{static get PHE_POINT_LENGTH(){return 65}get PHE_POINT_LENGTH(){return e.PHE_POINT_LENGTH}static get PHE_MAX_PASSWORD_LENGTH(){return 128}get PHE_MAX_PASSWORD_LENGTH(){return e.PHE_MAX_PASSWORD_LENGTH}static get PHE_SERVER_IDENTIFIER_LENGTH(){return 32}get PHE_SERVER_IDENTIFIER_LENGTH(){return e.PHE_SERVER_IDENTIFIER_LENGTH}static get PHE_CLIENT_IDENTIFIER_LENGTH(){return 32}get PHE_CLIENT_IDENTIFIER_LENGTH(){return e.PHE_CLIENT_IDENTIFIER_LENGTH}static get PHE_ACCOUNT_KEY_LENGTH(){return 32}get PHE_ACCOUNT_KEY_LENGTH(){return e.PHE_ACCOUNT_KEY_LENGTH}static get PHE_PRIVATE_KEY_LENGTH(){return 32}get PHE_PRIVATE_KEY_LENGTH(){return e.PHE_PRIVATE_KEY_LENGTH}static get PHE_PUBLIC_KEY_LENGTH(){return 65}get PHE_PUBLIC_KEY_LENGTH(){return e.PHE_PUBLIC_KEY_LENGTH}static get PHE_HASH_LEN(){return 32}get PHE_HASH_LEN(){return e.PHE_HASH_LEN}static get PHE_MAX_ENCRYPT_LEN(){return 1048512}get PHE_MAX_ENCRYPT_LEN(){return e.PHE_MAX_ENCRYPT_LEN}static get PHE_MAX_DECRYPT_LEN(){return 1048576}get PHE_MAX_DECRYPT_LEN(){return e.PHE_MAX_DECRYPT_LEN}static get PHE_MAX_AUTH_LEN(){return 1024}get PHE_MAX_AUTH_LEN(){return e.PHE_MAX_AUTH_LEN}}return e})(),n.PheServer=p(t,n),n.PheClient=v(t,n),n.PheCipher=b(t,n),e(n)},t.onAbort=e=>{n(Error(e))}})};
