"use strict";function createCommonjsModule(e,n){return e(n={exports:{}},n.exports),n.exports}var libpythia_worker=createCommonjsModule(function(e,n){n=function(){var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return function(n){function t(e,n,t){var r=n+t;for(t=n;e[t]&&!(t>=r);)++t;if(16<t-n&&e.subarray&&ne)return ne.decode(e.subarray(n,t));for(r="";n<t;){var a=e[n++];if(128&a){var o=63&e[n++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[n++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[n++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function r(e){for(;0<e.length;){var n=e.shift();if("function"==typeof n)n();else{var t=n.Mb;"number"==typeof t?void 0===n.jb?W.dynCall_v(t):W.dynCall_vi(t,n.jb):t(void 0===n.jb?null:n.jb)}}}function a(){var e=W.preRun.shift();ue.unshift(e)}function o(){var e=be;return String.prototype.startsWith?e.startsWith("data:application/octet-stream;base64,"):0===e.indexOf("data:application/octet-stream;base64,")}function i(){try{if(W.wasmBinary)return new Uint8Array(W.wasmBinary);if(K)return K(be);throw"both async and sync fetching of the wasm failed"}catch(e){D(e)}}function s(e){function n(e){W.asm=e.exports,he--,W.monitorRunDependencies&&W.monitorRunDependencies(he),0==he&&(null!==me&&(clearInterval(me),me=null),ve&&(e=ve,ve=null,e()))}function t(e){n(e.instance)}function r(e){return(W.wasmBinary||"function"!=typeof fetch?new Promise(function(e){e(i())}):fetch(be,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+be+"'";return e.arrayBuffer()}).catch(function(){return i()})).then(function(e){return WebAssembly.instantiate(e,a)}).then(e,function(e){Z("failed to asynchronously prepare wasm: "+e),D(e)})}var a={env:e,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:q};if(he++,W.monitorRunDependencies&&W.monitorRunDependencies(he),W.instantiateWasm)try{return W.instantiateWasm(a,n)}catch(e){return Z("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(W.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||o()||"function"!=typeof fetch)return r(t);fetch(be,{credentials:"same-origin"}).then(function(e){return WebAssembly.instantiateStreaming(e,a).then(t,function(e){Z("wasm streaming compile failed: "+e),Z("falling back to ArrayBuffer instantiation"),r(t)})})}(),{}}function u(e,n){for(var t=0,r=e.length-1;0<=r;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),t++):t&&(e.splice(r,1),t--)}if(n)for(;t;t--)e.unshift("..");return e}function c(e){var n="/"===e.charAt(0),t="/"===e.substr(-1);return(e=u(e.split("/").filter(function(e){return!!e}),!n).join("/"))||n||(e="."),e&&t&&(e+="/"),(n?"/":"")+e}function f(e){var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=n[0],n=n[1],e||n?(n&&(n=n.substr(0,n.length-1)),e+n):"."}function l(e){if("/"===e)return"/";var n=e.lastIndexOf("/");return-1===n?e:e.substr(n+1)}function _(e){return W.___errno_location&&(ie[W.___errno_location()>>2]=e),e}function d(){for(var e="",n=!1,t=arguments.length-1;-1<=t&&!n;t--){if("string"!=typeof(n=0<=t?arguments[t]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,n="/"===n.charAt(0)}return(n?"/":"")+(e=u(e.split("/").filter(function(e){return!!e}),!n).join("/"))||"."}function p(e,n){Re[e]={input:[],Ta:[],ab:n},A(e,xe)}function y(e,n){if(n=n||{},!(e=d("/",e)))return{path:"",node:null};var t,r={rb:!0,mb:0};for(t in r)void 0===n[t]&&(n[t]=r[t]);if(8<n.mb)throw new Ye(40);e=u(e.split("/").filter(function(e){return!!e}),!1);var a=Le;for(r="/",t=0;t<e.length;t++){var o=t===e.length-1;if(o&&n.parent)break;if(a=v(a,e[t]),r=c(r+"/"+e[t]),a.gb&&(!o||o&&n.rb)&&(a=a.gb.root),!o||n.qb)for(o=0;40960==(61440&a.mode);)if(a=O(r),a=y(r=d(f(r),a),{mb:n.mb}).node,40<o++)throw new Ye(40)}return{path:r,node:a}}function h(e){for(var n;;){if(e===e.parent)return e=e.Wa.ub,n?"/"!==e[e.length-1]?e+"/"+n:e+n:e;n=n?e.name+"/"+n:e.name,e=e.parent}}function m(e,n){for(var t=0,r=0;r<n.length;r++)t=(t<<5)-t+n.charCodeAt(r)|0;return(e+t>>>0)%He.length}function v(e,n){var t;if(t=(t=E(e,"x"))?t:e.Pa.cb?0:13)throw new Ye(t,e);for(t=He[m(e.id,n)];t;t=t.Db){var r=t.name;if(t.parent.id===e.id&&r===n)return t}return e.Pa.cb(e,n)}function b(e,n,t,r){return Te||((Te=function(e,n,t,r){e||(e=this),this.parent=e,this.Wa=e.Wa,this.gb=null,this.id=Ue++,this.name=n,this.mode=t,this.Pa={},this.Qa={},this.hb=r}).prototype={},Object.defineProperties(Te.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}}})),function(e){var n=m(e.parent.id,e.name);e.Db=He[n],He[n]=e}(e=new Te(e,n,t,r)),e}function w(e){var n=["r","w","rw"][3&e];return 512&e&&(n+="w"),n}function E(e,n){return ze?0:(-1===n.indexOf("r")||292&e.mode)&&(-1===n.indexOf("w")||146&e.mode)&&(-1===n.indexOf("x")||73&e.mode)?0:13}function P(e,n){try{return v(e,n),17}catch(e){}return E(e,"wx")}function g(e,n){Se||((Se=function(){}).prototype={},Object.defineProperties(Se.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}}}));var t,r=new Se;for(t in e)r[t]=e[t];return e=r,n=function(e){for(e=e||0;4096>=e;e++)if(!Me[e])return e;throw new Ye(24)}(n),e.Ya=n,Me[n]=e}function A(e,n){Ce[e]={Qa:n}}function T(e,n){var t="/"===n,r=!n;if(t&&Le)throw new Ye(16);if(!t&&!r){var a=y(n,{rb:!1});if(n=a.path,(a=a.node).gb)throw new Ye(16);if(16384!=(61440&a.mode))throw new Ye(20)}n={type:e,Tb:{},ub:n,Cb:[]},(e=e.Wa(n)).Wa=n,n.root=e,t?Le=e:a&&(a.gb=n,a.Wa&&a.Wa.Cb.push(n))}function S(e,n,t){var r=y(e,{parent:!0}).node;if(!(e=l(e))||"."===e||".."===e)throw new Ye(22);var a=P(r,e);if(a)throw new Ye(a);if(!r.Pa.fb)throw new Ye(1);return r.Pa.fb(r,e,n,t)}function B(e){S(e,16895,0)}function R(e,n,t){void 0===t&&(t=n,n=438),S(e,8192|n,t)}function x(e,n){if(!d(e))throw new Ye(2);var t=y(n,{parent:!0}).node;if(!t)throw new Ye(2);var r=P(t,n=l(n));if(r)throw new Ye(r);if(!t.Pa.ib)throw new Ye(1);t.Pa.ib(t,n,e)}function O(e){if(!(e=y(e).node))throw new Ye(2);if(!e.Pa.eb)throw new Ye(22);return d(h(e.parent),e.Pa.eb(e))}function k(e,n,t,r){if(""===e)throw new Ye(2);if("string"==typeof n){var a=je[n];if(void 0===a)throw Error("Unknown file open mode: "+n);n=a}if(t=64&n?4095&(void 0===t?438:t)|32768:0,"object"==typeof e)var o=e;else{e=c(e);try{o=y(e,{qb:!(131072&n)}).node}catch(e){}}if(a=!1,64&n)if(o){if(128&n)throw new Ye(17)}else o=S(e,t,0),a=!0;if(!o)throw new Ye(2);if(8192==(61440&o.mode)&&(n&=-513),65536&n&&16384!=(61440&o.mode))throw new Ye(20);if(!a&&(t=o?40960==(61440&o.mode)?40:16384==(61440&o.mode)&&("r"!==w(n)||512&n)?21:E(o,w(n)):2))throw new Ye(t);if(512&n){var i;if(!(i="string"==typeof(t=o)?y(t,{qb:!0}).node:t).Pa.Va)throw new Ye(1);if(16384==(61440&i.mode))throw new Ye(21);if(32768!=(61440&i.mode))throw new Ye(22);if(t=E(i,"w"))throw new Ye(t);i.Pa.Va(i,{size:0,timestamp:Date.now()})}n&=-641,(r=g({node:o,path:h(o),flags:n,seekable:!0,position:0,Qa:o.Qa,Gb:[],error:!1},r)).Qa.open&&r.Qa.open(r),!W.logReadFiles||1&n||(Be||(Be={}),e in Be||(Be[e]=1,console.log("FS.trackingDelegate error on read file: "+e)));try{Ie.onOpenFile&&(o=0,1!=(2097155&n)&&(o|=1),0!=(2097155&n)&&(o|=2),Ie.onOpenFile(e,o))}catch(n){console.log("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+n.message)}return r}function N(e,n,t){if(null===e.Ya)throw new Ye(9);if(!e.seekable||!e.Qa.$a)throw new Ye(29);if(0!=t&&1!=t&&2!=t)throw new Ye(22);e.position=e.Qa.$a(e,n,t),e.Gb=[]}function L(e,n,t,r){if(0>t||0>r)throw new Ye(22);if(null===e.Ya)throw new Ye(9);if(1==(2097155&e.flags))throw new Ye(9);if(16384==(61440&e.node.mode))throw new Ye(21);if(!e.Qa.read)throw new Ye(22);var a=void 0!==r;if(a){if(!e.seekable)throw new Ye(29)}else r=e.position;return n=e.Qa.read(e,re,n,t,r),a||(e.position+=n),n}function C(){Ye||((Ye=function(e,n){this.node=n,this.Fb=function(e){this.Xa=e},this.Fb(e),this.message="FS error",this.stack&&Object.defineProperty(this,"stack",{value:Error().stack,writable:!0})}).prototype=Error(),Ye.prototype.constructor=Ye,[2].forEach(function(e){Qe[e]=new Ye(e),Qe[e].stack="<generic error, no stack>"}))}function M(e,n,t){e=c("/dev/"+e);var r=function(e,n){var t=0;return e&&(t|=365),n&&(t|=146),t}(!!n,!!t);Ae||(Ae=64);var a=Ae++<<8|0;A(a,{open:function(e){e.seekable=!1},close:function(){t&&t.buffer&&t.buffer.length&&t(10)},read:function(e,t,r,a){for(var o=0,i=0;i<a;i++){try{var s=n()}catch(e){throw new Ye(5)}if(void 0===s&&0===o)throw new Ye(11);if(null==s)break;o++,t[r+i]=s}return o&&(e.node.timestamp=Date.now()),o},write:function(e,n,r,a){for(var o=0;o<a;o++)try{t(n[r+o])}catch(e){throw new Ye(5)}return a&&(e.node.timestamp=Date.now()),o}}),R(e,r,a)}function U(){return ie[(Fe+=4)-4>>2]}function H(){var e=Me[U()];if(!e)throw new Ye(9);return e}function z(e,n){throw Ke(e,n||1),"longjmp"}function I(){return I.bb||(I.bb=[]),I.bb.push(Ze()),I.bb.length-1}function Y(){D("OOM")}function Q(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function j(){function e(){if(!W.calledRun&&(W.calledRun=!0,!ee)){if(W.noFSInit||ge||(ge=!0,C(),W.stdin=W.stdin,W.stdout=W.stdout,W.stderr=W.stderr,W.stdin?M("stdin",W.stdin):x("/dev/tty","/dev/stdin"),W.stdout?M("stdout",null,W.stdout):x("/dev/tty","/dev/stdout"),W.stderr?M("stderr",null,W.stderr):x("/dev/tty1","/dev/stderr"),k("/dev/stdin","r"),k("/dev/stdout","w"),k("/dev/stderr","w")),r(ce),ze=!1,r(fe),W.onRuntimeInitialized&&W.onRuntimeInitialized(),W.postRun)for("function"==typeof W.postRun&&(W.postRun=[W.postRun]);W.postRun.length;){var e=W.postRun.shift();le.unshift(e)}r(le)}}if(!(0<he)){if(W.preRun)for("function"==typeof W.preRun&&(W.preRun=[W.preRun]);W.preRun.length;)a();r(ue),0<he||W.calledRun||(W.setStatus?(W.setStatus("Running..."),setTimeout(function(){setTimeout(function(){W.setStatus("")},1),e()},1)):e())}}function D(e){throw W.onAbort&&W.onAbort(e),X(e),Z(e),ee=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}var W;n=n||{},W||(W=void 0!==n?n:{});var F,$={};for(F in W)W.hasOwnProperty(F)&&($[F]=W[F]);W.arguments=[],W.thisProgram="./this.program",W.quit=function(e,n){throw n},W.preRun=[],W.postRun=[];var V="";V=self.location.href,e&&(V=e),V=0!==V.indexOf("blob:")?V.substr(0,V.lastIndexOf("/")+1):"";var K=function(e){var n=new XMLHttpRequest;return n.open("GET",e,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)},X=W.print||("undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null),Z=W.printErr||("undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||X);for(F in $)$.hasOwnProperty(F)&&(W[F]=$[F]);$=void 0;var q={"f64-rem":function(e,n){return e%n},debugger:function(){}},G=0;"object"!=typeof WebAssembly&&Z("no native wasm support detected");var J,ee=!1,ne="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var te,re,ae,oe,ie,se=W.TOTAL_MEMORY||16777216;5242880>se&&Z("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+se+"! (TOTAL_STACK=5242880)"),(J=W.wasmMemory?W.wasmMemory:new WebAssembly.Memory({initial:se/65536,maximum:se/65536}))&&(te=J.buffer),se=te.byteLength,W.HEAP8=re=new Int8Array(te),W.HEAP16=oe=new Int16Array(te),W.HEAP32=ie=new Int32Array(te),W.HEAPU8=ae=new Uint8Array(te),W.HEAPU16=new Uint16Array(te),W.HEAPU32=new Uint32Array(te),W.HEAPF32=new Float32Array(te),W.HEAPF64=new Float64Array(te),ie[15716]=5305776;var ue=[],ce=[],fe=[],le=[],_e=Math.abs,de=Math.ceil,pe=Math.floor,ye=Math.min,he=0,me=null,ve=null;W.preloadedImages={},W.preloadedAudios={};var be="libpythia.worker.wasm";if(!o()){var we=be;be=W.locateFile?W.locateFile(we,V):V+we}W.asm=function(e,n){return n.memory=J,n.table=new WebAssembly.Table({initial:460,maximum:460,element:"anyfunc"}),n.__memory_base=1024,n.__table_base=0,s(n)};var Ee,Pe,ge,Ae,Te,Se,Be,Re=[],xe={open:function(e){var n=Re[e.node.hb];if(!n)throw new Ye(19);e.Sa=n,e.seekable=!1},close:function(e){e.Sa.ab.flush(e.Sa)},flush:function(e){e.Sa.ab.flush(e.Sa)},read:function(e,n,t,r){if(!e.Sa||!e.Sa.ab.sb)throw new Ye(6);for(var a=0,o=0;o<r;o++){try{var i=e.Sa.ab.sb(e.Sa)}catch(e){throw new Ye(5)}if(void 0===i&&0===a)throw new Ye(11);if(null==i)break;a++,n[t+o]=i}return a&&(e.node.timestamp=Date.now()),a},write:function(e,n,t,r){if(!e.Sa||!e.Sa.ab.lb)throw new Ye(6);try{for(var a=0;a<r;a++)e.Sa.ab.lb(e.Sa,n[t+a])}catch(e){throw new Ye(5)}return r&&(e.node.timestamp=Date.now()),a}},Oe={sb:function(e){if(!e.input.length){var n=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(n=window.prompt("Input: "))&&(n+="\n"):"function"==typeof readline&&(null!==(n=readline())&&(n+="\n")),!n)return null;for(var t=0,r=0;r<n.length;++r){var a=n.charCodeAt(r);55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&n.charCodeAt(++r)),127>=a?++t:t=2047>=a?t+2:65535>=a?t+3:t+4}var o=(t=Array(t+1)).length;if(r=0,0<o){a=r,o=r+o-1;for(var i=0;i<n.length;++i){var s=n.charCodeAt(i);if(55296<=s&&57343>=s)s=65536+((1023&s)<<10)|1023&n.charCodeAt(++i);if(127>=s){if(r>=o)break;t[r++]=s}else{if(2047>=s){if(r+1>=o)break;t[r++]=192|s>>6}else{if(65535>=s){if(r+2>=o)break;t[r++]=224|s>>12}else{if(r+3>=o)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63}t[r++]=128|s>>6&63}t[r++]=128|63&s}}t[r]=0,n=r-a}else n=0;t.length=n,e.input=t}return e.input.shift()},lb:function(e,n){null===n||10===n?(X(t(e.Ta,0)),e.Ta=[]):0!=n&&e.Ta.push(n)},flush:function(e){e.Ta&&0<e.Ta.length&&(X(t(e.Ta,0)),e.Ta=[])}},ke={lb:function(e,n){null===n||10===n?(Z(t(e.Ta,0)),e.Ta=[]):0!=n&&e.Ta.push(n)},flush:function(e){e.Ta&&0<e.Ta.length&&(Z(t(e.Ta,0)),e.Ta=[])}},Ne={Ua:null,Wa:function(){return Ne.createNode(null,"/",16895,0)},createNode:function(e,n,t,r){if(24576==(61440&t)||4096==(61440&t))throw new Ye(1);return Ne.Ua||(Ne.Ua={dir:{node:{Za:Ne.Pa.Za,Va:Ne.Pa.Va,cb:Ne.Pa.cb,fb:Ne.Pa.fb,xb:Ne.Pa.xb,zb:Ne.Pa.zb,yb:Ne.Pa.yb,wb:Ne.Pa.wb,ib:Ne.Pa.ib},stream:{$a:Ne.Qa.$a}},file:{node:{Za:Ne.Pa.Za,Va:Ne.Pa.Va},stream:{$a:Ne.Qa.$a,read:Ne.Qa.read,write:Ne.Qa.write,nb:Ne.Qa.nb,tb:Ne.Qa.tb,vb:Ne.Qa.vb}},link:{node:{Za:Ne.Pa.Za,Va:Ne.Pa.Va,eb:Ne.Pa.eb},stream:{}},ob:{node:{Za:Ne.Pa.Za,Va:Ne.Pa.Va},stream:De}}),16384==(61440&(t=b(e,n,t,r)).mode)?(t.Pa=Ne.Ua.dir.node,t.Qa=Ne.Ua.dir.stream,t.Oa={}):32768==(61440&t.mode)?(t.Pa=Ne.Ua.file.node,t.Qa=Ne.Ua.file.stream,t.Ra=0,t.Oa=null):40960==(61440&t.mode)?(t.Pa=Ne.Ua.link.node,t.Qa=Ne.Ua.link.stream):8192==(61440&t.mode)&&(t.Pa=Ne.Ua.ob.node,t.Qa=Ne.Ua.ob.stream),t.timestamp=Date.now(),e&&(e.Oa[n]=t),t},Nb:function(e){if(e.Oa&&e.Oa.subarray){for(var n=[],t=0;t<e.Ra;++t)n.push(e.Oa[t]);return n}return e.Oa},Ob:function(e){return e.Oa?e.Oa.subarray?e.Oa.subarray(0,e.Ra):new Uint8Array(e.Oa):new Uint8Array},pb:function(e,n){var t=e.Oa?e.Oa.length:0;t>=n||(n=Math.max(n,t*(1048576>t?2:1.125)|0),0!=t&&(n=Math.max(n,256)),t=e.Oa,e.Oa=new Uint8Array(n),0<e.Ra&&e.Oa.set(t.subarray(0,e.Ra),0))},Eb:function(e,n){if(e.Ra!=n)if(0==n)e.Oa=null,e.Ra=0;else{if(!e.Oa||e.Oa.subarray){var t=e.Oa;e.Oa=new Uint8Array(new ArrayBuffer(n)),t&&e.Oa.set(t.subarray(0,Math.min(n,e.Ra)))}else if(e.Oa||(e.Oa=[]),e.Oa.length>n)e.Oa.length=n;else for(;e.Oa.length<n;)e.Oa.push(0);e.Ra=n}},Pa:{Za:function(e){var n={};return n.Lb=8192==(61440&e.mode)?e.id:1,n.Qb=e.id,n.mode=e.mode,n.Sb=1,n.uid=0,n.Pb=0,n.hb=e.hb,16384==(61440&e.mode)?n.size=4096:32768==(61440&e.mode)?n.size=e.Ra:40960==(61440&e.mode)?n.size=e.link.length:n.size=0,n.Ib=new Date(e.timestamp),n.Rb=new Date(e.timestamp),n.Kb=new Date(e.timestamp),n.Ab=4096,n.Jb=Math.ceil(n.size/n.Ab),n},Va:function(e,n){void 0!==n.mode&&(e.mode=n.mode),void 0!==n.timestamp&&(e.timestamp=n.timestamp),void 0!==n.size&&Ne.Eb(e,n.size)},cb:function(){throw Qe[2]},fb:function(e,n,t,r){return Ne.createNode(e,n,t,r)},xb:function(e,n,t){if(16384==(61440&e.mode)){try{var r=v(n,t)}catch(e){}if(r)for(var a in r.Oa)throw new Ye(39)}delete e.parent.Oa[e.name],e.name=t,n.Oa[t]=e,e.parent=n},zb:function(e,n){delete e.Oa[n]},yb:function(e,n){var t,r=v(e,n);for(t in r.Oa)throw new Ye(39);delete e.Oa[n]},wb:function(e){var n,t=[".",".."];for(n in e.Oa)e.Oa.hasOwnProperty(n)&&t.push(n);return t},ib:function(e,n,t){return(e=Ne.createNode(e,n,41471,0)).link=t,e},eb:function(e){if(40960!=(61440&e.mode))throw new Ye(22);return e.link}},Qa:{read:function(e,n,t,r,a){var o=e.node.Oa;if(a>=e.node.Ra)return 0;if(8<(e=Math.min(e.node.Ra-a,r))&&o.subarray)n.set(o.subarray(a,a+e),t);else for(r=0;r<e;r++)n[t+r]=o[a+r];return e},write:function(e,n,t,r,a,o){if(!r)return 0;if((e=e.node).timestamp=Date.now(),n.subarray&&(!e.Oa||e.Oa.subarray)){if(o)return e.Oa=n.subarray(t,t+r),e.Ra=r;if(0===e.Ra&&0===a)return e.Oa=new Uint8Array(n.subarray(t,t+r)),e.Ra=r;if(a+r<=e.Ra)return e.Oa.set(n.subarray(t,t+r),a),r}if(Ne.pb(e,a+r),e.Oa.subarray&&n.subarray)e.Oa.set(n.subarray(t,t+r),a);else for(o=0;o<r;o++)e.Oa[a+o]=n[t+o];return e.Ra=Math.max(e.Ra,a+r),r},$a:function(e,n,t){if(1===t?n+=e.position:2===t&&32768==(61440&e.node.mode)&&(n+=e.node.Ra),0>n)throw new Ye(22);return n},nb:function(e,n,t){Ne.pb(e.node,n+t),e.node.Ra=Math.max(e.node.Ra,n+t)},tb:function(e,n,t,r,a,o,i){if(32768!=(61440&e.node.mode))throw new Ye(19);if(t=e.node.Oa,2&i||t.buffer!==n&&t.buffer!==n.buffer){if((0<a||a+r<e.node.Ra)&&(t=t.subarray?t.subarray(a,a+r):Array.prototype.slice.call(t,a,a+r)),e=!0,!(r=Ve(r)))throw new Ye(12);n.set(t,r)}else e=!1,r=t.byteOffset;return{Ub:r,Hb:e}},vb:function(e,n,t,r,a){if(32768!=(61440&e.node.mode))throw new Ye(19);return 2&a?0:(Ne.Qa.write(e,n,0,r,t,!1),0)}}},Le=null,Ce={},Me=[],Ue=1,He=null,ze=!0,Ie={},Ye=null,Qe={},je={r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},De={open:function(e){e.Qa=Ce[e.node.hb].Qa,e.Qa.open&&e.Qa.open(e)},$a:function(){throw new Ye(29)}},We={},Fe=0;C(),He=Array(4096),T(Ne,"/"),B("/tmp"),B("/home"),B("/home/web_user"),function(){if(B("/dev"),A(259,{read:function(){return 0},write:function(e,n,t,r){return r}}),R("/dev/null",259),p(1280,Oe),p(1536,ke),R("/dev/tty",1280),R("/dev/tty1",1536),"object"==typeof crypto&&"function"==typeof crypto.getRandomValues)var e=new Uint8Array(1),n=function(){return crypto.getRandomValues(e),e[0]};n||(n=function(){D("random_device")}),M("random",n),M("urandom",n),B("/dev/shm"),B("/dev/shm/tmp")}(),B("/proc"),B("/proc/self"),B("/proc/self/fd"),T({Wa:function(){var e=b("/proc/self","fd",16895,73);return e.Pa={cb:function(e,n){var t=Me[+n];if(!t)throw new Ye(9);return(e={parent:null,Wa:{ub:"fake"},Pa:{eb:function(){return t.path}}}).parent=e}},e}},"/proc/self/fd");var $e=W.asm({},{n:D,d:function(e){G=e},b:function(){return G},h:function(e){var n=Ze();try{return qe(e)}catch(e){if(Xe(n),e!==e+0&&"longjmp"!==e)throw e;Ke(1,0)}},j:function(e,n){var t=Ze();try{return Ge(e,n)}catch(e){if(Xe(t),e!==e+0&&"longjmp"!==e)throw e;Ke(1,0)}},i:function(e,n,t){var r=Ze();try{return Je(e,n,t)}catch(e){if(Xe(r),e!==e+0&&"longjmp"!==e)throw e;Ke(1,0)}},q:function(e,n,t,r){var a=Ze();try{return en(e,n,t,r)}catch(e){if(Xe(a),e!==e+0&&"longjmp"!==e)throw e;Ke(1,0)}},D:function(e,n,t,r,a){var o=Ze();try{return nn(e,n,t,r,a)}catch(e){if(Xe(o),e!==e+0&&"longjmp"!==e)throw e;Ke(1,0)}},m:function(e){var n=Ze();try{tn(e)}catch(e){if(Xe(n),e!==e+0&&"longjmp"!==e)throw e;Ke(1,0)}},e:function(e,n){var t=Ze();try{rn(e,n)}catch(e){if(Xe(t),e!==e+0&&"longjmp"!==e)throw e;Ke(1,0)}},f:function(e,n,t){var r=Ze();try{an(e,n,t)}catch(e){if(Xe(r),e!==e+0&&"longjmp"!==e)throw e;Ke(1,0)}},g:function(e,n,t,r){var a=Ze();try{on(e,n,t,r)}catch(e){if(Xe(a),e!==e+0&&"longjmp"!==e)throw e;Ke(1,0)}},l:function(e,n,t,r,a){var o=Ze();try{sn(e,n,t,r,a)}catch(e){if(Xe(o),e!==e+0&&"longjmp"!==e)throw e;Ke(1,0)}},s:function(e,n,t,r,a,o){var i=Ze();try{un(e,n,t,r,a,o)}catch(e){if(Xe(i),e!==e+0&&"longjmp"!==e)throw e;Ke(1,0)}},o:function(e,n,t,r,a,o,i){var s=Ze();try{cn(e,n,t,r,a,o,i)}catch(e){if(Xe(s),e!==e+0&&"longjmp"!==e)throw e;Ke(1,0)}},N:function(e,n,t,r,a,o,i,s){var u=Ze();try{fn(e,n,t,r,a,o,i,s)}catch(e){if(Xe(u),e!==e+0&&"longjmp"!==e)throw e;Ke(1,0)}},C:function(e,n,t,r,a,o,i,s,u){var c=Ze();try{ln(e,n,t,r,a,o,i,s,u)}catch(e){if(Xe(c),e!==e+0&&"longjmp"!==e)throw e;Ke(1,0)}},v:function(){},B:_,M:function(e,n){Fe=n;try{var t=H(),r=U(),a=U(),o=U(),i=U();return-9007199254740992>=(e=4294967296*r+(a>>>0))||9007199254740992<=e?-75:(N(t,e,i),Pe=[t.position>>>0,(Ee=t.position,1<=+_e(Ee)?0<Ee?(0|ye(+pe(Ee/4294967296),4294967295))>>>0:~~+de((Ee-+(~~Ee>>>0))/4294967296)>>>0:0)],ie[o>>2]=Pe[0],ie[o+4>>2]=Pe[1],t.kb&&0===e&&0===i&&(t.kb=null),0)}catch(e){return void 0!==We&&e instanceof Ye||D(e),-e.Xa}},L:function(e,n){Fe=n;try{var t=H(),r=U();e:{var a=U();for(n=e=0;n<a;n++){var o=ie[r+(8*n+4)>>2],i=L(t,ie[r+8*n>>2],o,void 0);if(0>i){var s=-1;break e}if(e+=i,i<o)break}s=e}return s}catch(e){return void 0!==We&&e instanceof Ye||D(e),-e.Xa}},A:function(e,n){Fe=n;try{var t=H(),r=U();e:{var a=U();for(n=e=0;n<a;n++){var o=t,i=ie[r+8*n>>2],s=ie[r+(8*n+4)>>2],u=void 0;if(0>s||0>u)throw new Ye(22);if(null===o.Ya)throw new Ye(9);if(0==(2097155&o.flags))throw new Ye(9);if(16384==(61440&o.node.mode))throw new Ye(21);if(!o.Qa.write)throw new Ye(22);1024&o.flags&&N(o,0,2);var c=void 0!==u;if(c){if(!o.seekable)throw new Ye(29)}else u=o.position;var f=o.Qa.write(o,re,i,s,u,void 0);c||(o.position+=f);try{o.path&&Ie.onWriteToFile&&Ie.onWriteToFile(o.path)}catch(e){console.log("FS.trackingDelegate['onWriteToFile']('"+o.path+"') threw an exception: "+e.message)}if(0>(o=f)){var l=-1;break e}e+=o}l=e}return l}catch(e){return void 0!==We&&e instanceof Ye||D(e),-e.Xa}},z:function(e,n){Fe=n;try{var t=H();switch(U()){case 0:var r=U();return 0>r?-22:k(t.path,t.flags,0,r).Ya;case 1:case 2:return 0;case 3:return t.flags;case 4:return r=U(),t.flags|=r,0;case 12:return r=U(),oe[r+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-22;case 9:return _(22),-1;default:return-22}}catch(e){return void 0!==We&&e instanceof Ye||D(e),-e.Xa}},K:function(e,n){Fe=n;try{return L(H(),U(),U())}catch(e){return void 0!==We&&e instanceof Ye||D(e),-e.Xa}},y:function(e,n){Fe=n;try{var r=U();return k(r?t(ae,r,void 0):"",U(),U()).Ya}catch(e){return void 0!==We&&e instanceof Ye||D(e),-e.Xa}},x:function(e,n){Fe=n;try{var t=H(),r=U();switch(r){case 21509:case 21505:return t.Sa?0:-25;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return t.Sa?0:-25;case 21519:if(!t.Sa)return-25;var a=U();return ie[a>>2]=0;case 21520:return t.Sa?-22:-25;case 21531:if(e=U(),!t.Qa.Bb)throw new Ye(25);return t.Qa.Bb(t,r,e);case 21523:case 21524:return t.Sa?0:-25;default:D("bad ioctl syscall "+r)}}catch(e){return void 0!==We&&e instanceof Ye||D(e),-e.Xa}},u:function(e,n){Fe=n;try{var t=H();if(null===t.Ya)throw new Ye(9);t.kb&&(t.kb=null);try{t.Qa.close&&t.Qa.close(t)}catch(e){throw e}finally{Me[t.Ya]=null}return t.Ya=null,0}catch(e){return void 0!==We&&e instanceof Ye||D(e),-e.Xa}},t:function(){},J:function(){W.abort()},I:function(){return re.length},H:function(e,n){z(e,n)},G:function(e,n,t){ae.set(ae.subarray(n,n+t),e)},F:function(e){Y()},k:function(e){!W.noExitRuntime&&(ee=!0,W.onExit)&&W.onExit(e),W.quit(e,new Q(e))},w:function(e){var n=Date.now();return ie[e>>2]=n/1e3|0,ie[e+4>>2]=n%1e3*1e3|0,0},p:function(e){var n=I.bb[e];I.bb.splice(e,1),Xe(n)},r:I,c:z,E:Y,a:62864},te);W.asm=$e,W.___errno_location=function(){return W.asm.O.apply(null,arguments)},W._free=function(){return W.asm.P.apply(null,arguments)};var Ve=W._malloc=function(){return W.asm.Q.apply(null,arguments)},Ke=W._setThrew=function(){return W.asm.R.apply(null,arguments)};W._vsc_buffer_bytes=function(){return W.asm.S.apply(null,arguments)},W._vsc_buffer_data=function(){return W.asm.T.apply(null,arguments)},W._vsc_buffer_delete=function(){return W.asm.U.apply(null,arguments)},W._vsc_buffer_len=function(){return W.asm.V.apply(null,arguments)},W._vsc_buffer_make_secure=function(){return W.asm.W.apply(null,arguments)},W._vsc_buffer_new=function(){return W.asm.X.apply(null,arguments)},W._vsc_buffer_new_with_capacity=function(){return W.asm.Y.apply(null,arguments)},W._vsc_data=function(){return W.asm.Z.apply(null,arguments)},W._vsc_data_bytes=function(){return W.asm._.apply(null,arguments)},W._vsc_data_ctx_size=function(){return W.asm.$.apply(null,arguments)},W._vsc_data_len=function(){return W.asm.aa.apply(null,arguments)},W._vscp_error_ctx_size=function(){return W.asm.ba.apply(null,arguments)},W._vscp_error_reset=function(){return W.asm.ca.apply(null,arguments)},W._vscp_error_status=function(){return W.asm.da.apply(null,arguments)},W._vscp_pythia_blind=function(){return W.asm.ea.apply(null,arguments)},W._vscp_pythia_blinded_password_buf_len=function(){return W.asm.fa.apply(null,arguments)},W._vscp_pythia_blinding_secret_buf_len=function(){return W.asm.ga.apply(null,arguments)},W._vscp_pythia_cleanup=function(){return W.asm.ha.apply(null,arguments)},W._vscp_pythia_compute_transformation_key_pair=function(){return W.asm.ia.apply(null,arguments)},W._vscp_pythia_configure=function(){return W.asm.ja.apply(null,arguments)},W._vscp_pythia_deblind=function(){return W.asm.ka.apply(null,arguments)},W._vscp_pythia_deblinded_password_buf_len=function(){return W.asm.la.apply(null,arguments)},W._vscp_pythia_get_password_update_token=function(){return W.asm.ma.apply(null,arguments)},W._vscp_pythia_password_update_token_buf_len=function(){return W.asm.na.apply(null,arguments)},W._vscp_pythia_proof_value_buf_len=function(){return W.asm.oa.apply(null,arguments)},W._vscp_pythia_prove=function(){return W.asm.pa.apply(null,arguments)},W._vscp_pythia_transform=function(){return W.asm.qa.apply(null,arguments)},W._vscp_pythia_transformation_private_key_buf_len=function(){return W.asm.ra.apply(null,arguments)},W._vscp_pythia_transformation_public_key_buf_len=function(){return W.asm.sa.apply(null,arguments)},W._vscp_pythia_transformed_password_buf_len=function(){return W.asm.ta.apply(null,arguments)},W._vscp_pythia_transformed_tweak_buf_len=function(){return W.asm.ua.apply(null,arguments)},W._vscp_pythia_update_deblinded_with_token=function(){return W.asm.va.apply(null,arguments)},W._vscp_pythia_verify=function(){return W.asm.wa.apply(null,arguments)},W.stackAlloc=function(){return W.asm.La.apply(null,arguments)};var Xe=W.stackRestore=function(){return W.asm.Ma.apply(null,arguments)},Ze=W.stackSave=function(){return W.asm.Na.apply(null,arguments)},qe=W.dynCall_i=function(){return W.asm.xa.apply(null,arguments)},Ge=W.dynCall_ii=function(){return W.asm.ya.apply(null,arguments)},Je=W.dynCall_iii=function(){return W.asm.za.apply(null,arguments)},en=W.dynCall_iiii=function(){return W.asm.Aa.apply(null,arguments)},nn=W.dynCall_iiiii=function(){return W.asm.Ba.apply(null,arguments)},tn=W.dynCall_v=function(){return W.asm.Ca.apply(null,arguments)},rn=W.dynCall_vi=function(){return W.asm.Da.apply(null,arguments)},an=W.dynCall_vii=function(){return W.asm.Ea.apply(null,arguments)},on=W.dynCall_viii=function(){return W.asm.Fa.apply(null,arguments)},sn=W.dynCall_viiii=function(){return W.asm.Ga.apply(null,arguments)},un=W.dynCall_viiiii=function(){return W.asm.Ha.apply(null,arguments)},cn=W.dynCall_viiiiii=function(){return W.asm.Ia.apply(null,arguments)},fn=W.dynCall_viiiiiii=function(){return W.asm.Ja.apply(null,arguments)},ln=W.dynCall_viiiiiiii=function(){return W.asm.Ka.apply(null,arguments)};if(W.asm=$e,W.then=function(e){if(W.calledRun)e(W);else{var n=W.onRuntimeInitialized;W.onRuntimeInitialized=function(){n&&n(),e(W)}}return W},Q.prototype=Error(),Q.prototype.constructor=Q,ve=function e(){W.calledRun||j(),W.calledRun||(ve=e)},W.run=j,W.abort=D,W.preInit)for("function"==typeof W.preInit&&(W.preInit=[W.preInit]);0<W.preInit.length;)W.preInit.pop()();return W.noExitRuntime=!0,j(),n}}(),e.exports=n});let initPythiaError=(e,n)=>{class t extends Error{constructor(e){super(e),this.name="PythiaError",this.message=e}static handleStatusCode(e){if(0!=e){if(-1==e)throw new t("This error should not be returned if assertions is enabled.");if(-200==e)throw new t("Underlying pythia library returns -1.");if(-202==e)throw new t("Underlying random number generator failed.");throw new t("Unexpected status code:"+e)}}}return t};var PythiaError=initPythiaError;function ensureNumber(e,n){if(!("number"==typeof n||n instanceof Number))throw new TypeError(`'${e}' is not a number`);if(Number.isNaN(n))throw new TypeError(`'${e}' is NaN`);if(1/0===n)throw new TypeError(`'${e}' is Infinity`);if(-1/0===n)throw new TypeError(`'${e}' is -Infinity`)}function ensureNotNull(e,n){if(ensureNumber(e,n),0==n)throw new TypeError(`'${e}' is NULL`)}function ensureString(e,n){if(!("string"==typeof n||n instanceof String))throw new TypeError(`'${e}' is not a string`)}function ensureBoolean(e,n){if("boolean"!=typeof n)throw new TypeError(`'${e}' is not a boolean`)}function ensureByteArray(e,n){if(!(n instanceof Uint8Array))throw new TypeError(`'${e}' is not an Uint8Array`)}function ensureClass(e,n,t){if(!(n instanceof t))throw new TypeError(`'${e}' is not an instance of the class ${t.name}`);ensureNotNull(e,n.ctxPtr)}function ensureImplementInterface(e,n,t,r,a){if(ensureNotNull(e,n.ctxPtr),!a.isImplemented(n.ctxPtr,r))throw new TypeError(`'${e}' does not implement interface '${t}'`)}var ensureNumber_1=ensureNumber,ensureString_1=ensureString,ensureBoolean_1=ensureBoolean,ensureByteArray_1=ensureByteArray,ensureClass_1=ensureClass,ensureNotNull_1=ensureNotNull,ensureImplementInterface_1=ensureImplementInterface,precondition={ensureNumber:ensureNumber_1,ensureString:ensureString_1,ensureBoolean:ensureBoolean_1,ensureByteArray:ensureByteArray_1,ensureClass:ensureClass_1,ensureNotNull:ensureNotNull_1,ensureImplementInterface:ensureImplementInterface_1};let initPythia=(e,n)=>{class t{static configure(){const t=e._vscp_pythia_configure();n.PythiaError.handleStatusCode(t)}static cleanup(){e._vscp_pythia_cleanup()}static blindedPasswordBufLen(){return e._vscp_pythia_blinded_password_buf_len()}static deblindedPasswordBufLen(){return e._vscp_pythia_deblinded_password_buf_len()}static blindingSecretBufLen(){return e._vscp_pythia_blinding_secret_buf_len()}static transformationPrivateKeyBufLen(){return e._vscp_pythia_transformation_private_key_buf_len()}static transformationPublicKeyBufLen(){return e._vscp_pythia_transformation_public_key_buf_len()}static transformedPasswordBufLen(){return e._vscp_pythia_transformed_password_buf_len()}static transformedTweakBufLen(){return e._vscp_pythia_transformed_tweak_buf_len()}static proofValueBufLen(){return e._vscp_pythia_proof_value_buf_len()}static passwordUpdateTokenBufLen(){return e._vscp_pythia_password_update_token_buf_len()}static blind(r){precondition.ensureByteArray("password",r);var a=r.length*r.BYTES_PER_ELEMENT;const o=e._malloc(a);e.HEAP8.set(r,o),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,o,a),a=t.blindedPasswordBufLen(),a=e._vsc_buffer_new_with_capacity(a);var i=t.blindingSecretBufLen();i=e._vsc_buffer_new_with_capacity(i);try{const t=e._vscp_pythia_blind(r,a,i);n.PythiaError.handleStatusCode(t);const o=e._vsc_buffer_bytes(a),s=e._vsc_buffer_len(a),u=e.HEAPU8.slice(o,o+s),c=e._vsc_buffer_bytes(i),f=e._vsc_buffer_len(i);return{blindedPassword:u,blindingSecret:e.HEAPU8.slice(c,c+f)}}finally{e._free(t),e._free(r),e._vsc_buffer_delete(a),e._vsc_buffer_delete(i)}}static deblind(r,a){precondition.ensureByteArray("transformedPassword",r),precondition.ensureByteArray("blindingSecret",a);var o=r.length*r.BYTES_PER_ELEMENT;const i=e._malloc(o);e.HEAP8.set(r,i),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,i,o);var s=a.length*a.BYTES_PER_ELEMENT;o=e._malloc(s),e.HEAP8.set(a,o),a=e._vsc_data_ctx_size(),a=e._malloc(a),e._vsc_data(a,o,s),s=t.deblindedPasswordBufLen(),s=e._vsc_buffer_new_with_capacity(s);try{const t=e._vscp_pythia_deblind(r,a,s);n.PythiaError.handleStatusCode(t);const o=e._vsc_buffer_bytes(s),i=e._vsc_buffer_len(s);return e.HEAPU8.slice(o,o+i)}finally{e._free(o),e._free(r),e._free(t),e._free(a),e._vsc_buffer_delete(s)}}static computeTransformationKeyPair(r,a,o){precondition.ensureByteArray("transformationKeyId",r),precondition.ensureByteArray("pythiaSecret",a),precondition.ensureByteArray("pythiaScopeSecret",o);var i=r.length*r.BYTES_PER_ELEMENT;const s=e._malloc(i);e.HEAP8.set(r,s),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,s,i);var u=a.length*a.BYTES_PER_ELEMENT;i=e._malloc(u),e.HEAP8.set(a,i),a=e._vsc_data_ctx_size(),a=e._malloc(a),e._vsc_data(a,i,u);var c=o.length*o.BYTES_PER_ELEMENT;u=e._malloc(c),e.HEAP8.set(o,u),o=e._vsc_data_ctx_size(),o=e._malloc(o),e._vsc_data(o,u,c),c=t.transformationPrivateKeyBufLen(),c=e._vsc_buffer_new_with_capacity(c);var f=t.transformationPublicKeyBufLen();f=e._vsc_buffer_new_with_capacity(f);try{const t=e._vscp_pythia_compute_transformation_key_pair(r,a,o,c,f);n.PythiaError.handleStatusCode(t);const i=e._vsc_buffer_bytes(c),s=e._vsc_buffer_len(c),u=e.HEAPU8.slice(i,i+s),l=e._vsc_buffer_bytes(f),_=e._vsc_buffer_len(f);return{transformationPrivateKey:u,transformationPublicKey:e.HEAPU8.slice(l,l+_)}}finally{e._free(t),e._free(r),e._free(i),e._free(a),e._free(s),e._free(o),e._vsc_buffer_delete(c),e._vsc_buffer_delete(f)}}static transform(r,a,o){precondition.ensureByteArray("blindedPassword",r),precondition.ensureByteArray("tweak",a),precondition.ensureByteArray("transformationPrivateKey",o);var i=r.length*r.BYTES_PER_ELEMENT;const s=e._malloc(i);e.HEAP8.set(r,s),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,s,i);var u=a.length*a.BYTES_PER_ELEMENT;i=e._malloc(u),e.HEAP8.set(a,i),a=e._vsc_data_ctx_size(),a=e._malloc(a),e._vsc_data(a,i,u);var c=o.length*o.BYTES_PER_ELEMENT;u=e._malloc(c),e.HEAP8.set(o,u),o=e._vsc_data_ctx_size(),o=e._malloc(o),e._vsc_data(o,u,c),c=t.transformedPasswordBufLen(),c=e._vsc_buffer_new_with_capacity(c);var f=t.transformedTweakBufLen();f=e._vsc_buffer_new_with_capacity(f);try{const t=e._vscp_pythia_transform(r,a,o,c,f);n.PythiaError.handleStatusCode(t);const i=e._vsc_buffer_bytes(c),s=e._vsc_buffer_len(c),u=e.HEAPU8.slice(i,i+s),l=e._vsc_buffer_bytes(f),_=e._vsc_buffer_len(f);return{transformedPassword:u,transformedTweak:e.HEAPU8.slice(l,l+_)}}finally{e._free(t),e._free(r),e._free(i),e._free(a),e._free(s),e._free(o),e._vsc_buffer_delete(c),e._vsc_buffer_delete(f)}}static prove(r,a,o,i,s){precondition.ensureByteArray("transformedPassword",r),precondition.ensureByteArray("blindedPassword",a),precondition.ensureByteArray("transformedTweak",o),precondition.ensureByteArray("transformationPrivateKey",i),precondition.ensureByteArray("transformationPublicKey",s);var u=r.length*r.BYTES_PER_ELEMENT;const c=e._malloc(u);e.HEAP8.set(r,c),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,c,u);var f=a.length*a.BYTES_PER_ELEMENT;u=e._malloc(f),e.HEAP8.set(a,u),a=e._vsc_data_ctx_size(),a=e._malloc(a),e._vsc_data(a,u,f);var l=o.length*o.BYTES_PER_ELEMENT;f=e._malloc(l),e.HEAP8.set(o,f),o=e._vsc_data_ctx_size(),o=e._malloc(o),e._vsc_data(o,f,l);var _=i.length*i.BYTES_PER_ELEMENT;l=e._malloc(_),e.HEAP8.set(i,l),i=e._vsc_data_ctx_size(),i=e._malloc(i),e._vsc_data(i,l,_);var d=s.length*s.BYTES_PER_ELEMENT;_=e._malloc(d),e.HEAP8.set(s,_),s=e._vsc_data_ctx_size(),s=e._malloc(s),e._vsc_data(s,_,d),d=t.proofValueBufLen(),d=e._vsc_buffer_new_with_capacity(d);var p=t.proofValueBufLen();p=e._vsc_buffer_new_with_capacity(p);try{const t=e._vscp_pythia_prove(r,a,o,i,s,d,p);n.PythiaError.handleStatusCode(t);const u=e._vsc_buffer_bytes(d),c=e._vsc_buffer_len(d),f=e.HEAPU8.slice(u,u+c),l=e._vsc_buffer_bytes(p),_=e._vsc_buffer_len(p);return{proofValueC:f,proofValueU:e.HEAPU8.slice(l,l+_)}}finally{e._free(u),e._free(r),e._free(t),e._free(a),e._free(f),e._free(o),e._free(_),e._free(i),e._free(l),e._free(s),e._vsc_buffer_delete(d),e._vsc_buffer_delete(p)}}static verify(t,r,a,o,i,s){precondition.ensureByteArray("transformedPassword",t),precondition.ensureByteArray("blindedPassword",r),precondition.ensureByteArray("tweak",a),precondition.ensureByteArray("transformationPublicKey",o),precondition.ensureByteArray("proofValueC",i),precondition.ensureByteArray("proofValueU",s);var u=t.length*t.BYTES_PER_ELEMENT;const c=e._malloc(u);e.HEAP8.set(t,c),t=e._vsc_data_ctx_size(),t=e._malloc(t),e._vsc_data(t,c,u);var f=r.length*r.BYTES_PER_ELEMENT;u=e._malloc(f),e.HEAP8.set(r,u),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,u,f);var l=a.length*a.BYTES_PER_ELEMENT;f=e._malloc(l),e.HEAP8.set(a,f),a=e._vsc_data_ctx_size(),a=e._malloc(a),e._vsc_data(a,f,l);var _=o.length*o.BYTES_PER_ELEMENT;l=e._malloc(_),e.HEAP8.set(o,l),o=e._vsc_data_ctx_size(),o=e._malloc(o),e._vsc_data(o,l,_);var d=i.length*i.BYTES_PER_ELEMENT;_=e._malloc(d),e.HEAP8.set(i,_),i=e._vsc_data_ctx_size(),i=e._malloc(i),e._vsc_data(i,_,d);var p=s.length*s.BYTES_PER_ELEMENT;let y;d=e._malloc(p),e.HEAP8.set(s,d),s=e._vsc_data_ctx_size(),s=e._malloc(s),e._vsc_data(s,d,p),p=e._vscp_error_ctx_size(),p=e._malloc(p),e._vscp_error_reset(p);try{y=e._vscp_pythia_verify(t,r,a,o,i,s,p);const u=e._vscp_error_status(p);return n.PythiaError.handleStatusCode(u),!!y}finally{e._free(c),e._free(t),e._free(u),e._free(r),e._free(f),e._free(a),e._free(l),e._free(o),e._free(_),e._free(i),e._free(d),e._free(s),e._free(p)}}static getPasswordUpdateToken(r,a){precondition.ensureByteArray("previousTransformationPrivateKey",r),precondition.ensureByteArray("newTransformationPrivateKey",a);var o=r.length*r.BYTES_PER_ELEMENT;const i=e._malloc(o);e.HEAP8.set(r,i),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,i,o);var s=a.length*a.BYTES_PER_ELEMENT;o=e._malloc(s),e.HEAP8.set(a,o),a=e._vsc_data_ctx_size(),a=e._malloc(a),e._vsc_data(a,o,s),s=t.passwordUpdateTokenBufLen(),s=e._vsc_buffer_new_with_capacity(s);try{const t=e._vscp_pythia_get_password_update_token(r,a,s);n.PythiaError.handleStatusCode(t);const o=e._vsc_buffer_bytes(s),i=e._vsc_buffer_len(s);return e.HEAPU8.slice(o,o+i)}finally{e._free(o),e._free(r),e._free(t),e._free(a),e._vsc_buffer_delete(s)}}static updateDeblindedWithToken(r,a){precondition.ensureByteArray("deblindedPassword",r),precondition.ensureByteArray("passwordUpdateToken",a);var o=r.length*r.BYTES_PER_ELEMENT;const i=e._malloc(o);e.HEAP8.set(r,i),r=e._vsc_data_ctx_size(),r=e._malloc(r),e._vsc_data(r,i,o);var s=a.length*a.BYTES_PER_ELEMENT;o=e._malloc(s),e.HEAP8.set(a,o),a=e._vsc_data_ctx_size(),a=e._malloc(a),e._vsc_data(a,o,s),s=t.deblindedPasswordBufLen(),s=e._vsc_buffer_new_with_capacity(s);try{const t=e._vscp_pythia_update_deblinded_with_token(r,a,s);n.PythiaError.handleStatusCode(t);const o=e._vsc_buffer_bytes(s),i=e._vsc_buffer_len(s);return e.HEAPU8.slice(o,o+i)}finally{e._free(o),e._free(r),e._free(t),e._free(a),e._vsc_buffer_delete(s)}}}return t};var Pythia=initPythia;let initProject=()=>{const e=new libpythia_worker;return new Promise((n,t)=>{e.onRuntimeInitialized=()=>{const t={};t.PythiaError=PythiaError(),t.Pythia=Pythia(e,t),n(t)},e.onAbort=e=>{t(Error(e))}})};var pythia=initProject;module.exports=pythia;
