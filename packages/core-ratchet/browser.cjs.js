"use strict";function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var libratchet_browser=createCommonjsModule((function(t,e){e=function(){var t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return function(e){function r(t,e,r){var n=e+r;for(r=e;t[r]&&!(r>=n);)++r;if(16<r-e&&t.subarray&&Q)return Q.decode(t.subarray(e,r));for(n="";e<r;){var s=t[e++];if(128&s){var c=63&t[e++];if(192==(224&s))n+=String.fromCharCode((31&s)<<6|c);else{var a=63&t[e++];65536>(s=224==(240&s)?(15&s)<<12|c<<6|a:(7&s)<<18|c<<12|a<<6|63&t[e++])?n+=String.fromCharCode(s):(s-=65536,n+=String.fromCharCode(55296|s>>10,56320|1023&s))}}else n+=String.fromCharCode(s)}return n}function n(t){return 0<t%65536&&(t+=65536-t%65536),t}function s(t){tt=t,U.HEAP8=et=new Int8Array(t),U.HEAP16=nt=new Int16Array(t),U.HEAP32=st=new Int32Array(t),U.HEAPU8=rt=new Uint8Array(t),U.HEAPU16=new Uint16Array(t),U.HEAPU32=new Uint32Array(t),U.HEAPF32=new Float32Array(t),U.HEAPF64=new Float64Array(t)}function c(t){for(;0<t.length;){var e=t.shift();if("function"==typeof e)e();else{var r=e.bd;"number"==typeof r?void 0===e.zc?U.dynCall_v(r):U.dynCall_vi(r,e.zc):r(void 0===e.zc?null:e.zc)}}}function a(){var t=U.preRun.shift();at.unshift(t)}function i(t){throw U.onAbort&&U.onAbort(t),j(t),W(t),J=!0,"abort("+t+"). Build with -s ASSERTIONS=1 for more info."}function o(){var t=vt;return String.prototype.startsWith?t.startsWith("data:application/octet-stream;base64,"):0===t.indexOf("data:application/octet-stream;base64,")}function _(){try{if(X)return new Uint8Array(X);throw"both async and sync fetching of the wasm failed"}catch(t){i(t)}}function u(t,e){for(var r=0,n=t.length-1;0<=n;n--){var s=t[n];"."===s?t.splice(n,1):".."===s?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r;r--)t.unshift("..");return t}function l(t){var e="/"===t.charAt(0),r="/"===t.substr(-1);return(t=u(t.split("/").filter((function(t){return!!t})),!e).join("/"))||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t}function f(t){var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],t||e?(e&&(e=e.substr(0,e.length-1)),t+e):"."}function p(t){if("/"===t)return"/";var e=t.lastIndexOf("/");return-1===e?t:t.substr(e+1)}function h(){for(var t="",e=!1,r=arguments.length-1;-1<=r&&!e;r--){if("string"!=typeof(e=0<=r?arguments[r]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!e)return"";t=e+"/"+t,e="/"===e.charAt(0)}return(e?"/":"")+(t=u(t.split("/").filter((function(t){return!!t})),!e).join("/"))||"."}function d(t,e){bt[t]={input:[],kc:[],sc:e},N(t,Tt)}function m(t,e){if(e=e||{},!(t=h("/",t)))return{path:"",node:null};var r,n={Hc:!0,Cc:0};for(r in n)void 0===e[r]&&(e[r]=n[r]);if(8<e.Cc)throw new Bt(32);t=u(t.split("/").filter((function(t){return!!t})),!1);var s=St;for(n="/",r=0;r<t.length;r++){var c=r===t.length-1;if(c&&e.parent)break;if(s=g(s,t[r]),n=l(n+"/"+t[r]),s.wc&&(!c||c&&e.Hc)&&(s=s.wc.root),!c||e.Gc)for(c=0;40960==(61440&s.mode);)if(s=S(n),s=m(n=h(f(n),s),{Cc:e.Cc}).node,40<c++)throw new Bt(32)}return{path:n,node:s}}function v(t){for(var e;;){if(t===t.parent)return t=t.nc.Kc,e?"/"!==t[t.length-1]?t+"/"+e:t+e:t;e=e?t.name+"/"+e:t.name,t=t.parent}}function y(t,e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n)|0;return(t+r>>>0)%Ft.length}function g(t,e){var r;if(r=(r=x(t,"x"))?r:t.gc.tc?0:2)throw new Bt(r,t);for(r=Ft[y(t.id,e)];r;r=r.Tc){var n=r.name;if(r.parent.id===t.id&&n===e)return r}return t.gc.tc(t,e)}function w(t,e,r,n){return Et||((Et=function(t,e,r,n){t||(t=this),this.parent=t,this.nc=t.nc,this.wc=null,this.id=Mt++,this.name=e,this.mode=r,this.gc={},this.hc={},this.xc=n}).prototype={},Object.defineProperties(Et.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(t){t?this.mode|=146:this.mode&=-147}}})),function(t){var e=y(t.parent.id,t.name);t.Tc=Ft[e],Ft[e]=t}(t=new Et(t,e,r,n)),t}function P(t){var e=["r","w","rw"][3&t];return 512&t&&(e+="w"),e}function x(t,e){return Lt?0:(-1===e.indexOf("r")||292&t.mode)&&(-1===e.indexOf("w")||146&t.mode)&&(-1===e.indexOf("x")||73&t.mode)?0:2}function E(t,e){try{return g(t,e),20}catch(t){}return x(t,"wx")}function A(t,e){At||((At=function(){}).prototype={},Object.defineProperties(At.prototype,{object:{get:function(){return this.node},set:function(t){this.node=t}}}));var r,n=new At;for(r in t)n[r]=t[r];return t=n,e=function(t){for(t=t||0;4096>=t;t++)if(!$t[t])return t;throw new Bt(33)}(e),t.oc=e,$t[e]=t}function N(t,e){kt[t]={hc:e}}function b(t,e){var r="/"===e,n=!e;if(r&&St)throw new Bt(10);if(!r&&!n){var s=m(e,{Hc:!1});if(e=s.path,(s=s.node).wc)throw new Bt(10);if(16384!=(61440&s.mode))throw new Bt(54)}e={type:t,jd:{},Kc:e,Sc:[]},(t=t.nc(e)).nc=e,e.root=t,r?St=t:s&&(s.wc=e,s.nc&&s.nc.Sc.push(e))}function T(t,e,r){var n=m(t,{parent:!0}).node;if(!(t=p(t))||"."===t||".."===t)throw new Bt(28);var s=E(n,t);if(s)throw new Bt(s);if(!n.gc.vc)throw new Bt(63);return n.gc.vc(n,t,e,r)}function C(t){T(t,16895,0)}function I(t,e,r){void 0===r&&(r=e,e=438),T(t,8192|e,r)}function R(t,e){if(!h(t))throw new Bt(44);var r=m(e,{parent:!0}).node;if(!r)throw new Bt(44);var n=E(r,e=p(e));if(n)throw new Bt(n);if(!r.gc.yc)throw new Bt(63);r.gc.yc(r,e,t)}function S(t){if(!(t=m(t).node))throw new Bt(44);if(!t.gc.uc)throw new Bt(28);return h(v(t.parent),t.gc.uc(t))}function k(t,e,r,n){if(""===t)throw new Bt(44);if("string"==typeof e){var s=Gt[e];if(void 0===s)throw Error("Unknown file open mode: "+e);e=s}if(r=64&e?4095&(void 0===r?438:r)|32768:0,"object"==typeof t)var c=t;else{t=l(t);try{c=m(t,{Gc:!(131072&e)}).node}catch(t){}}if(s=!1,64&e)if(c){if(128&e)throw new Bt(20)}else c=T(t,r,0),s=!0;if(!c)throw new Bt(44);if(8192==(61440&c.mode)&&(e&=-513),65536&e&&16384!=(61440&c.mode))throw new Bt(54);if(!s&&(r=c?40960==(61440&c.mode)?32:16384==(61440&c.mode)&&("r"!==P(e)||512&e)?31:x(c,P(e)):44))throw new Bt(r);if(512&e){var a;if(!(a="string"==typeof(r=c)?m(r,{Gc:!0}).node:r).gc.mc)throw new Bt(63);if(16384==(61440&a.mode))throw new Bt(31);if(32768!=(61440&a.mode))throw new Bt(28);if(r=x(a,"w"))throw new Bt(r);a.gc.mc(a,{size:0,timestamp:Date.now()})}e&=-641,(n=A({node:c,path:v(c),flags:e,seekable:!0,position:0,hc:c.hc,Wc:[],error:!1},n)).hc.open&&n.hc.open(n),!U.logReadFiles||1&e||(Nt||(Nt={}),t in Nt||(Nt[t]=1,console.log("FS.trackingDelegate error on read file: "+t)));try{zt.onOpenFile&&(c=0,1!=(2097155&e)&&(c|=1),0!=(2097155&e)&&(c|=2),zt.onOpenFile(t,c))}catch(e){console.log("FS.trackingDelegate['onOpenFile']('"+t+"', flags) threw an exception: "+e.message)}return n}function $(t,e,r){if(null===t.oc)throw new Bt(8);if(!t.seekable||!t.hc.rc)throw new Bt(70);if(0!=r&&1!=r&&2!=r)throw new Bt(28);t.position=t.hc.rc(t,e,r),t.Wc=[]}function M(){Bt||((Bt=function(t,e){this.node=e,this.Vc=function(t){this.qc=t},this.Vc(t),this.message="FS error"}).prototype=Error(),Bt.prototype.constructor=Bt,[44].forEach((function(t){Ht[t]=new Bt(t),Ht[t].stack="<generic error, no stack>"})))}function F(t,e,r){t=l("/dev/"+t);var n=function(t,e){var r=0;return t&&(r|=365),e&&(r|=146),r}(!!e,!!r);xt||(xt=64);var s=xt++<<8|0;N(s,{open:function(t){t.seekable=!1},close:function(){r&&r.buffer&&r.buffer.length&&r(10)},read:function(t,r,n,s){for(var c=0,a=0;a<s;a++){try{var i=e()}catch(t){throw new Bt(29)}if(void 0===i&&0===c)throw new Bt(6);if(null==i)break;c++,r[n+a]=i}return c&&(t.node.timestamp=Date.now()),c},write:function(t,e,n,s){for(var c=0;c<s;c++)try{r(e[n+c])}catch(t){throw new Bt(29)}return s&&(t.node.timestamp=Date.now()),c}}),I(t,n,s)}function L(){return st[(Ot+=4)-4>>2]}function z(t){if(t||(t=L()),!(t=$t[t]))throw new Bt(8);return t}function B(t){try{var e=z(t);if(null===e.oc)throw new Bt(8);e.Ac&&(e.Ac=null);try{e.hc.close&&e.hc.close(e)}catch(t){throw t}finally{$t[e.oc]=null}return e.oc=null,0}catch(t){return void 0!==Ut&&t instanceof Bt||i(t),t.qc}}function H(t,e,r,n){try{t:{for(var s=z(t),c=t=0;c<r;c++){var a=s,o=st[e+8*c>>2],_=st[e+(8*c+4)>>2],u=void 0,l=et;if(0>_||0>u)throw new Bt(28);if(null===a.oc)throw new Bt(8);if(0==(2097155&a.flags))throw new Bt(8);if(16384==(61440&a.node.mode))throw new Bt(31);if(!a.hc.write)throw new Bt(28);1024&a.flags&&$(a,0,2);var f=void 0!==u;if(f){if(!a.seekable)throw new Bt(70)}else u=a.position;var p=a.hc.write(a,l,o,_,u,void 0);f||(a.position+=p);try{a.path&&zt.onWriteToFile&&zt.onWriteToFile(a.path)}catch(t){console.log("FS.trackingDelegate['onWriteToFile']('"+a.path+"') threw an exception: "+t.message)}if(0>(a=p)){var h=-1;break t}t+=a}h=t}return st[n>>2]=h,0}catch(t){return void 0!==Ut&&t instanceof Bt||i(t),t.qc}}function G(){return et.length}function D(){function t(){if(!jt&&(jt=!0,!J)){if(U.noFSInit||Pt||(Pt=!0,M(),U.stdin=U.stdin,U.stdout=U.stdout,U.stderr=U.stderr,U.stdin?F("stdin",U.stdin):R("/dev/tty","/dev/stdin"),U.stdout?F("stdout",null,U.stdout):R("/dev/tty","/dev/stdout"),U.stderr?F("stderr",null,U.stderr):R("/dev/tty1","/dev/stderr"),k("/dev/stdin","r"),k("/dev/stdout","w"),k("/dev/stderr","w")),c(it),Lt=!1,c(ot),U.onRuntimeInitialized&&U.onRuntimeInitialized(),U.postRun)for("function"==typeof U.postRun&&(U.postRun=[U.postRun]);U.postRun.length;){var t=U.postRun.shift();_t.unshift(t)}c(_t)}}if(!(0<ht)){if(U.preRun)for("function"==typeof U.preRun&&(U.preRun=[U.preRun]);U.preRun.length;)a();c(at),0<ht||(U.setStatus?(U.setStatus("Running..."),setTimeout((function(){setTimeout((function(){U.setStatus("")}),1),t()}),1)):t())}}var U;e=e||{},U||(U=void 0!==e?e:{});var O,K={};for(O in U)U.hasOwnProperty(O)&&(K[O]=U[O]);var Y="";document.currentScript&&(Y=document.currentScript.src),t&&(Y=t),Y=0!==Y.indexOf("blob:")?Y.substr(0,Y.lastIndexOf("/")+1):"";var j=U.print||console.log.bind(console),W=U.printErr||console.warn.bind(console);for(O in K)K.hasOwnProperty(O)&&(U[O]=K[O]);K=null;var X,V={"f64-rem":function(t,e){return t%e},debugger:function(){}};U.wasmBinary&&(X=U.wasmBinary),"object"!=typeof WebAssembly&&W("no native wasm support detected");var q,Z=new WebAssembly.Table({initial:358,maximum:358,element:"anyfunc"}),J=!1,Q="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var tt,et,rt,nt,st,ct=U.TOTAL_MEMORY||16777216;(q=U.wasmMemory?U.wasmMemory:new WebAssembly.Memory({initial:ct/65536}))&&(tt=q.buffer),ct=tt.byteLength,s(tt),st[17656]=5313712;var at=[],it=[],ot=[],_t=[],ut=Math.abs,lt=Math.ceil,ft=Math.floor,pt=Math.min,ht=0,dt=null,mt=null;U.preloadedImages={},U.preloadedAudios={};var vt="libratchet.browser.wasm";if(!o()){var yt=vt;vt=U.locateFile?U.locateFile(yt,Y):Y+yt}U.asm=function(){function t(t){U.asm=t.exports,ht--,U.monitorRunDependencies&&U.monitorRunDependencies(ht),0==ht&&(null!==dt&&(clearInterval(dt),dt=null),mt&&(t=mt,mt=null,t()))}function e(e){t(e.instance)}function r(t){return(X||"function"!=typeof fetch?new Promise((function(t){t(_())})):fetch(vt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+vt+"'";return t.arrayBuffer()})).catch((function(){return _()}))).then((function(t){return WebAssembly.instantiate(t,n)})).then(t,(function(t){W("failed to asynchronously prepare wasm: "+t),i(t)}))}var n={env:Kt,wasi_unstable:Kt,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:V};if(ht++,U.monitorRunDependencies&&U.monitorRunDependencies(ht),U.instantiateWasm)try{return U.instantiateWasm(n,t)}catch(t){return W("Module.instantiateWasm callback failed with error: "+t),!1}return function(){if(X||"function"!=typeof WebAssembly.instantiateStreaming||o()||"function"!=typeof fetch)return r(e);fetch(vt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,n).then(e,(function(t){W("wasm streaming compile failed: "+t),W("falling back to ArrayBuffer instantiation"),r(e)}))}))}(),{}};var gt,wt,Pt,xt,Et,At,Nt,bt=[],Tt={open:function(t){var e=bt[t.node.xc];if(!e)throw new Bt(43);t.jc=e,t.seekable=!1},close:function(t){t.jc.sc.flush(t.jc)},flush:function(t){t.jc.sc.flush(t.jc)},read:function(t,e,r,n){if(!t.jc||!t.jc.sc.Ic)throw new Bt(60);for(var s=0,c=0;c<n;c++){try{var a=t.jc.sc.Ic(t.jc)}catch(t){throw new Bt(29)}if(void 0===a&&0===s)throw new Bt(6);if(null==a)break;s++,e[r+c]=a}return s&&(t.node.timestamp=Date.now()),s},write:function(t,e,r,n){if(!t.jc||!t.jc.sc.Bc)throw new Bt(60);try{for(var s=0;s<n;s++)t.jc.sc.Bc(t.jc,e[r+s])}catch(t){throw new Bt(29)}return n&&(t.node.timestamp=Date.now()),s}},Ct={Ic:function(t){if(!t.input.length){var e=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\n"):"function"==typeof readline&&(null!==(e=readline())&&(e+="\n")),!e)return null;for(var r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);55296<=s&&57343>=s&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++n)),127>=s?++r:r=2047>=s?r+2:65535>=s?r+3:r+4}var c=(r=Array(r+1)).length;if(n=0,0<c){s=n,c=n+c-1;for(var a=0;a<e.length;++a){var i=e.charCodeAt(a);if(55296<=i&&57343>=i)i=65536+((1023&i)<<10)|1023&e.charCodeAt(++a);if(127>=i){if(n>=c)break;r[n++]=i}else{if(2047>=i){if(n+1>=c)break;r[n++]=192|i>>6}else{if(65535>=i){if(n+2>=c)break;r[n++]=224|i>>12}else{if(n+3>=c)break;r[n++]=240|i>>18,r[n++]=128|i>>12&63}r[n++]=128|i>>6&63}r[n++]=128|63&i}}r[n]=0,e=n-s}else e=0;r.length=e,t.input=r}return t.input.shift()},Bc:function(t,e){null===e||10===e?(j(r(t.kc,0)),t.kc=[]):0!=e&&t.kc.push(e)},flush:function(t){t.kc&&0<t.kc.length&&(j(r(t.kc,0)),t.kc=[])}},It={Bc:function(t,e){null===e||10===e?(W(r(t.kc,0)),t.kc=[]):0!=e&&t.kc.push(e)},flush:function(t){t.kc&&0<t.kc.length&&(W(r(t.kc,0)),t.kc=[])}},Rt={lc:null,nc:function(){return Rt.createNode(null,"/",16895,0)},createNode:function(t,e,r,n){if(24576==(61440&r)||4096==(61440&r))throw new Bt(63);return Rt.lc||(Rt.lc={dir:{node:{pc:Rt.gc.pc,mc:Rt.gc.mc,tc:Rt.gc.tc,vc:Rt.gc.vc,Nc:Rt.gc.Nc,Pc:Rt.gc.Pc,Oc:Rt.gc.Oc,Mc:Rt.gc.Mc,yc:Rt.gc.yc},stream:{rc:Rt.hc.rc}},file:{node:{pc:Rt.gc.pc,mc:Rt.gc.mc},stream:{rc:Rt.hc.rc,read:Rt.hc.read,write:Rt.hc.write,Dc:Rt.hc.Dc,Jc:Rt.hc.Jc,Lc:Rt.hc.Lc}},link:{node:{pc:Rt.gc.pc,mc:Rt.gc.mc,uc:Rt.gc.uc},stream:{}},Ec:{node:{pc:Rt.gc.pc,mc:Rt.gc.mc},stream:Dt}}),16384==(61440&(r=w(t,e,r,n)).mode)?(r.gc=Rt.lc.dir.node,r.hc=Rt.lc.dir.stream,r.fc={}):32768==(61440&r.mode)?(r.gc=Rt.lc.file.node,r.hc=Rt.lc.file.stream,r.ic=0,r.fc=null):40960==(61440&r.mode)?(r.gc=Rt.lc.link.node,r.hc=Rt.lc.link.stream):8192==(61440&r.mode)&&(r.gc=Rt.lc.Ec.node,r.hc=Rt.lc.Ec.stream),r.timestamp=Date.now(),t&&(t.fc[e]=r),r},cd:function(t){if(t.fc&&t.fc.subarray){for(var e=[],r=0;r<t.ic;++r)e.push(t.fc[r]);return e}return t.fc},dd:function(t){return t.fc?t.fc.subarray?t.fc.subarray(0,t.ic):new Uint8Array(t.fc):new Uint8Array},Fc:function(t,e){var r=t.fc?t.fc.length:0;r>=e||(e=Math.max(e,r*(1048576>r?2:1.125)|0),0!=r&&(e=Math.max(e,256)),r=t.fc,t.fc=new Uint8Array(e),0<t.ic&&t.fc.set(r.subarray(0,t.ic),0))},Uc:function(t,e){if(t.ic!=e)if(0==e)t.fc=null,t.ic=0;else{if(!t.fc||t.fc.subarray){var r=t.fc;t.fc=new Uint8Array(new ArrayBuffer(e)),r&&t.fc.set(r.subarray(0,Math.min(e,t.ic)))}else if(t.fc||(t.fc=[]),t.fc.length>e)t.fc.length=e;else for(;t.fc.length<e;)t.fc.push(0);t.ic=e}},gc:{pc:function(t){var e={};return e.ad=8192==(61440&t.mode)?t.id:1,e.fd=t.id,e.mode=t.mode,e.hd=1,e.uid=0,e.ed=0,e.xc=t.xc,16384==(61440&t.mode)?e.size=4096:32768==(61440&t.mode)?e.size=t.ic:40960==(61440&t.mode)?e.size=t.link.length:e.size=0,e.Yc=new Date(t.timestamp),e.gd=new Date(t.timestamp),e.$c=new Date(t.timestamp),e.Qc=4096,e.Zc=Math.ceil(e.size/e.Qc),e},mc:function(t,e){void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.size&&Rt.Uc(t,e.size)},tc:function(){throw Ht[44]},vc:function(t,e,r,n){return Rt.createNode(t,e,r,n)},Nc:function(t,e,r){if(16384==(61440&t.mode)){try{var n=g(e,r)}catch(t){}if(n)for(var s in n.fc)throw new Bt(55)}delete t.parent.fc[t.name],t.name=r,e.fc[r]=t,t.parent=e},Pc:function(t,e){delete t.fc[e]},Oc:function(t,e){var r,n=g(t,e);for(r in n.fc)throw new Bt(55);delete t.fc[e]},Mc:function(t){var e,r=[".",".."];for(e in t.fc)t.fc.hasOwnProperty(e)&&r.push(e);return r},yc:function(t,e,r){return(t=Rt.createNode(t,e,41471,0)).link=r,t},uc:function(t){if(40960!=(61440&t.mode))throw new Bt(28);return t.link}},hc:{read:function(t,e,r,n,s){var c=t.node.fc;if(s>=t.node.ic)return 0;if(8<(t=Math.min(t.node.ic-s,n))&&c.subarray)e.set(c.subarray(s,s+t),r);else for(n=0;n<t;n++)e[r+n]=c[s+n];return t},write:function(t,e,r,n,s,c){if(c=!1,!n)return 0;if((t=t.node).timestamp=Date.now(),e.subarray&&(!t.fc||t.fc.subarray)){if(c)return t.fc=e.subarray(r,r+n),t.ic=n;if(0===t.ic&&0===s)return t.fc=new Uint8Array(e.subarray(r,r+n)),t.ic=n;if(s+n<=t.ic)return t.fc.set(e.subarray(r,r+n),s),n}if(Rt.Fc(t,s+n),t.fc.subarray&&e.subarray)t.fc.set(e.subarray(r,r+n),s);else for(c=0;c<n;c++)t.fc[s+c]=e[r+c];return t.ic=Math.max(t.ic,s+n),n},rc:function(t,e,r){if(1===r?e+=t.position:2===r&&32768==(61440&t.node.mode)&&(e+=t.node.ic),0>e)throw new Bt(28);return e},Dc:function(t,e,r){Rt.Fc(t.node,e+r),t.node.ic=Math.max(t.node.ic,e+r)},Jc:function(t,e,r,n,s,c,a){if(32768!=(61440&t.node.mode))throw new Bt(43);if(r=t.node.fc,2&a||r.buffer!==e&&r.buffer!==e.buffer){if((0<s||s+n<t.node.ic)&&(r=r.subarray?r.subarray(s,s+n):Array.prototype.slice.call(r,s,s+n)),t=!0,s=e.buffer==et.buffer,!(n=Wt(n)))throw new Bt(48);(s?et:e).set(r,n)}else t=!1,n=r.byteOffset;return{kd:n,Xc:t}},Lc:function(t,e,r,n,s){if(32768!=(61440&t.node.mode))throw new Bt(43);return 2&s?0:(Rt.hc.write(t,e,0,n,r,!1),0)}}},St=null,kt={},$t=[],Mt=1,Ft=null,Lt=!0,zt={},Bt=null,Ht={},Gt={r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},Dt={open:function(t){t.hc=kt[t.node.xc].hc,t.hc.open&&t.hc.open(t)},rc:function(){throw new Bt(70)}},Ut={},Ot=0;M(),Ft=Array(4096),b(Rt,"/"),C("/tmp"),C("/home"),C("/home/web_user"),function(){if(C("/dev"),N(259,{read:function(){return 0},write:function(t,e,r,n){return n}}),I("/dev/null",259),d(1280,Ct),d(1536,It),I("/dev/tty",1280),I("/dev/tty1",1536),"object"==typeof crypto&&"function"==typeof crypto.getRandomValues)var t=new Uint8Array(1),e=function(){return crypto.getRandomValues(t),t[0]};e||(e=function(){i("random_device")}),F("random",e),F("urandom",e),C("/dev/shm"),C("/dev/shm/tmp")}(),C("/proc"),C("/proc/self"),C("/proc/self/fd"),b({nc:function(){var t=w("/proc/self","fd",16895,73);return t.gc={tc:function(t,e){var r=$t[+e];if(!r)throw new Bt(8);return(t={parent:null,nc:{Kc:"fake"},gc:{uc:function(){return r.path}}}).parent=t}},t}},"/proc/self/fd");var Kt={c:function(){},k:function(t,e){Ot=e;try{var r=z(),n=L(),s=L(),c=L(),a=L();return-9007199254740992>=(t=4294967296*n+(s>>>0))||9007199254740992<=t?-61:($(r,t,a),wt=[r.position>>>0,(gt=r.position,1<=+ut(gt)?0<gt?(0|pt(+ft(gt/4294967296),4294967295))>>>0:~~+lt((gt-+(~~gt>>>0))/4294967296)>>>0:0)],st[c>>2]=wt[0],st[c+4>>2]=wt[1],r.Ac&&0===t&&0===a&&(r.Ac=null),0)}catch(t){return void 0!==Ut&&t instanceof Bt||i(t),-t.qc}},j:function(t,e){Ot=e;try{var r=z(),n=L();t:{var s=L();for(e=t=0;e<s;e++){var c=st[n+(8*e+4)>>2],a=r,o=st[n+8*e>>2],_=c,u=void 0,l=et;if(0>_||0>u)throw new Bt(28);if(null===a.oc)throw new Bt(8);if(1==(2097155&a.flags))throw new Bt(8);if(16384==(61440&a.node.mode))throw new Bt(31);if(!a.hc.read)throw new Bt(28);var f=void 0!==u;if(f){if(!a.seekable)throw new Bt(70)}else u=a.position;var p=a.hc.read(a,l,o,_,u);if(f||(a.position+=p),0>(a=p)){var h=-1;break t}if(t+=a,a<c)break}h=t}return h}catch(t){return void 0!==Ut&&t instanceof Bt||i(t),-t.qc}},e:function(t,e){Ot=e;try{var r=z();switch(L()){case 0:var n=L();return 0>n?-28:k(r.path,r.flags,0,n).oc;case 1:case 2:return 0;case 3:return r.flags;case 4:return n=L(),r.flags|=n,0;case 12:return n=L(),nt[n+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return U.___errno_location&&(st[U.___errno_location()>>2]=28),-1;default:return-28}}catch(t){return void 0!==Ut&&t instanceof Bt||i(t),-t.qc}},i:function(t,e){Ot=e;try{var n=L();return k(n?r(rt,n,void 0):"",L(),L()).oc}catch(t){return void 0!==Ut&&t instanceof Bt||i(t),-t.qc}},h:function(t,e){Ot=e;try{var r=z(),n=L();switch(n){case 21509:case 21505:return r.jc?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return r.jc?0:-59;case 21519:if(!r.jc)return-59;var s=L();return st[s>>2]=0;case 21520:return r.jc?-28:-59;case 21531:if(t=L(),!r.hc.Rc)throw new Bt(59);return r.hc.Rc(r,n,t);case 21523:case 21524:return r.jc?0:-59;default:i("bad ioctl syscall "+n)}}catch(t){return void 0!==Ut&&t instanceof Bt||i(t),-t.qc}},b:function(){},d:function(){return B.apply(null,arguments)},g:function(){return H.apply(null,arguments)},__memory_base:1024,__table_base:0,o:function(){i()},n:G,m:function(t,e,r){rt.set(rt.subarray(e,e+r),t)},l:function(t){if(2147418112<t)return!1;for(var e=Math.max(G(),16777216);e<t;)e=536870912>=e?n(2*e):Math.min(n((3*e+2147483648)/4),2147418112);t:{try{q.grow(e-tt.byteLength+65535>>16),s(q.buffer),t=1;break t}catch(t){}t=void 0}return!!t},f:function(t){var e=Date.now();return st[t>>2]=e/1e3|0,st[t+4>>2]=e%1e3*1e3|0,0},a:i,memory:q,table:Z},Yt=U.asm({},Kt,tt);U.asm=Yt,U.___errno_location=function(){return U.asm.p.apply(null,arguments)},U._free=function(){return U.asm.q.apply(null,arguments)};var jt,Wt=U._malloc=function(){return U.asm.r.apply(null,arguments)};if(U._vsc_buffer_bytes=function(){return U.asm.s.apply(null,arguments)},U._vsc_buffer_data=function(){return U.asm.t.apply(null,arguments)},U._vsc_buffer_delete=function(){return U.asm.u.apply(null,arguments)},U._vsc_buffer_len=function(){return U.asm.v.apply(null,arguments)},U._vsc_buffer_make_secure=function(){return U.asm.w.apply(null,arguments)},U._vsc_buffer_new=function(){return U.asm.x.apply(null,arguments)},U._vsc_buffer_new_with_capacity=function(){return U.asm.y.apply(null,arguments)},U._vsc_data=function(){return U.asm.z.apply(null,arguments)},U._vsc_data_bytes=function(){return U.asm.A.apply(null,arguments)},U._vsc_data_ctx_size=function(){return U.asm.B.apply(null,arguments)},U._vsc_data_len=function(){return U.asm.C.apply(null,arguments)},U._vscf_ctr_drbg_delete=function(){return U.asm.D.apply(null,arguments)},U._vscf_ctr_drbg_enable_prediction_resistance=function(){return U.asm.E.apply(null,arguments)},U._vscf_ctr_drbg_new=function(){return U.asm.F.apply(null,arguments)},U._vscf_ctr_drbg_random=function(){return U.asm.G.apply(null,arguments)},U._vscf_ctr_drbg_release_entropy_source=function(){return U.asm.H.apply(null,arguments)},U._vscf_ctr_drbg_reseed=function(){return U.asm.I.apply(null,arguments)},U._vscf_ctr_drbg_set_entropy_len=function(){return U.asm.J.apply(null,arguments)},U._vscf_ctr_drbg_set_reseed_interval=function(){return U.asm.K.apply(null,arguments)},U._vscf_ctr_drbg_setup_defaults=function(){return U.asm.L.apply(null,arguments)},U._vscf_ctr_drbg_shallow_copy=function(){return U.asm.M.apply(null,arguments)},U._vscf_ctr_drbg_use_entropy_source=function(){return U.asm.N.apply(null,arguments)},U._vscf_error_ctx_size=function(){return U.asm.O.apply(null,arguments)},U._vscf_error_reset=function(){return U.asm.P.apply(null,arguments)},U._vscf_error_status=function(){return U.asm.Q.apply(null,arguments)},U._vscf_hkdf_alg_id=function(){return U.asm.R.apply(null,arguments)},U._vscf_hkdf_delete=function(){return U.asm.S.apply(null,arguments)},U._vscf_hkdf_derive=function(){return U.asm.T.apply(null,arguments)},U._vscf_hkdf_new=function(){return U.asm.U.apply(null,arguments)},U._vscf_hkdf_produce_alg_info=function(){return U.asm.V.apply(null,arguments)},U._vscf_hkdf_release_hash=function(){return U.asm.W.apply(null,arguments)},U._vscf_hkdf_reset=function(){return U.asm.X.apply(null,arguments)},U._vscf_hkdf_restore_alg_info=function(){return U.asm.Y.apply(null,arguments)},U._vscf_hkdf_set_info=function(){return U.asm.Z.apply(null,arguments)},U._vscf_hkdf_shallow_copy=function(){return U.asm._.apply(null,arguments)},U._vscf_hkdf_use_hash=function(){return U.asm.$.apply(null,arguments)},U._vscf_hmac_alg_id=function(){return U.asm.aa.apply(null,arguments)},U._vscf_hmac_delete=function(){return U.asm.ba.apply(null,arguments)},U._vscf_hmac_digest_len=function(){return U.asm.ca.apply(null,arguments)},U._vscf_hmac_finish=function(){return U.asm.da.apply(null,arguments)},U._vscf_hmac_mac=function(){return U.asm.ea.apply(null,arguments)},U._vscf_hmac_new=function(){return U.asm.fa.apply(null,arguments)},U._vscf_hmac_produce_alg_info=function(){return U.asm.ga.apply(null,arguments)},U._vscf_hmac_release_hash=function(){return U.asm.ha.apply(null,arguments)},U._vscf_hmac_reset=function(){return U.asm.ia.apply(null,arguments)},U._vscf_hmac_restore_alg_info=function(){return U.asm.ja.apply(null,arguments)},U._vscf_hmac_shallow_copy=function(){return U.asm.ka.apply(null,arguments)},U._vscf_hmac_start=function(){return U.asm.la.apply(null,arguments)},U._vscf_hmac_update=function(){return U.asm.ma.apply(null,arguments)},U._vscf_hmac_use_hash=function(){return U.asm.na.apply(null,arguments)},U._vscf_impl_api=function(){return U.asm.oa.apply(null,arguments)},U._vscf_impl_shallow_copy=function(){return U.asm.pa.apply(null,arguments)},U._vscf_impl_tag=function(){return U.asm.qa.apply(null,arguments)},U._vscf_sha512_alg_id=function(){return U.asm.ra.apply(null,arguments)},U._vscf_sha512_delete=function(){return U.asm.sa.apply(null,arguments)},U._vscf_sha512_finish=function(){return U.asm.ta.apply(null,arguments)},U._vscf_sha512_hash=function(){return U.asm.ua.apply(null,arguments)},U._vscf_sha512_new=function(){return U.asm.va.apply(null,arguments)},U._vscf_sha512_produce_alg_info=function(){return U.asm.wa.apply(null,arguments)},U._vscf_sha512_restore_alg_info=function(){return U.asm.xa.apply(null,arguments)},U._vscf_sha512_shallow_copy=function(){return U.asm.ya.apply(null,arguments)},U._vscf_sha512_start=function(){return U.asm.za.apply(null,arguments)},U._vscf_sha512_update=function(){return U.asm.Aa.apply(null,arguments)},U._vscr_error_ctx_size=function(){return U.asm.Ba.apply(null,arguments)},U._vscr_error_reset=function(){return U.asm.Ca.apply(null,arguments)},U._vscr_error_status=function(){return U.asm.Da.apply(null,arguments)},U._vscr_ratchet_group_message_delete=function(){return U.asm.Ea.apply(null,arguments)},U._vscr_ratchet_group_message_deserialize=function(){return U.asm.Fa.apply(null,arguments)},U._vscr_ratchet_group_message_get_counter=function(){return U.asm.Ga.apply(null,arguments)},U._vscr_ratchet_group_message_get_epoch=function(){return U.asm.Ha.apply(null,arguments)},U._vscr_ratchet_group_message_get_session_id=function(){return U.asm.Ia.apply(null,arguments)},U._vscr_ratchet_group_message_get_type=function(){return U.asm.Ja.apply(null,arguments)},U._vscr_ratchet_group_message_new=function(){return U.asm.Ka.apply(null,arguments)},U._vscr_ratchet_group_message_serialize=function(){return U.asm.La.apply(null,arguments)},U._vscr_ratchet_group_message_serialize_len=function(){return U.asm.Ma.apply(null,arguments)},U._vscr_ratchet_group_message_shallow_copy=function(){return U.asm.Na.apply(null,arguments)},U._vscr_ratchet_group_participants_ids_add_id=function(){return U.asm.Oa.apply(null,arguments)},U._vscr_ratchet_group_participants_ids_delete=function(){return U.asm.Pa.apply(null,arguments)},U._vscr_ratchet_group_participants_ids_new=function(){return U.asm.Qa.apply(null,arguments)},U._vscr_ratchet_group_participants_ids_new_size=function(){return U.asm.Ra.apply(null,arguments)},U._vscr_ratchet_group_participants_ids_shallow_copy=function(){return U.asm.Sa.apply(null,arguments)},U._vscr_ratchet_group_participants_info_add_participant=function(){return U.asm.Ta.apply(null,arguments)},U._vscr_ratchet_group_participants_info_delete=function(){return U.asm.Ua.apply(null,arguments)},U._vscr_ratchet_group_participants_info_new=function(){return U.asm.Va.apply(null,arguments)},U._vscr_ratchet_group_participants_info_new_size=function(){return U.asm.Wa.apply(null,arguments)},U._vscr_ratchet_group_participants_info_shallow_copy=function(){return U.asm.Xa.apply(null,arguments)},U._vscr_ratchet_group_session_create_group_ticket=function(){return U.asm.Ya.apply(null,arguments)},U._vscr_ratchet_group_session_decrypt=function(){return U.asm.Za.apply(null,arguments)},U._vscr_ratchet_group_session_decrypt_len=function(){return U.asm._a.apply(null,arguments)},U._vscr_ratchet_group_session_delete=function(){return U.asm.$a.apply(null,arguments)},U._vscr_ratchet_group_session_deserialize=function(){return U.asm.ab.apply(null,arguments)},U._vscr_ratchet_group_session_encrypt=function(){return U.asm.bb.apply(null,arguments)},U._vscr_ratchet_group_session_get_current_epoch=function(){return U.asm.cb.apply(null,arguments)},U._vscr_ratchet_group_session_get_my_id=function(){return U.asm.db.apply(null,arguments)},U._vscr_ratchet_group_session_get_participants_count=function(){return U.asm.eb.apply(null,arguments)},U._vscr_ratchet_group_session_get_session_id=function(){return U.asm.fb.apply(null,arguments)},U._vscr_ratchet_group_session_is_initialized=function(){return U.asm.gb.apply(null,arguments)},U._vscr_ratchet_group_session_is_my_id_set=function(){return U.asm.hb.apply(null,arguments)},U._vscr_ratchet_group_session_is_private_key_set=function(){return U.asm.ib.apply(null,arguments)},U._vscr_ratchet_group_session_new=function(){return U.asm.jb.apply(null,arguments)},U._vscr_ratchet_group_session_release_rng=function(){return U.asm.kb.apply(null,arguments)},U._vscr_ratchet_group_session_serialize=function(){return U.asm.lb.apply(null,arguments)},U._vscr_ratchet_group_session_set_my_id=function(){return U.asm.mb.apply(null,arguments)},U._vscr_ratchet_group_session_set_private_key=function(){return U.asm.nb.apply(null,arguments)},U._vscr_ratchet_group_session_setup_defaults=function(){return U.asm.ob.apply(null,arguments)},U._vscr_ratchet_group_session_setup_session_state=function(){return U.asm.pb.apply(null,arguments)},U._vscr_ratchet_group_session_shallow_copy=function(){return U.asm.qb.apply(null,arguments)},U._vscr_ratchet_group_session_update_session_state=function(){return U.asm.rb.apply(null,arguments)},U._vscr_ratchet_group_session_use_rng=function(){return U.asm.sb.apply(null,arguments)},U._vscr_ratchet_group_ticket_delete=function(){return U.asm.tb.apply(null,arguments)},U._vscr_ratchet_group_ticket_get_ticket_message=function(){return U.asm.ub.apply(null,arguments)},U._vscr_ratchet_group_ticket_new=function(){return U.asm.vb.apply(null,arguments)},U._vscr_ratchet_group_ticket_release_rng=function(){return U.asm.wb.apply(null,arguments)},U._vscr_ratchet_group_ticket_setup_defaults=function(){return U.asm.xb.apply(null,arguments)},U._vscr_ratchet_group_ticket_setup_ticket_as_new=function(){return U.asm.yb.apply(null,arguments)},U._vscr_ratchet_group_ticket_shallow_copy=function(){return U.asm.zb.apply(null,arguments)},U._vscr_ratchet_group_ticket_use_rng=function(){return U.asm.Ab.apply(null,arguments)},U._vscr_ratchet_key_id_compute_public_key_id=function(){return U.asm.Bb.apply(null,arguments)},U._vscr_ratchet_key_id_delete=function(){return U.asm.Cb.apply(null,arguments)},U._vscr_ratchet_key_id_new=function(){return U.asm.Db.apply(null,arguments)},U._vscr_ratchet_key_id_shallow_copy=function(){return U.asm.Eb.apply(null,arguments)},U._vscr_ratchet_message_delete=function(){return U.asm.Fb.apply(null,arguments)},U._vscr_ratchet_message_deserialize=function(){return U.asm.Gb.apply(null,arguments)},U._vscr_ratchet_message_get_counter=function(){return U.asm.Hb.apply(null,arguments)},U._vscr_ratchet_message_get_long_term_public_key=function(){return U.asm.Ib.apply(null,arguments)},U._vscr_ratchet_message_get_one_time_public_key=function(){return U.asm.Jb.apply(null,arguments)},U._vscr_ratchet_message_get_type=function(){return U.asm.Kb.apply(null,arguments)},U._vscr_ratchet_message_new=function(){return U.asm.Lb.apply(null,arguments)},U._vscr_ratchet_message_serialize=function(){return U.asm.Mb.apply(null,arguments)},U._vscr_ratchet_message_serialize_len=function(){return U.asm.Nb.apply(null,arguments)},U._vscr_ratchet_message_shallow_copy=function(){return U.asm.Ob.apply(null,arguments)},U._vscr_ratchet_session_decrypt=function(){return U.asm.Pb.apply(null,arguments)},U._vscr_ratchet_session_decrypt_len=function(){return U.asm.Qb.apply(null,arguments)},U._vscr_ratchet_session_delete=function(){return U.asm.Rb.apply(null,arguments)},U._vscr_ratchet_session_deserialize=function(){return U.asm.Sb.apply(null,arguments)},U._vscr_ratchet_session_encrypt=function(){return U.asm.Tb.apply(null,arguments)},U._vscr_ratchet_session_initiate=function(){return U.asm.Ub.apply(null,arguments)},U._vscr_ratchet_session_is_initiator=function(){return U.asm.Vb.apply(null,arguments)},U._vscr_ratchet_session_new=function(){return U.asm.Wb.apply(null,arguments)},U._vscr_ratchet_session_received_first_response=function(){return U.asm.Xb.apply(null,arguments)},U._vscr_ratchet_session_receiver_has_one_time_public_key=function(){return U.asm.Yb.apply(null,arguments)},U._vscr_ratchet_session_release_rng=function(){return U.asm.Zb.apply(null,arguments)},U._vscr_ratchet_session_respond=function(){return U.asm._b.apply(null,arguments)},U._vscr_ratchet_session_serialize=function(){return U.asm.$b.apply(null,arguments)},U._vscr_ratchet_session_setup_defaults=function(){return U.asm.ac.apply(null,arguments)},U._vscr_ratchet_session_shallow_copy=function(){return U.asm.bc.apply(null,arguments)},U._vscr_ratchet_session_use_rng=function(){return U.asm.cc.apply(null,arguments)},U.stackAlloc=function(){return U.asm.ec.apply(null,arguments)},U.dynCall_vi=function(){return U.asm.dc.apply(null,arguments)},U.asm=Yt,U.then=function(t){if(jt)t(U);else{var e=U.onRuntimeInitialized;U.onRuntimeInitialized=function(){e&&e(),t(U)}}return U},mt=function t(){jt||D(),jt||(mt=t)},U.run=D,U.preInit)for("function"==typeof U.preInit&&(U.preInit=[U.preInit]);0<U.preInit.length;)U.preInit.pop()();return D(),e}}(),t.exports=e}));let initFoundationInterface=(t,e)=>{return class{static newAndTakeCContext(r){const n=t._vscf_impl_tag(r);switch(n){case e.FoundationImplTag.SHA224:return e.Sha224.newAndTakeCContext(r);case e.FoundationImplTag.SHA256:return e.Sha256.newAndTakeCContext(r);case e.FoundationImplTag.SHA384:return e.Sha384.newAndTakeCContext(r);case e.FoundationImplTag.SHA512:return e.Sha512.newAndTakeCContext(r);case e.FoundationImplTag.AES256_GCM:return e.Aes256Gcm.newAndTakeCContext(r);case e.FoundationImplTag.AES256_CBC:return e.Aes256Cbc.newAndTakeCContext(r);case e.FoundationImplTag.ASN1RD:return e.Asn1rd.newAndTakeCContext(r);case e.FoundationImplTag.ASN1WR:return e.Asn1wr.newAndTakeCContext(r);case e.FoundationImplTag.RSA_PUBLIC_KEY:return e.RsaPublicKey.newAndTakeCContext(r);case e.FoundationImplTag.RSA_PRIVATE_KEY:return e.RsaPrivateKey.newAndTakeCContext(r);case e.FoundationImplTag.RSA:return e.Rsa.newAndTakeCContext(r);case e.FoundationImplTag.ECC_PUBLIC_KEY:return e.EccPublicKey.newAndTakeCContext(r);case e.FoundationImplTag.ECC_PRIVATE_KEY:return e.EccPrivateKey.newAndTakeCContext(r);case e.FoundationImplTag.ECC:return e.Ecc.newAndTakeCContext(r);case e.FoundationImplTag.ENTROPY_ACCUMULATOR:return e.EntropyAccumulator.newAndTakeCContext(r);case e.FoundationImplTag.CTR_DRBG:return e.CtrDrbg.newAndTakeCContext(r);case e.FoundationImplTag.HMAC:return e.Hmac.newAndTakeCContext(r);case e.FoundationImplTag.HKDF:return e.Hkdf.newAndTakeCContext(r);case e.FoundationImplTag.KDF1:return e.Kdf1.newAndTakeCContext(r);case e.FoundationImplTag.KDF2:return e.Kdf2.newAndTakeCContext(r);case e.FoundationImplTag.FAKE_RANDOM:return e.FakeRandom.newAndTakeCContext(r);case e.FoundationImplTag.PKCS5_PBKDF2:return e.Pkcs5Pbkdf2.newAndTakeCContext(r);case e.FoundationImplTag.PKCS5_PBES2:return e.Pkcs5Pbes2.newAndTakeCContext(r);case e.FoundationImplTag.SEED_ENTROPY_SOURCE:return e.SeedEntropySource.newAndTakeCContext(r);case e.FoundationImplTag.KEY_MATERIAL_RNG:return e.KeyMaterialRng.newAndTakeCContext(r);case e.FoundationImplTag.RAW_PUBLIC_KEY:return e.RawPublicKey.newAndTakeCContext(r);case e.FoundationImplTag.RAW_PRIVATE_KEY:return e.RawPrivateKey.newAndTakeCContext(r);case e.FoundationImplTag.PKCS8_SERIALIZER:return e.Pkcs8Serializer.newAndTakeCContext(r);case e.FoundationImplTag.SEC1_SERIALIZER:return e.Sec1Serializer.newAndTakeCContext(r);case e.FoundationImplTag.KEY_ASN1_SERIALIZER:return e.KeyAsn1Serializer.newAndTakeCContext(r);case e.FoundationImplTag.KEY_ASN1_DESERIALIZER:return e.KeyAsn1Deserializer.newAndTakeCContext(r);case e.FoundationImplTag.ED25519:return e.Ed25519.newAndTakeCContext(r);case e.FoundationImplTag.CURVE25519:return e.Curve25519.newAndTakeCContext(r);case e.FoundationImplTag.SIMPLE_ALG_INFO:return e.SimpleAlgInfo.newAndTakeCContext(r);case e.FoundationImplTag.HASH_BASED_ALG_INFO:return e.HashBasedAlgInfo.newAndTakeCContext(r);case e.FoundationImplTag.CIPHER_ALG_INFO:return e.CipherAlgInfo.newAndTakeCContext(r);case e.FoundationImplTag.SALTED_KDF_ALG_INFO:return e.SaltedKdfAlgInfo.newAndTakeCContext(r);case e.FoundationImplTag.PBE_ALG_INFO:return e.PbeAlgInfo.newAndTakeCContext(r);case e.FoundationImplTag.ECC_ALG_INFO:return e.EccAlgInfo.newAndTakeCContext(r);case e.FoundationImplTag.ALG_INFO_DER_SERIALIZER:return e.AlgInfoDerSerializer.newAndTakeCContext(r);case e.FoundationImplTag.ALG_INFO_DER_DESERIALIZER:return e.AlgInfoDerDeserializer.newAndTakeCContext(r);case e.FoundationImplTag.MESSAGE_INFO_DER_SERIALIZER:return e.MessageInfoDerSerializer.newAndTakeCContext(r);default:throw Error("Unexpected implementation tag found: "+n)}}static newAndUseCContext(r){return new e.FoundationInterface.newAndTakeCContext(t._vscf_impl_shallow_copy(r))}static isImplemented(e,r){return 0!=t._vscf_impl_api(e,r)}}};var FoundationInterface=initFoundationInterface;function ensureNumber(t,e){if(!("number"==typeof e||e instanceof Number))throw new TypeError(`'${t}' is not a number`);if(Number.isNaN(e))throw new TypeError(`'${t}' is NaN`);if(1/0===e)throw new TypeError(`'${t}' is Infinity`);if(-1/0===e)throw new TypeError(`'${t}' is -Infinity`)}function ensureNotNull(t,e){if(ensureNumber(t,e),0==e)throw new TypeError(`'${t}' is NULL`)}function ensureString(t,e){if(!("string"==typeof e||e instanceof String))throw new TypeError(`'${t}' is not a string`)}function ensureBoolean(t,e){if("boolean"!=typeof e)throw new TypeError(`'${t}' is not a boolean`)}function ensureByteArray(t,e){if(!(e instanceof Uint8Array))throw new TypeError(`'${t}' is not an Uint8Array`)}function ensureClass(t,e,r){if(!(e instanceof r))throw new TypeError(`'${t}' is not an instance of the class ${r.name}`);ensureNotNull(t,e.ctxPtr)}function ensureImplementInterface(t,e,r,n,s){if(ensureNotNull(t,e.ctxPtr),!s.isImplemented(e.ctxPtr,n))throw new TypeError(`'${t}' does not implement interface '${r}'`)}var ensureNumber_1=ensureNumber,ensureString_1=ensureString,ensureBoolean_1=ensureBoolean,ensureByteArray_1=ensureByteArray,ensureClass_1=ensureClass,ensureNotNull_1=ensureNotNull,ensureImplementInterface_1=ensureImplementInterface,precondition={ensureNumber:ensureNumber_1,ensureString:ensureString_1,ensureBoolean:ensureBoolean_1,ensureByteArray:ensureByteArray_1,ensureClass:ensureClass_1,ensureNotNull:ensureNotNull_1,ensureImplementInterface:ensureImplementInterface_1};let initCtrDrbg=(t,e)=>{class r{static get RESEED_INTERVAL(){return 1e4}get RESEED_INTERVAL(){return r.RESEED_INTERVAL}static get ENTROPY_LEN(){return 48}get ENTROPY_LEN(){return r.ENTROPY_LEN}constructor(e){this.name="CtrDrbg",this.ctxPtr=void 0===e?t._vscf_ctr_drbg_new():e}static newAndUseCContext(e){return new r(t._vscf_ctr_drbg_shallow_copy(e))}static newAndTakeCContext(t){return new r(t)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(t._vscf_ctr_drbg_delete(this.ctxPtr),this.ctxPtr=null)}set entropySource(r){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureImplementInterface("entropySource",r,"Foundation.EntropySource",e.FoundationInterfaceTag.ENTROPY_SOURCE,e.FoundationInterface),t._vscf_ctr_drbg_release_entropy_source(this.ctxPtr),r=t._vscf_ctr_drbg_use_entropy_source(this.ctxPtr,r.ctxPtr),e.FoundationError.handleStatusCode(r)}random(r){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureNumber("dataLen",r);const n=t._vsc_buffer_new_with_capacity(r);try{const s=t._vscf_ctr_drbg_random(this.ctxPtr,r,n);e.FoundationError.handleStatusCode(s);const c=t._vsc_buffer_bytes(n),a=t._vsc_buffer_len(n);return t.HEAPU8.slice(c,c+a)}finally{t._vsc_buffer_delete(n)}}reseed(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=t._vscf_ctr_drbg_reseed(this.ctxPtr);e.FoundationError.handleStatusCode(r)}setupDefaults(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=t._vscf_ctr_drbg_setup_defaults(this.ctxPtr);e.FoundationError.handleStatusCode(r)}enablePredictionResistance(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),t._vscf_ctr_drbg_enable_prediction_resistance(this.ctxPtr)}setReseedInterval(e){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureNumber("interval",e),t._vscf_ctr_drbg_set_reseed_interval(this.ctxPtr,e)}setEntropyLen(e){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureNumber("len",e),t._vscf_ctr_drbg_set_entropy_len(this.ctxPtr,e)}}return r};var CtrDrbg=initCtrDrbg;let initHmac=(t,e)=>{class r{constructor(e){this.name="Hmac",this.ctxPtr=void 0===e?t._vscf_hmac_new():e}static newAndUseCContext(e){return new r(t._vscf_hmac_shallow_copy(e))}static newAndTakeCContext(t){return new r(t)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(t._vscf_hmac_delete(this.ctxPtr),this.ctxPtr=null)}set hash(r){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureImplementInterface("hash",r,"Foundation.Hash",e.FoundationInterfaceTag.HASH,e.FoundationInterface),t._vscf_hmac_release_hash(this.ctxPtr),t._vscf_hmac_use_hash(this.ctxPtr,r.ctxPtr)}algId(){return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),t._vscf_hmac_alg_id(this.ctxPtr)}produceAlgInfo(){let r;return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),r=t._vscf_hmac_produce_alg_info(this.ctxPtr),e.FoundationInterface.newAndTakeCContext(r)}restoreAlgInfo(r){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureImplementInterface("algInfo",r,"Foundation.AlgInfo",e.FoundationInterfaceTag.ALG_INFO,e.FoundationInterface),r=t._vscf_hmac_restore_alg_info(this.ctxPtr,r.ctxPtr),e.FoundationError.handleStatusCode(r)}digestLen(){return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),t._vscf_hmac_digest_len(this.ctxPtr)}mac(e,r){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("key",e),precondition.ensureByteArray("data",r);var n=e.length*e.BYTES_PER_ELEMENT;const s=t._malloc(n);t.HEAP8.set(e,s),e=t._vsc_data_ctx_size(),e=t._malloc(e),t._vsc_data(e,s,n);var c=r.length*r.BYTES_PER_ELEMENT;n=t._malloc(c),t.HEAP8.set(r,n),r=t._vsc_data_ctx_size(),r=t._malloc(r),t._vsc_data(r,n,c),c=this.digestLen(),c=t._vsc_buffer_new_with_capacity(c);try{t._vscf_hmac_mac(this.ctxPtr,e,r,c);const n=t._vsc_buffer_bytes(c),a=t._vsc_buffer_len(c);return t.HEAPU8.slice(n,n+a)}finally{t._free(s),t._free(e),t._free(n),t._free(r),t._vsc_buffer_delete(c)}}start(e){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("key",e);const r=e.length*e.BYTES_PER_ELEMENT,n=t._malloc(r);t.HEAP8.set(e,n),e=t._vsc_data_ctx_size(),e=t._malloc(e),t._vsc_data(e,n,r);try{t._vscf_hmac_start(this.ctxPtr,e)}finally{t._free(n),t._free(e)}}update(e){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("data",e);const r=e.length*e.BYTES_PER_ELEMENT,n=t._malloc(r);t.HEAP8.set(e,n),e=t._vsc_data_ctx_size(),e=t._malloc(e),t._vsc_data(e,n,r);try{t._vscf_hmac_update(this.ctxPtr,e)}finally{t._free(n),t._free(e)}}finish(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr);var e=this.digestLen();e=t._vsc_buffer_new_with_capacity(e);try{t._vscf_hmac_finish(this.ctxPtr,e);const r=t._vsc_buffer_bytes(e),n=t._vsc_buffer_len(e);return t.HEAPU8.slice(r,r+n)}finally{t._vsc_buffer_delete(e)}}reset(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),t._vscf_hmac_reset(this.ctxPtr)}}return r};var Hmac=initHmac;let initHkdf=(t,e)=>{class r{constructor(e){this.name="Hkdf",this.ctxPtr=void 0===e?t._vscf_hkdf_new():e}static newAndUseCContext(e){return new r(t._vscf_hkdf_shallow_copy(e))}static newAndTakeCContext(t){return new r(t)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(t._vscf_hkdf_delete(this.ctxPtr),this.ctxPtr=null)}set hash(r){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureImplementInterface("hash",r,"Foundation.Hash",e.FoundationInterfaceTag.HASH,e.FoundationInterface),t._vscf_hkdf_release_hash(this.ctxPtr),t._vscf_hkdf_use_hash(this.ctxPtr,r.ctxPtr)}algId(){return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),t._vscf_hkdf_alg_id(this.ctxPtr)}produceAlgInfo(){let r;return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),r=t._vscf_hkdf_produce_alg_info(this.ctxPtr),e.FoundationInterface.newAndTakeCContext(r)}restoreAlgInfo(r){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureImplementInterface("algInfo",r,"Foundation.AlgInfo",e.FoundationInterfaceTag.ALG_INFO,e.FoundationInterface),r=t._vscf_hkdf_restore_alg_info(this.ctxPtr,r.ctxPtr),e.FoundationError.handleStatusCode(r)}derive(e,r){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("data",e),precondition.ensureNumber("keyLen",r);var n=e.length*e.BYTES_PER_ELEMENT;const s=t._malloc(n);t.HEAP8.set(e,s),e=t._vsc_data_ctx_size(),e=t._malloc(e),t._vsc_data(e,s,n),n=t._vsc_buffer_new_with_capacity(r);try{t._vscf_hkdf_derive(this.ctxPtr,e,r,n);const s=t._vsc_buffer_bytes(n),c=t._vsc_buffer_len(n);return t.HEAPU8.slice(s,s+c)}finally{t._free(s),t._free(e),t._vsc_buffer_delete(n)}}reset(e,r){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("salt",e),precondition.ensureNumber("iterationCount",r);const n=e.length*e.BYTES_PER_ELEMENT,s=t._malloc(n);t.HEAP8.set(e,s),e=t._vsc_data_ctx_size(),e=t._malloc(e),t._vsc_data(e,s,n);try{t._vscf_hkdf_reset(this.ctxPtr,e,r)}finally{t._free(s),t._free(e)}}setInfo(e){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("info",e);const r=e.length*e.BYTES_PER_ELEMENT,n=t._malloc(r);t.HEAP8.set(e,n),e=t._vsc_data_ctx_size(),e=t._malloc(e),t._vsc_data(e,n,r);try{t._vscf_hkdf_set_info(this.ctxPtr,e)}finally{t._free(n),t._free(e)}}}return r};var Hkdf=initHkdf;let initSha512=(t,e)=>{class r{static get DIGEST_LEN(){return 64}get DIGEST_LEN(){return r.DIGEST_LEN}static get BLOCK_LEN(){return 128}get BLOCK_LEN(){return r.BLOCK_LEN}constructor(e){this.name="Sha512",this.ctxPtr=void 0===e?t._vscf_sha512_new():e}static newAndUseCContext(e){return new r(t._vscf_sha512_shallow_copy(e))}static newAndTakeCContext(t){return new r(t)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(t._vscf_sha512_delete(this.ctxPtr),this.ctxPtr=null)}algId(){return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),t._vscf_sha512_alg_id(this.ctxPtr)}produceAlgInfo(){let r;return precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),r=t._vscf_sha512_produce_alg_info(this.ctxPtr),e.FoundationInterface.newAndTakeCContext(r)}restoreAlgInfo(r){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureImplementInterface("algInfo",r,"Foundation.AlgInfo",e.FoundationInterfaceTag.ALG_INFO,e.FoundationInterface),r=t._vscf_sha512_restore_alg_info(this.ctxPtr,r.ctxPtr),e.FoundationError.handleStatusCode(r)}hash(e){precondition.ensureByteArray("data",e);var r=e.length*e.BYTES_PER_ELEMENT;const n=t._malloc(r);t.HEAP8.set(e,n),e=t._vsc_data_ctx_size(),e=t._malloc(e),t._vsc_data(e,n,r),r=t._vsc_buffer_new_with_capacity(this.DIGEST_LEN);try{t._vscf_sha512_hash(e,r);const n=t._vsc_buffer_bytes(r),s=t._vsc_buffer_len(r);return t.HEAPU8.slice(n,n+s)}finally{t._free(s),t._free(e),t._vsc_buffer_delete(r)}}start(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),t._vscf_sha512_start(this.ctxPtr)}update(e){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition.ensureByteArray("data",e);const r=e.length*e.BYTES_PER_ELEMENT,n=t._malloc(r);t.HEAP8.set(e,n),e=t._vsc_data_ctx_size(),e=t._malloc(e),t._vsc_data(e,n,r);try{t._vscf_sha512_update(this.ctxPtr,e)}finally{t._free(n),t._free(e)}}finish(){precondition.ensureNotNull("this.ctxPtr",this.ctxPtr);const e=t._vsc_buffer_new_with_capacity(this.DIGEST_LEN);try{t._vscf_sha512_finish(this.ctxPtr,e);const r=t._vsc_buffer_bytes(e),n=t._vsc_buffer_len(e);return t.HEAPU8.slice(r,r+n)}finally{t._vsc_buffer_delete(e)}}}return r};var Sha512=initSha512;let initRatchetError=(t,e)=>{class r extends Error{constructor(t){super(t),this.name="RatchetError",this.message=t}static handleStatusCode(t){if(0!=t){if(-1==t)throw new r("Error during protobuf deserialization.");if(-2==t)throw new r("Bad message type.");if(-3==t)throw new r("AES error.");if(-4==t)throw new r("RNG failed.");if(-5==t)throw new r("Curve25519 error.");if(-6==t)throw new r("Curve25519 error.");if(-7==t)throw new r("Key deserialization failed.");if(-8==t)throw new r("Invalid key type.");if(-9==t)throw new r("Identity key doesn't match.");if(-10==t)throw new r("Message already decrypted.");if(-11==t)throw new r("Too many lost messages.");if(-12==t)throw new r("Sender chain missing.");if(-13==t)throw new r("Skipped message missing.");if(-14==t)throw new r("Session is not initialized.");if(-15==t)throw new r("Exceeded max plain text len.");if(-16==t)throw new r("Too many messages for sender chain.");if(-17==t)throw new r("Too many messages for receiver chain.");if(-18==t)throw new r("Invalid padding.");if(-19==t)throw new r("Too many participants.");if(-20==t)throw new r("Too few participants.");if(-21==t)throw new r("Sender not found.");if(-22==t)throw new r("Cannot decrypt own messages.");if(-23==t)throw new r("Invalid signature.");if(-24==t)throw new r("Cannot remove myself.");if(-25==t)throw new r("Epoch mismatch.");if(-26==t)throw new r("Epoch not found.");if(-27==t)throw new r("Session id mismatch.");if(-28==t)throw new r("Simultaneous group user operation.");if(-29==t)throw new r("Myself is included in info.");throw new r("Unexpected status code:"+t)}}}return r};var RatchetError=initRatchetError;let initMsgType=(t,e)=>Object.freeze({REGULAR:0,PREKEY:1});var MsgType=initMsgType;let initGroupMsgType=(t,e)=>Object.freeze({GROUP_INFO:0,REGULAR:1});var GroupMsgType=initGroupMsgType;function ensureNumber$1(t,e){if(!("number"==typeof e||e instanceof Number))throw new TypeError(`'${t}' is not a number`);if(Number.isNaN(e))throw new TypeError(`'${t}' is NaN`);if(1/0===e)throw new TypeError(`'${t}' is Infinity`);if(-1/0===e)throw new TypeError(`'${t}' is -Infinity`)}function ensureNotNull$1(t,e){if(ensureNumber$1(t,e),0==e)throw new TypeError(`'${t}' is NULL`)}function ensureString$1(t,e){if(!("string"==typeof e||e instanceof String))throw new TypeError(`'${t}' is not a string`)}function ensureBoolean$1(t,e){if("boolean"!=typeof e)throw new TypeError(`'${t}' is not a boolean`)}function ensureByteArray$1(t,e){if(!(e instanceof Uint8Array))throw new TypeError(`'${t}' is not an Uint8Array`)}function ensureClass$1(t,e,r){if(!(e instanceof r))throw new TypeError(`'${t}' is not an instance of the class ${r.name}`);ensureNotNull$1(t,e.ctxPtr)}function ensureImplementInterface$1(t,e,r,n,s){if(ensureNotNull$1(t,e.ctxPtr),!s.isImplemented(e.ctxPtr,n))throw new TypeError(`'${t}' does not implement interface '${r}'`)}var ensureNumber_1$1=ensureNumber$1,ensureString_1$1=ensureString$1,ensureBoolean_1$1=ensureBoolean$1,ensureByteArray_1$1=ensureByteArray$1,ensureClass_1$1=ensureClass$1,ensureNotNull_1$1=ensureNotNull$1,ensureImplementInterface_1$1=ensureImplementInterface$1,precondition$1={ensureNumber:ensureNumber_1$1,ensureString:ensureString_1$1,ensureBoolean:ensureBoolean_1$1,ensureByteArray:ensureByteArray_1$1,ensureClass:ensureClass_1$1,ensureNotNull:ensureNotNull_1$1,ensureImplementInterface:ensureImplementInterface_1$1};let initRatchetCommon=(t,e)=>{class r{static get MAX_PLAIN_TEXT_LEN(){return 3e4}get MAX_PLAIN_TEXT_LEN(){return r.MAX_PLAIN_TEXT_LEN}static get MAX_MESSAGE_LEN(){return 32975}get MAX_MESSAGE_LEN(){return r.MAX_MESSAGE_LEN}static get KEY_ID_LEN(){return 8}get KEY_ID_LEN(){return r.KEY_ID_LEN}static get PARTICIPANT_ID_LEN(){return 32}get PARTICIPANT_ID_LEN(){return r.PARTICIPANT_ID_LEN}static get SESSION_ID_LEN(){return 32}get SESSION_ID_LEN(){return r.SESSION_ID_LEN}static get MAX_PARTICIPANTS_COUNT(){return 100}get MAX_PARTICIPANTS_COUNT(){return r.MAX_PARTICIPANTS_COUNT}static get MIN_PARTICIPANTS_COUNT(){return 2}get MIN_PARTICIPANTS_COUNT(){return r.MIN_PARTICIPANTS_COUNT}static get MAX_GROUP_MESSAGE_LEN(){return 32918}get MAX_GROUP_MESSAGE_LEN(){return r.MAX_GROUP_MESSAGE_LEN}}return r};var RatchetCommon=initRatchetCommon;let initRatchetKeyId=(t,e)=>{class r{constructor(e){this.name="RatchetKeyId",this.ctxPtr=void 0===e?t._vscr_ratchet_key_id_new():e}static newAndUseCContext(e){return new r(t._vscr_ratchet_key_id_shallow_copy(e))}static newAndTakeCContext(t){return new r(t)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(t._vscr_ratchet_key_id_delete(this.ctxPtr),this.ctxPtr=null)}computePublicKeyId(r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("publicKey",r);var n=r.length*r.BYTES_PER_ELEMENT;const s=t._malloc(n);t.HEAP8.set(r,s),r=t._vsc_data_ctx_size(),r=t._malloc(r),t._vsc_data(r,s,n),n=t._vsc_buffer_new_with_capacity(e.RatchetCommon.KEY_ID_LEN);try{const s=t._vscr_ratchet_key_id_compute_public_key_id(this.ctxPtr,r,n);e.RatchetError.handleStatusCode(s);const c=t._vsc_buffer_bytes(n),a=t._vsc_buffer_len(n);return t.HEAPU8.slice(c,c+a)}finally{t._free(s),t._free(r),t._vsc_buffer_delete(n)}}}return r};var RatchetKeyId=initRatchetKeyId;let initRatchetMessage=(t,e)=>{class r{constructor(e){this.name="RatchetMessage",this.ctxPtr=void 0===e?t._vscr_ratchet_message_new():e}static newAndUseCContext(e){return new r(t._vscr_ratchet_message_shallow_copy(e))}static newAndTakeCContext(t){return new r(t)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(t._vscr_ratchet_message_delete(this.ctxPtr),this.ctxPtr=null)}getType(){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),t._vscr_ratchet_message_get_type(this.ctxPtr)}getCounter(){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),t._vscr_ratchet_message_get_counter(this.ctxPtr)}getLongTermPublicKey(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);var e=t._vsc_data_ctx_size();e=t._malloc(e);try{t._vscr_ratchet_message_get_long_term_public_key(e,this.ctxPtr);const r=t._vsc_data_len(e),n=t._vsc_data_bytes(e);return t.HEAPU8.slice(n,n+r)}finally{t._free(e)}}getOneTimePublicKey(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);var e=t._vsc_data_ctx_size();e=t._malloc(e);try{t._vscr_ratchet_message_get_one_time_public_key(e,this.ctxPtr);const r=t._vsc_data_len(e),n=t._vsc_data_bytes(e);return t.HEAPU8.slice(n,n+r)}finally{t._free(e)}}serializeLen(){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),t._vscr_ratchet_message_serialize_len(this.ctxPtr)}serialize(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);var e=this.serializeLen();e=t._vsc_buffer_new_with_capacity(e);try{t._vscr_ratchet_message_serialize(this.ctxPtr,e);const r=t._vsc_buffer_bytes(e),n=t._vsc_buffer_len(e);return t.HEAPU8.slice(r,r+n)}finally{t._vsc_buffer_delete(e)}}static deserialize(n){precondition$1.ensureByteArray("input",n);var s=n.length*n.BYTES_PER_ELEMENT;const c=t._malloc(s);let a;t.HEAP8.set(n,c),n=t._vsc_data_ctx_size(),n=t._malloc(n),t._vsc_data(n,c,s),s=t._vscr_error_ctx_size(),s=t._malloc(s),t._vscr_error_reset(s);try{a=t._vscr_ratchet_message_deserialize(n,s);const c=t._vscr_error_status(s);return e.RatchetError.handleStatusCode(c),r.newAndTakeCContext(a)}finally{t._free(c),t._free(n),t._free(s)}}}return r};var RatchetMessage=initRatchetMessage;let initRatchetSession=(t,e)=>{class r{constructor(e){this.name="RatchetSession",this.ctxPtr=void 0===e?t._vscr_ratchet_session_new():e}static newAndUseCContext(e){return new r(t._vscr_ratchet_session_shallow_copy(e))}static newAndTakeCContext(t){return new r(t)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(t._vscr_ratchet_session_delete(this.ctxPtr),this.ctxPtr=null)}set rng(r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureImplementInterface("rng",r,"Foundation.Random",e.FoundationInterfaceTag.RANDOM,e.FoundationInterface),t._vscr_ratchet_session_release_rng(this.ctxPtr),t._vscr_ratchet_session_use_rng(this.ctxPtr,r.ctxPtr)}setupDefaults(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=t._vscr_ratchet_session_setup_defaults(this.ctxPtr);e.RatchetError.handleStatusCode(r)}initiate(r,n,s,c){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("senderIdentityPrivateKey",r),precondition$1.ensureByteArray("receiverIdentityPublicKey",n),precondition$1.ensureByteArray("receiverLongTermPublicKey",s),precondition$1.ensureByteArray("receiverOneTimePublicKey",c);var a=r.length*r.BYTES_PER_ELEMENT;const i=t._malloc(a);t.HEAP8.set(r,i),r=t._vsc_data_ctx_size(),r=t._malloc(r),t._vsc_data(r,i,a);var o=n.length*n.BYTES_PER_ELEMENT;a=t._malloc(o),t.HEAP8.set(n,a),n=t._vsc_data_ctx_size(),n=t._malloc(n),t._vsc_data(n,a,o);var _=s.length*s.BYTES_PER_ELEMENT;o=t._malloc(_),t.HEAP8.set(s,o),s=t._vsc_data_ctx_size(),s=t._malloc(s),t._vsc_data(s,o,_),_=c.length*c.BYTES_PER_ELEMENT;const u=t._malloc(_);t.HEAP8.set(c,u),c=t._vsc_data_ctx_size(),c=t._malloc(c),t._vsc_data(c,u,_);try{const a=t._vscr_ratchet_session_initiate(this.ctxPtr,r,n,s,c);e.RatchetError.handleStatusCode(a)}finally{t._free(i),t._free(r),t._free(a),t._free(n),t._free(o),t._free(s),t._free(u),t._free(c)}}respond(r,n,s,c,a){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("senderIdentityPublicKey",r),precondition$1.ensureByteArray("receiverIdentityPrivateKey",n),precondition$1.ensureByteArray("receiverLongTermPrivateKey",s),precondition$1.ensureByteArray("receiverOneTimePrivateKey",c),precondition$1.ensureClass("message",a,e.RatchetMessage);var i=r.length*r.BYTES_PER_ELEMENT;const o=t._malloc(i);t.HEAP8.set(r,o),r=t._vsc_data_ctx_size(),r=t._malloc(r),t._vsc_data(r,o,i);var _=n.length*n.BYTES_PER_ELEMENT;i=t._malloc(_),t.HEAP8.set(n,i),n=t._vsc_data_ctx_size(),n=t._malloc(n),t._vsc_data(n,i,_);var u=s.length*s.BYTES_PER_ELEMENT;_=t._malloc(u),t.HEAP8.set(s,_),s=t._vsc_data_ctx_size(),s=t._malloc(s),t._vsc_data(s,_,u),u=c.length*c.BYTES_PER_ELEMENT;const l=t._malloc(u);t.HEAP8.set(c,l),c=t._vsc_data_ctx_size(),c=t._malloc(c),t._vsc_data(c,l,u);try{const i=t._vscr_ratchet_session_respond(this.ctxPtr,r,n,s,c,a.ctxPtr);e.RatchetError.handleStatusCode(i)}finally{t._free(o),t._free(r),t._free(i),t._free(n),t._free(_),t._free(s),t._free(l),t._free(c)}}isInitiator(){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),!!t._vscr_ratchet_session_is_initiator(this.ctxPtr)}receivedFirstResponse(){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),!!t._vscr_ratchet_session_received_first_response(this.ctxPtr)}receiverHasOneTimePublicKey(){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),!!t._vscr_ratchet_session_receiver_has_one_time_public_key(this.ctxPtr)}encrypt(r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("plainText",r);var n=r.length*r.BYTES_PER_ELEMENT;const s=t._malloc(n);let c;t.HEAP8.set(r,s),r=t._vsc_data_ctx_size(),r=t._malloc(r),t._vsc_data(r,s,n),n=t._vscr_error_ctx_size(),n=t._malloc(n),t._vscr_error_reset(n);try{c=t._vscr_ratchet_session_encrypt(this.ctxPtr,r,n);const s=t._vscr_error_status(n);return e.RatchetError.handleStatusCode(s),e.RatchetMessage.newAndTakeCContext(c)}finally{t._free(s),t._free(r),t._free(n)}}decryptLen(r){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureClass("message",r,e.RatchetMessage),t._vscr_ratchet_session_decrypt_len(this.ctxPtr,r.ctxPtr)}decrypt(r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureClass("message",r,e.RatchetMessage);var n=this.decryptLen(r);n=t._vsc_buffer_new_with_capacity(n);try{const s=t._vscr_ratchet_session_decrypt(this.ctxPtr,r.ctxPtr,n);e.RatchetError.handleStatusCode(s);const c=t._vsc_buffer_bytes(n),a=t._vsc_buffer_len(n);return t.HEAPU8.slice(c,c+a)}finally{t._vsc_buffer_delete(n)}}serialize(){let e;precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);try{e=t._vscr_ratchet_session_serialize(this.ctxPtr);const r=t._vsc_buffer_len(e),n=t._vsc_buffer_bytes(e);return t.HEAPU8.slice(n,n+r)}finally{t._vsc_buffer_delete(e)}}static deserialize(n){precondition$1.ensureByteArray("input",n);var s=n.length*n.BYTES_PER_ELEMENT;const c=t._malloc(s);let a;t.HEAP8.set(n,c),n=t._vsc_data_ctx_size(),n=t._malloc(n),t._vsc_data(n,c,s),s=t._vscr_error_ctx_size(),s=t._malloc(s),t._vscr_error_reset(s);try{a=t._vscr_ratchet_session_deserialize(n,s);const c=t._vscr_error_status(s);return e.RatchetError.handleStatusCode(c),r.newAndTakeCContext(a)}finally{t._free(c),t._free(n),t._free(s)}}}return r};var RatchetSession=initRatchetSession;let initRatchetGroupParticipantsInfo=(t,e)=>{class r{constructor(e){this.name="RatchetGroupParticipantsInfo",this.ctxPtr=void 0===e?t._vscr_ratchet_group_participants_info_new():e}static newAndUseCContext(e){return new r(t._vscr_ratchet_group_participants_info_shallow_copy(e))}static newAndTakeCContext(t){return new r(t)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(t._vscr_ratchet_group_participants_info_delete(this.ctxPtr),this.ctxPtr=null)}static newSize(e){return precondition$1.ensureNumber("size",e),e=t._vscr_ratchet_group_participants_info_new_size(e),r.newAndTakeCContext(e)}addParticipant(r,n){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("id",r),precondition$1.ensureByteArray("pubKey",n);var s=r.length*r.BYTES_PER_ELEMENT;const c=t._malloc(s);t.HEAP8.set(r,c),r=t._vsc_data_ctx_size(),r=t._malloc(r),t._vsc_data(r,c,s),s=n.length*n.BYTES_PER_ELEMENT;const a=t._malloc(s);t.HEAP8.set(n,a),n=t._vsc_data_ctx_size(),n=t._malloc(n),t._vsc_data(n,a,s);try{const s=t._vscr_ratchet_group_participants_info_add_participant(this.ctxPtr,r,n);e.RatchetError.handleStatusCode(s)}finally{t._free(c),t._free(r),t._free(a),t._free(n)}}}return r};var RatchetGroupParticipantsInfo=initRatchetGroupParticipantsInfo;let initRatchetGroupMessage=(t,e)=>{class r{constructor(e){this.name="RatchetGroupMessage",this.ctxPtr=void 0===e?t._vscr_ratchet_group_message_new():e}static newAndUseCContext(e){return new r(t._vscr_ratchet_group_message_shallow_copy(e))}static newAndTakeCContext(t){return new r(t)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(t._vscr_ratchet_group_message_delete(this.ctxPtr),this.ctxPtr=null)}getType(){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),t._vscr_ratchet_group_message_get_type(this.ctxPtr)}getSessionId(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);var e=t._vsc_data_ctx_size();e=t._malloc(e);try{t._vscr_ratchet_group_message_get_session_id(e,this.ctxPtr);const r=t._vsc_data_len(e),n=t._vsc_data_bytes(e);return t.HEAPU8.slice(n,n+r)}finally{t._free(e)}}getCounter(){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),t._vscr_ratchet_group_message_get_counter(this.ctxPtr)}getEpoch(){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),t._vscr_ratchet_group_message_get_epoch(this.ctxPtr)}serializeLen(){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),t._vscr_ratchet_group_message_serialize_len(this.ctxPtr)}serialize(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);var e=this.serializeLen();e=t._vsc_buffer_new_with_capacity(e);try{t._vscr_ratchet_group_message_serialize(this.ctxPtr,e);const r=t._vsc_buffer_bytes(e),n=t._vsc_buffer_len(e);return t.HEAPU8.slice(r,r+n)}finally{t._vsc_buffer_delete(e)}}static deserialize(n){precondition$1.ensureByteArray("input",n);var s=n.length*n.BYTES_PER_ELEMENT;const c=t._malloc(s);let a;t.HEAP8.set(n,c),n=t._vsc_data_ctx_size(),n=t._malloc(n),t._vsc_data(n,c,s),s=t._vscr_error_ctx_size(),s=t._malloc(s),t._vscr_error_reset(s);try{a=t._vscr_ratchet_group_message_deserialize(n,s);const c=t._vscr_error_status(s);return e.RatchetError.handleStatusCode(c),r.newAndTakeCContext(a)}finally{t._free(c),t._free(n),t._free(s)}}}return r};var RatchetGroupMessage=initRatchetGroupMessage;let initRatchetGroupTicket=(t,e)=>{class r{constructor(e){this.name="RatchetGroupTicket",this.ctxPtr=void 0===e?t._vscr_ratchet_group_ticket_new():e}static newAndUseCContext(e){return new r(t._vscr_ratchet_group_ticket_shallow_copy(e))}static newAndTakeCContext(t){return new r(t)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(t._vscr_ratchet_group_ticket_delete(this.ctxPtr),this.ctxPtr=null)}set rng(r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureImplementInterface("rng",r,"Foundation.Random",e.FoundationInterfaceTag.RANDOM,e.FoundationInterface),t._vscr_ratchet_group_ticket_release_rng(this.ctxPtr),t._vscr_ratchet_group_ticket_use_rng(this.ctxPtr,r.ctxPtr)}setupDefaults(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=t._vscr_ratchet_group_ticket_setup_defaults(this.ctxPtr);e.RatchetError.handleStatusCode(r)}setupTicketAsNew(r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("sessionId",r);const n=r.length*r.BYTES_PER_ELEMENT,s=t._malloc(n);t.HEAP8.set(r,s),r=t._vsc_data_ctx_size(),r=t._malloc(r),t._vsc_data(r,s,n);try{const n=t._vscr_ratchet_group_ticket_setup_ticket_as_new(this.ctxPtr,r);e.RatchetError.handleStatusCode(n)}finally{t._free(s),t._free(r)}}getTicketMessage(){let r;return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),r=t._vscr_ratchet_group_ticket_get_ticket_message(this.ctxPtr),e.RatchetGroupMessage.newAndUseCContext(r)}}return r};var RatchetGroupTicket=initRatchetGroupTicket;let initRatchetGroupParticipantsIds=(t,e)=>{class r{constructor(e){this.name="RatchetGroupParticipantsIds",this.ctxPtr=void 0===e?t._vscr_ratchet_group_participants_ids_new():e}static newAndUseCContext(e){return new r(t._vscr_ratchet_group_participants_ids_shallow_copy(e))}static newAndTakeCContext(t){return new r(t)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(t._vscr_ratchet_group_participants_ids_delete(this.ctxPtr),this.ctxPtr=null)}static newSize(e){return precondition$1.ensureNumber("size",e),e=t._vscr_ratchet_group_participants_ids_new_size(e),r.newAndTakeCContext(e)}addId(e){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("id",e);const r=e.length*e.BYTES_PER_ELEMENT,n=t._malloc(r);t.HEAP8.set(e,n),e=t._vsc_data_ctx_size(),e=t._malloc(e),t._vsc_data(e,n,r);try{t._vscr_ratchet_group_participants_ids_add_id(this.ctxPtr,e)}finally{t._free(n),t._free(e)}}}return r};var RatchetGroupParticipantsIds=initRatchetGroupParticipantsIds;let initRatchetGroupSession=(t,e)=>{class r{constructor(e){this.name="RatchetGroupSession",this.ctxPtr=void 0===e?t._vscr_ratchet_group_session_new():e}static newAndUseCContext(e){return new r(t._vscr_ratchet_group_session_shallow_copy(e))}static newAndTakeCContext(t){return new r(t)}delete(){void 0!==this.ctxPtr&&null!==this.ctxPtr&&(t._vscr_ratchet_group_session_delete(this.ctxPtr),this.ctxPtr=null)}set rng(r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureImplementInterface("rng",r,"Foundation.Random",e.FoundationInterfaceTag.RANDOM,e.FoundationInterface),t._vscr_ratchet_group_session_release_rng(this.ctxPtr),t._vscr_ratchet_group_session_use_rng(this.ctxPtr,r.ctxPtr)}isInitialized(){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),!!t._vscr_ratchet_group_session_is_initialized(this.ctxPtr)}isPrivateKeySet(){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),!!t._vscr_ratchet_group_session_is_private_key_set(this.ctxPtr)}isMyIdSet(){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),!!t._vscr_ratchet_group_session_is_my_id_set(this.ctxPtr)}getCurrentEpoch(){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),t._vscr_ratchet_group_session_get_current_epoch(this.ctxPtr)}setupDefaults(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);const r=t._vscr_ratchet_group_session_setup_defaults(this.ctxPtr);e.RatchetError.handleStatusCode(r)}setPrivateKey(r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("myPrivateKey",r);const n=r.length*r.BYTES_PER_ELEMENT,s=t._malloc(n);t.HEAP8.set(r,s),r=t._vsc_data_ctx_size(),r=t._malloc(r),t._vsc_data(r,s,n);try{const n=t._vscr_ratchet_group_session_set_private_key(this.ctxPtr,r);e.RatchetError.handleStatusCode(n)}finally{t._free(s),t._free(r)}}setMyId(e){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("myId",e);const r=e.length*e.BYTES_PER_ELEMENT,n=t._malloc(r);t.HEAP8.set(e,n),e=t._vsc_data_ctx_size(),e=t._malloc(e),t._vsc_data(e,n,r);try{t._vscr_ratchet_group_session_set_my_id(this.ctxPtr,e)}finally{t._free(n),t._free(e)}}getMyId(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);var e=t._vsc_data_ctx_size();e=t._malloc(e);try{t._vscr_ratchet_group_session_get_my_id(e,this.ctxPtr);const r=t._vsc_data_len(e),n=t._vsc_data_bytes(e);return t.HEAPU8.slice(n,n+r)}finally{t._free(e)}}getSessionId(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);var e=t._vsc_data_ctx_size();e=t._malloc(e);try{t._vscr_ratchet_group_session_get_session_id(e,this.ctxPtr);const r=t._vsc_data_len(e),n=t._vsc_data_bytes(e);return t.HEAPU8.slice(n,n+r)}finally{t._free(e)}}getParticipantsCount(){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),t._vscr_ratchet_group_session_get_participants_count(this.ctxPtr)}setupSessionState(r,n){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureClass("message",r,e.RatchetGroupMessage),precondition$1.ensureClass("participants",n,e.RatchetGroupParticipantsInfo),r=t._vscr_ratchet_group_session_setup_session_state(this.ctxPtr,r.ctxPtr,n.ctxPtr),e.RatchetError.handleStatusCode(r)}updateSessionState(r,n,s){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureClass("message",r,e.RatchetGroupMessage),precondition$1.ensureClass("addParticipants",n,e.RatchetGroupParticipantsInfo),precondition$1.ensureClass("removeParticipants",s,e.RatchetGroupParticipantsIds),r=t._vscr_ratchet_group_session_update_session_state(this.ctxPtr,r.ctxPtr,n.ctxPtr,s.ctxPtr),e.RatchetError.handleStatusCode(r)}encrypt(r){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureByteArray("plainText",r);var n=r.length*r.BYTES_PER_ELEMENT;const s=t._malloc(n);let c;t.HEAP8.set(r,s),r=t._vsc_data_ctx_size(),r=t._malloc(r),t._vsc_data(r,s,n),n=t._vscr_error_ctx_size(),n=t._malloc(n),t._vscr_error_reset(n);try{c=t._vscr_ratchet_group_session_encrypt(this.ctxPtr,r,n);const s=t._vscr_error_status(n);return e.RatchetError.handleStatusCode(s),e.RatchetGroupMessage.newAndTakeCContext(c)}finally{t._free(s),t._free(r),t._free(n)}}decryptLen(r){return precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureClass("message",r,e.RatchetGroupMessage),t._vscr_ratchet_group_session_decrypt_len(this.ctxPtr,r.ctxPtr)}decrypt(r,n){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr),precondition$1.ensureClass("message",r,e.RatchetGroupMessage),precondition$1.ensureByteArray("senderId",n);var s=n.length*n.BYTES_PER_ELEMENT;const c=t._malloc(s);t.HEAP8.set(n,c),n=t._vsc_data_ctx_size(),n=t._malloc(n),t._vsc_data(n,c,s),s=this.decryptLen(r),s=t._vsc_buffer_new_with_capacity(s);try{const c=t._vscr_ratchet_group_session_decrypt(this.ctxPtr,r.ctxPtr,n,s);e.RatchetError.handleStatusCode(c);const a=t._vsc_buffer_bytes(s),i=t._vsc_buffer_len(s);return t.HEAPU8.slice(a,a+i)}finally{t._free(a),t._free(n),t._vsc_buffer_delete(s)}}serialize(){let e;precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);try{e=t._vscr_ratchet_group_session_serialize(this.ctxPtr);const r=t._vsc_buffer_len(e),n=t._vsc_buffer_bytes(e);return t.HEAPU8.slice(n,n+r)}finally{t._vsc_buffer_delete(e)}}static deserialize(n){precondition$1.ensureByteArray("input",n);var s=n.length*n.BYTES_PER_ELEMENT;const c=t._malloc(s);let a;t.HEAP8.set(n,c),n=t._vsc_data_ctx_size(),n=t._malloc(n),t._vsc_data(n,c,s),s=t._vscr_error_ctx_size(),s=t._malloc(s),t._vscr_error_reset(s);try{a=t._vscr_ratchet_group_session_deserialize(n,s);const c=t._vscr_error_status(s);return e.RatchetError.handleStatusCode(c),r.newAndTakeCContext(a)}finally{t._free(c),t._free(n),t._free(s)}}createGroupTicket(){precondition$1.ensureNotNull("this.ctxPtr",this.ctxPtr);var r=t._vscr_error_ctx_size();let n;r=t._malloc(r),t._vscr_error_reset(r);try{n=t._vscr_ratchet_group_session_create_group_ticket(this.ctxPtr,r);const s=t._vscr_error_status(r);return e.RatchetError.handleStatusCode(s),e.RatchetGroupTicket.newAndTakeCContext(n)}finally{t._free(r)}}}return r};var RatchetGroupSession=initRatchetGroupSession;let initProject=()=>{const t=new libratchet_browser;return new Promise((e,r)=>{t.onRuntimeInitialized=()=>{const r={};r.FoundationInterface=FoundationInterface(t,r),r.CtrDrbg=CtrDrbg(t,r),r.Hmac=Hmac(t,r),r.Hkdf=Hkdf(t,r),r.Sha512=Sha512(t,r),r.RatchetError=RatchetError(),r.MsgType=MsgType(),r.GroupMsgType=GroupMsgType(),r.RatchetCommon=RatchetCommon(),r.RatchetKeyId=RatchetKeyId(t,r),r.RatchetMessage=RatchetMessage(t,r),r.RatchetSession=RatchetSession(t,r),r.RatchetGroupParticipantsInfo=RatchetGroupParticipantsInfo(t,r),r.RatchetGroupMessage=RatchetGroupMessage(t,r),r.RatchetGroupTicket=RatchetGroupTicket(t,r),r.RatchetGroupParticipantsIds=RatchetGroupParticipantsIds(t),r.RatchetGroupSession=RatchetGroupSession(t,r),e(r)},t.onAbort=t=>{r(Error(t))}})};var ratchet=initProject;module.exports=ratchet;
